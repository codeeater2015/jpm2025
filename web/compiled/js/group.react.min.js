var AppLoading=React.createClass({displayName:"AppLoading",render:function(){var e=React.createElement("span",null);return this.props.loading&&(e=React.createElement("span",{className:"fa fa-spinner fa-spin"})),e}});window.AppLoading=AppLoading;var AlertDismissable=React.createClass({displayName:"AlertDismissable",render:function(){if(this.props.isVisible){var e="alert alert-"+this.props.alertType;return React.createElement("div",{className:e},React.createElement("button",{type:"button",className:"close",onClick:this.props.hideAlert}),this.props.alertMessage)}return null}});window.AlertDismissable=AlertDismissable;var Modal=ReactBootstrap.Modal,FormGroup=ReactBootstrap.FormGroup,ControlLabel=ReactBootstrap.ControlLabel,FormControl=ReactBootstrap.FormControl,Checkbox=ReactBootstrap.Checkbox,HelpBlock=ReactBootstrap.HelpBlock,GroupCreateModal=React.createClass({displayName:"GroupCreateModal",getInitialState:function(){return{loading:!1,alertVisible:!1,form:{errors:{},data:{name:"",description:"",allowRead:0,allowWrite:0,accessLevel:"",status:!0}}}},render:function(){return React.createElement(Modal,{show:this.props.show,backdrop:"static",keyboard:!1,onHide:this.props.onHide,onExited:this.clearForm,onEnter:this.onEnter},React.createElement("form",{ref:"group_form",onSubmit:this.onSubmit},React.createElement(Modal.Header,{closeButton:!0},React.createElement(Modal.Title,null,React.createElement("strong",null,"Create Group"))),React.createElement(Modal.Body,null,React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-12"},React.createElement(AlertDismissable,{isVisible:this.state.alertVisible,alertType:this.state.alertType,alertMessage:this.state.alertMessage,hideAlert:this.hideAlert}))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-6"},React.createElement(FormGroup,{bsClass:"form-group",controlId:"formName",validationState:this.getValidationState("groupName")},React.createElement(ControlLabel,null,"Group Name"),React.createElement(FormControl,{type:"text",name:"name",value:this.state.form.data.name,onChange:this.onChange,autoFocus:!0}),React.createElement(HelpBlock,null,this.getError("groupName")))),React.createElement("div",{className:"col-md-6"},React.createElement(FormGroup,{bsClass:"form-group",controlId:"formAccessLevel",validationState:this.getValidationState("accessLevel")},React.createElement(ControlLabel,null,"Access Level"),React.createElement(FormControl,{componentClass:"select",name:"accessLevel",value:this.state.form.data.accessLevel,onChange:this.onChange},React.createElement("option",{value:""}," -- Select -- "),React.createElement("option",{value:"ALL"}," All Access "),React.createElement("option",{value:"PROVINCE_LEVEL"},"Province Access "),React.createElement("option",{value:"MUNICIPALITY_LEVEL"},"Municipality Access "),React.createElement("option",{value:"BARANGAY_LEVEL"},"Barangay Level ")),React.createElement(HelpBlock,null,this.getError("accessLevel"))))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-6",style:{marginLeft:"20px"}},React.createElement(FormGroup,{bsClass:"form-group",controlId:"formAccessLevel",validationState:this.getValidationState("allowWrite")},React.createElement(Checkbox,{name:"allowRead",checked:1==this.state.form.data.allowRead,onChange:this.onCheckboxChange}," Allow Read "),React.createElement(Checkbox,{name:"allowWrite",checked:1==this.state.form.data.allowWrite,onChange:this.onCheckboxChange}," Allow Write "),React.createElement(HelpBlock,null,this.getError("allowWrite"))))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-12"},React.createElement(FormGroup,{bsClass:"form-group",controlId:"formDescription",validationState:this.getValidationState("groupDesc")},React.createElement(ControlLabel,null,"Description"),React.createElement(FormControl,{componentClass:"textarea",rows:"5",name:"description",value:this.state.form.data.description,onChange:this.onChange}),React.createElement(HelpBlock,null,this.getError("groupDesc"))))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-12"},React.createElement(FormGroup,{controlId:"formIsActive"},React.createElement(ControlLabel,null,"Status"),React.createElement("br",null),React.createElement(FormControl,{type:"checkbox",className:"make-switch",name:"status","data-on-text":"Active","data-off-text":"Inactive","data-off-color":"danger","data-size":"small"}))))),React.createElement(Modal.Footer,null,React.createElement("button",{type:"submit",className:"btn btn-primary btn-fill",disabled:this.state.loading},"Create ",React.createElement(AppLoading,{loading:this.state.loading})),React.createElement("button",{type:"button",onClick:this.props.onHide,className:"btn btn-default"},"Close"))))},onSubmit:function(e){e.preventDefault();var t=this,a=this.state.form.data,o=Routing.generate("ajax_create_group",{},!0);$.ajax({url:o,type:"POST",dataType:"json",data:JSON.stringify(a),beforeSend:function(){t.showLoading()}}).done(function(e){t.setState({alertType:"info",alertMessage:e.message}),t.props.onSuccess(),t.clearForm()}).fail(function(e){var a="";switch(e.status){case 400:a=e.responseJSON.message,t.setErrors(e.responseJSON.validation_error);break;case 403:a=e.responseJSON.message;break;default:a="Unknown error."}t.setState({alertType:"danger",alertMessage:a})}).always(function(){t.hideLoading(),t.showAlert()})},onEnter:function(){var e=this,t=$('input[name="status"]'),a=e.state.form;t.bootstrapSwitch("state",1,1),t.on("switchChange.bootstrapSwitch",function(t,o){a.data.status=o,e.setState(a)})},onChange:function(e){var t=this.state.form;t.data[e.target.name]=e.target.value,this.setState(t)},onCheckboxChange:function(e){var t=this.state.form;t.data[e.target.name]=e.target.checked?1:0,this.setState(t)},clearForm:function(){this.setState(this.getInitialState())},showLoading:function(){this.setState({loading:!0})},hideLoading:function(){this.setState({loading:!1})},showAlert:function(){this.setState({alertVisible:!0})},hideAlert:function(){this.setState({alertVisible:!1})},setErrors:function(e){var t=this.state.form;t.errors=e,this.setState(t)},getError:function(e){for(var t in this.state.form.errors)if(t==e)return this.state.form.errors[e];return null},getValidationState:function(e){return this.getError(e)?"error":null}});window.GroupCreateModal=GroupCreateModal;var Modal=ReactBootstrap.Modal,FormGroup=ReactBootstrap.FormGroup,ControlLabel=ReactBootstrap.ControlLabel,FormControl=ReactBootstrap.FormControl,HelpBlock=ReactBootstrap.HelpBlock,Checkbox=ReactBootstrap.Checkbox,GroupEditModal=React.createClass({displayName:"GroupEditModal",getInitialState:function(){return{loading:!1,alertVisible:!1,form:{errors:{},data:{id:"",name:"",description:"",status:!0}}}},componentDidMount:function(){},componentWillReceiveProps:function(e){if(e.hasOwnProperty("model")){var t=this.state.form;t.data.name=null==e.model.groupName?"":e.model.groupName,t.data.description=null==e.model.groupDesc?"":e.model.groupDesc,t.data.accessLevel=null==e.model.accessLevel?"":e.model.accessLevel,t.data.allowRead=null==e.model.allowRead?0:e.model.allowRead,t.data.allowWrite=null==e.model.allowWrite?0:e.model.allowWrite,t.data.status="Active"==e.model.status?1:0,t.data.id=e.model.id,this.setState({form:t})}},render:function(){return React.createElement(Modal,{backdrop:"static",show:this.props.show,onHide:this.props.onHide,onExited:this.clear,onEnter:this.onEnter},React.createElement("form",{onSubmit:this.onSubmit},React.createElement(Modal.Header,{closeButton:!0},React.createElement(Modal.Title,null,React.createElement("strong",null,"Edit Group"))),React.createElement(Modal.Body,null,React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-12"},React.createElement(AlertDismissable,{isVisible:this.state.alertVisible,alertType:this.state.alertType,alertMessage:this.state.alertMessage,hideAlert:this.hideAlert}))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-6"},React.createElement(FormGroup,{bsClass:"form-group",controlId:"formName",validationState:this.getValidationState("groupName")},React.createElement(ControlLabel,null,"Group Name"),React.createElement(FormControl,{type:"text",name:"name",value:this.state.form.data.name,onChange:this.onChange,autoFocus:!0}),React.createElement(HelpBlock,null,this.getError("groupName")))),React.createElement("div",{className:"col-md-6"},React.createElement(FormGroup,{bsClass:"form-group",controlId:"formAccessLevel",validationState:this.getValidationState("accessLevel")},React.createElement(ControlLabel,null,"Access Level"),React.createElement(FormControl,{componentClass:"select",name:"accessLevel",value:this.state.form.data.accessLevel,onChange:this.onChange},React.createElement("option",{value:""}," -- Select -- "),React.createElement("option",{value:"ALL"}," All Access "),React.createElement("option",{value:"PROVINCE_LEVEL"},"Province Access "),React.createElement("option",{value:"MUNICIPALITY_LEVEL"},"Municipality Access "),React.createElement("option",{value:"BARANGAY_LEVEL"},"Barangay Level ")),React.createElement(HelpBlock,null,this.getError("accessLevel"))))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-6",style:{marginLeft:"20px"}},React.createElement(FormGroup,{bsClass:"form-group",controlId:"formAccessLevel",validationState:this.getValidationState("allowWrite")},React.createElement(Checkbox,{name:"allowRead",checked:1==this.state.form.data.allowRead,onChange:this.onCheckboxChange}," Allow Read "),React.createElement(Checkbox,{name:"allowWrite",checked:1==this.state.form.data.allowWrite,onChange:this.onCheckboxChange}," Allow Write "),React.createElement(HelpBlock,null,this.getError("allowWrite"))))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-12"},React.createElement(FormGroup,{bsClass:"form-group",controlId:"formDescription",validationState:this.getValidationState("groupDesc")},React.createElement(ControlLabel,null,"Description"),React.createElement(FormControl,{componentClass:"textarea",value:this.state.form.data.description,rows:"5",name:"description",onChange:this.onChange}),React.createElement(HelpBlock,null,this.getError("groupDesc"))))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-12"},React.createElement(FormGroup,{controlId:"formIsActive"},React.createElement(ControlLabel,null,"Status"),React.createElement("br",null),React.createElement(FormControl,{type:"checkbox",className:"make-switch",name:"status","data-on-text":"Active","data-off-text":"Inactive","data-off-color":"danger","data-size":"small"}))))),React.createElement(Modal.Footer,null,React.createElement("button",{type:"submit",className:"btn btn-primary btn-fill",disabled:this.state.loading},"Update ",React.createElement(AppLoading,{loading:this.state.loading})),React.createElement("button",{type:"button",onClick:this.props.onHide,className:"btn btn-default"},"Close"))))},onSubmit:function(e){e.preventDefault();var t=this,a=this.state.form.data,o=Routing.generate("ajax_update_group",{},!0);console.log("Editing User Group"),$.ajax({url:o,type:"PATCH",dataType:"json",data:JSON.stringify(a),beforeSend:function(){t.showLoading()}}).done(function(e){console.log(e),t.setState({alertType:"info",alertMessage:e.message}),t.props.onSuccess(),t.clearErrors()}).fail(function(e){var a="";switch(e.status){case 400:a=e.responseJSON.message,t.setErrors(e.responseJSON.validation_error);break;case 403:case 404:a=e.responseJSON.message;break;default:a="Unknown error."}t.setState({alertType:"danger",alertMessage:a})}).always(function(){t.hideLoading(),t.showAlert()})},onEnter:function(){var e=this,t=$('input[name="status"]'),a=e.state.form;console.log(a.data.status),t.bootstrapSwitch("state",a.data.status,a.data.status),t.on("switchChange.bootstrapSwitch",function(t,o){a.data.status=o,e.setState(a)})},clear:function(){this.setState(this.getInitialState())},clearErrors:function(){var e=this.state.form;e.errors={},this.setState(e)},onChange:function(e){var t=this.state.form;t.data[e.target.name]=e.target.value,this.setState(t)},showLoading:function(){this.setState({loading:!0})},hideLoading:function(){this.setState({loading:!1})},showAlert:function(){this.setState({alertVisible:!0})},hideAlert:function(){this.setState({alertVisible:!1})},setErrors:function(e){var t=this.state.form;t.errors=e,this.setState({form:t})},getError:function(e){for(var t in this.state.form.errors)if(t==e)return this.state.form.errors[e];return null},getValidationState:function(e){return this.getError(e)?"error":null},onCheckboxChange:function(e){var t=this.state.form;t.data[e.target.name]=e.target.checked?1:0,this.setState(t)}});window.GroupEditModal=GroupEditModal;var Modal=ReactBootstrap.Modal,FormGroup=ReactBootstrap.FormGroup,ControlLabel=ReactBootstrap.ControlLabel,FormControl=ReactBootstrap.FormControl,HelpBlock=ReactBootstrap.HelpBlock,GroupPermissionModal=React.createClass({displayName:"GroupPermissionModal",getInitialState:function(){return{loading:!1,selectAllPermission:!1,selectedModule:"",selectedGroup:{},selectedPermission:[],module_list:[],permission_list:[],module_disable:!0,checkState:[]}},reset:function(){this.setState(this.getInitialState)},onEntering:function(){var e=this;e.setState({selectedGroup:e.props.model}),$(e.refs.module).select2({theme:"bootstrap",placeholder:"Select a module",width:"auto",selectOnClose:!0}).on("change",function(){e.loadPermission()})},onEntered:function(){this.loadModule()},onExited:function(){this.reset()},loadModule:function(){var e=this,t=Routing.generate("ajax_select2_group_module",{},!0);$.ajax({url:t,type:"GET",dataType:"json",beforeSend:function(){e.setState({module_disable:!0})}}).done(function(t){console.log(t),e.setState({module_list:t})}).fail(function(e){console.log(e)}).always(function(){e.setState({module_disable:!1})})},loadPermission:function(){var e=this,t=$(e.refs.module).val(),a=e.state.selectedGroup;if(e.setSelectedModule(t),""==t||null==t)return void e.setState({permission_list:[]});var o=Routing.generate("ajax_get_permission_by_module",{groupId:a.id,moduleId:t},!0);$.ajax({url:o,type:"GET",dataType:"json",beforeSend:function(){}}).done(function(t){console.log(t);var a=[],o=[];t.group_permission.map(function(e){a[e.permission.id]=!0,o.push(e.permission.id)}),e.setState({permission_list:t.permission,selectedPermission:o,checkState:a,selectAllPermission:t.permission.length==t.group_permission.length&&0!=t.permission.length}),console.log(t.permission.length)}).fail(function(e){console.log(e)}).always(function(){})},setSelectedModule:function(e){this.setState({selectedModule:e})},setSelectedPermission:function(e){var t=this.state.selectedPermission,a=parseInt(e.target.value),o=t.indexOf(a);this.state.selectAllPermission&&(this.state.selectAllPermission=!this.state.selectAllPermission),this.state.checkState[a]?o>-1&&(this.state.checkState[a]=!1,t.splice(o,1)):-1==o&&(this.state.checkState[a]=!0,t.push(a)),this.setState({selectAllPermission:this.state.permission_list.length==t.length||this.state.selectAllPermission,selectedPermission:t,checkState:this.state.checkState})},toggleSelect:function(){var e=this,t=this.state.selectAllPermission,a=[];if(""!=this.state.selectedModule){var o=!t,s=[];e.state.permission_list.map(function(e){s[e.id]=o}),o?this.state.permission_list.map(function(e){a.push(e.id)}):a=[],this.setState({selectAllPermission:o,selectedPermission:a,checkState:s})}},onSubmit:function(){var e=this,t={group:e.state.selectedGroup.id,permission:e.state.selectedPermission,module:e.state.selectedModule};console.log(t);var a=Routing.generate("ajax_save_group_permission",{},!0);$.ajax({url:a,type:"POST",dataType:"json",data:t,beforeSend:function(){e.setState({loading:!0})}}).done(function(t){console.log(t),e.props.notify(t.message,"teal")}).fail(function(t){console.log(t);var a;switch(t.status){case 403:a=t.responseJSON.message;break;default:a="Unknown error."}e.props.notify(a,"ruby")}).always(function(){e.setState({loading:!1})})},render:function(){var e=this;return React.createElement(Modal,{enforceFocus:!1,show:this.props.show,backdrop:"static",keyboard:!1,onHide:this.props.onHide,onEntering:this.onEntering,onEntered:this.onEntered,onExited:this.onExited},React.createElement("form",{ref:"group_form",onSubmit:this.onSubmit},React.createElement(Modal.Header,{closeButton:!0},React.createElement(Modal.Title,null,React.createElement("strong",null,"Group Permission"))),React.createElement(Modal.Body,null,React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-12"},React.createElement("div",{className:"portlet light bordered"},React.createElement("div",{className:"portlet-title"},React.createElement("div",{className:"caption"},this.state.selectedGroup.groupName," ",React.createElement("small",null,"(",this.state.selectedGroup.groupDesc,")"))),React.createElement("div",{className:"portlet-body"},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-6"},React.createElement("select",{name:"module",ref:"module",className:"form-control",disabled:this.state.module_disable},React.createElement("option",{value:""},"Select module"),this.state.module_list.map(function(e){return React.createElement("option",{key:e.id,value:e.id},e.text)}))),React.createElement("div",{className:"col-md-2"},React.createElement("button",{type:"button",className:"btn btn-sm btn-danger",onClick:e.toggleSelect},e.state.selectAllPermission?"Uncheck All":"Check All"))),React.createElement("br",null),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-5"},""==this.state.selectedModule?React.createElement("h4",null,"Please select module"):null,0==this.state.permission_list.length&&""!=this.state.selectedModule?React.createElement("h4",null,"No permission found"):React.createElement("div",{className:"mt-checkbox-list"},this.state.permission_list.map(function(t,a){return React.createElement("label",{key:t.id,className:"mt-checkbox mt-checkbox-outline"}," ",t.permissionName,React.createElement("input",{type:"checkbox",ref:t.id,checked:e.state.checkState[t.id]||"",value:t.id||"",name:t.id,onChange:e.setSelectedPermission}),React.createElement("span",null))}))))))))),React.createElement(Modal.Footer,null,React.createElement("button",{type:"button",onClick:this.onSubmit,className:"btn btn-primary btn-fill",disabled:this.state.loading||""==this.state.selectedModule},"Save changes ",React.createElement(AppLoading,{loading:this.state.loading})),React.createElement("button",{type:"button",onClick:this.props.onHide,className:"btn btn-default"},"Close"))))}});window.GroupPermissionModal=GroupPermissionModal;var GroupDataTable=React.createClass({displayName:"GroupDataTable",getInitialState:function(){return{showEditModal:!1,showPermissionModal:!1,targetGroup:{}}},componentDidMount:function(){var e=this,t=new Datatable,a=$("#group_table"),o=Routing.generate("ajax_get_group",{},!0);t.init({src:a,dataTable:{bState:!0,autoWidth:!0,deferRender:!0,ajax:{url:o,type:"GET"},columnDefs:[{orderable:!1,targets:[0,2,3,4,5,6]},{searchable:!1,targets:[0,2,3,4,6]},{className:"align-center",targets:[0,2,3,4,5,6]}],order:[],columns:[{data:"id",render:function(e){return'<label class="mt-checkbox mt-checkbox-single mt-checkbox-outline"><input name="id[]" type="checkbox" class="checkboxes" value="'+e+'"/><span></span></label>'}},{data:"groupName"},{data:"accessLevel"},{data:"allowRead",render:function(e){return 1==e?"Yes":"No"}},{data:"allowWrite",render:function(e){return 1==e?"Yes":"No"}},{data:"status"},{render:function(){return"<a href='javascript:;' class='btn btn-xs btn-success group-edit-btn' data-toggle='tooltip' data-title='Edit'><i class='glyphicon glyphicon-edit'></i></a><a href='javascript:;' class='btn btn-xs btn-info group-permission-btn' data-toggle='tooltip' data-title='Permission'><i class='fa fa-shield'></i></a><a href='javascript:;' class='btn btn-xs btn-danger group-delete-btn' data-toggle='tooltip' data-title='Delete'><i class='glyphicon glyphicon-trash'></i></a>"}}]}}),a.find("tbody").on("click",".group-edit-btn",function(a){a.preventDefault(),$(this).blur();var o=t.getDataTable().row($(this).parents("tr")).data();e.edit(o)}),a.find("tbody").on("click",".group-permission-btn",function(a){a.preventDefault(),$(this).blur();var o=t.getDataTable().row($(this).parents("tr")).data();e.permission(o)}),a.find("tbody").on("click",".group-delete-btn",function(a){a.preventDefault(),$(this).blur();var o=t.getDataTable().row($(this).parents("tr")).data();e.delete(o)}),e.grid=t},render:function(){return React.createElement("div",{className:"table-container"},React.createElement("div",{className:"table-actions-wrapper"},React.createElement("span",null," ")),React.createElement("table",{id:"group_table",className:"table table-striped table-bordered table-checkable",width:"100%"},React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",{width:"2%"},React.createElement("label",{className:"mt-checkbox mt-checkbox-single mt-checkbox-outline"},React.createElement("input",{type:"checkbox",className:"group-checkable"}),React.createElement("span",null))),React.createElement("th",null,"Group Name"),React.createElement("th",{className:"text-center"},"Access Level "),React.createElement("th",{className:"text-center"},"Allow Read "),React.createElement("th",{className:"text-center"},"Allow Write "),React.createElement("th",{width:"12%"},"Status"),React.createElement("th",{className:"center",width:"10%"},"Action")),React.createElement("tr",{role:"row",className:"filter"},React.createElement("td",null," "),React.createElement("td",null,React.createElement("input",{type:"text",className:"form-control form-filter input-sm",name:"group_name"})," "),React.createElement("td",null),React.createElement("td",null),React.createElement("td",null),React.createElement("td",null,React.createElement("select",{name:"status",className:"form-control form-filter input-sm"},React.createElement("option",{value:""},"Select..."),React.createElement("option",{value:"1"},"Active"),React.createElement("option",{value:"0"},"Inactive"))),React.createElement("td",null,React.createElement("button",{className:"btn btn-sm green btn-outline filter-submit margin-bottom"},React.createElement("i",{className:"fa fa-search"})," Search")))),React.createElement("tbody",null)),React.createElement(GroupPermissionModal,{model:this.state.targetGroup,show:this.state.showPermissionModal,onHide:this.closePermissionModal,notify:this.props.notify}),React.createElement(GroupEditModal,{onSuccess:this.reload,model:this.state.targetGroup,show:this.state.showEditModal,onHide:this.closeEditModal}))},openEditModal:function(){this.setState({showEditModal:!0})},closeEditModal:function(){this.setState({showEditModal:!1})},openPermissionModal:function(){this.setState({showPermissionModal:!0})},closePermissionModal:function(){this.setState({showPermissionModal:!1})},setTargetGroup:function(e){this.setState({targetGroup:e})},unsetTargetGroup:function(){this.setState({targetGroup:{}})},permission:function(e){this.setTargetGroup(e),this.openPermissionModal()},edit:function(e){this.setTargetGroup(e),this.openEditModal()},delete:function(e){var t=this,a=Routing.generate("ajax_delete_group",{},!0);bootbox.dialog({title:"<strong><i class='fa fa-warning'></i> Warning</strong>",message:"<strong>Are you sure you want to remove this?</strong>",buttons:{cancel:{label:"Cancel",className:"btn-default "},confirm:{label:"Yes, Delete",className:"btn-danger",callback:function(){$.ajax({url:a+"?id="+e.id,type:"DELETE",beforeSend:function(){$.enable_loading("processing")}}).done(function(e){t.reload(),t.props.notify(e.message,"teal")}).fail(function(e){console.log(e);var a="";switch(e.status){case 403:case 404:a=e.responseJSON.message;break;default:a="Something went wrong while processing your request in the server. Please try again."}t.props.notify(a,"ruby")}).always(function(){$.disable_loading("processing")})}}}})},batchDelete:function(){var e=this,t=e.grid.getSelectedRowsCount(),a=e.grid.getSelectedRows();if(0==t)return bootbox.alert("<strong>Please select an item(s) you want to remove!</strong>"),!1;var o=t>1?t+" items":t+" item";bootbox.dialog({title:"<strong><i class='fa fa-warning'></i> Warning</strong>",message:"<strong>You have selected "+o+". Are you sure you want to remove?</strong>",buttons:{cancel:{label:"Cancel",className:"btn-default "},confirm:{label:"Yes, Delete",className:"btn-danger",callback:function(){var t=Routing.generate("ajax_batch_delete_group",{},!0);$.ajax({url:t,type:"DELETE",data:{id:a},beforeSend:function(){$.enable_loading("processing")}}).done(function(t){e.reload(),e.props.notify(t.message,"teal")}).fail(function(t){var a="";switch(t.status){case 403:case 404:a=t.responseJSON.message;break;default:a="Something went wrong while processing your request in the server. Please try again."}e.props.notify(a,"ruby")}).always(function(){$.disable_loading("processing")})}}}}),console.log(this.grid.getSelectedRowsCount())},reload:function(){this.grid.getDataTable().ajax.reload()},getSelectedRowsCount:function(){return this.grid.getSelectedRowsCount()}});window.GroupDataTable=GroupDataTable;var GroupSection=React.createClass({displayName:"GroupSection",getInitialState:function(){return{showCreateModal:!1}},render:function(){return React.createElement("div",{className:"portlet light portlet-fit portlet-datatable bordered"},React.createElement("div",{className:"portlet-title"},React.createElement("div",{className:"caption"},React.createElement("i",{className:"icon-grid font-grey-gallery"}),React.createElement("span",{className:"caption-subject font-grey-gallery"},"Group List")),React.createElement("div",{className:"actions"},React.createElement("a",{href:"javascript:;",className:"btn btn-primary btn-sm",onClick:this.openCreateModal,style:{marginRight:"5px"}},React.createElement("i",{className:"fa fa-plus"})," Create new"),React.createElement("a",{href:"javascript:;",className:"btn btn-danger btn-sm",onClick:this.batchDelete},React.createElement("i",{className:"fa fa-trash"})," Delete selected item"))),React.createElement(GroupCreateModal,{show:this.state.showCreateModal,onHide:this.closeCreateModal,onSuccess:this.reloadTable}),React.createElement("div",{className:"portlet-body"},React.createElement(GroupDataTable,{ref:"GroupDataTable",notify:this.notify})))},openCreateModal:function(){this.setState({showCreateModal:!0})},closeCreateModal:function(){this.setState({showCreateModal:!1})},batchDelete:function(){this.refs.GroupDataTable.batchDelete()},reloadTable:function(){this.refs.GroupDataTable.reload()},notify:function(e,t){$.notific8("zindex",11500),$.notific8(e,{heading:"System Message",color:t,life:5e3,verticalEdge:"right",horizontalEdge:"bottom"})}});window.GroupSection=GroupSection,ReactDOM.render(React.createElement(GroupSection,null),document.getElementById("group_section"));