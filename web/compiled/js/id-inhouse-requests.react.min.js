var Modal=ReactBootstrap.Modal,Tab=ReactBootstrap.Tab,Tabs=ReactBootstrap.Tabs,Nav=ReactBootstrap.Nav,NavItem=ReactBootstrap.NavItem,VoterCropModal=React.createClass({displayName:"VoterCropModal",getInitialState:function(){return{imageCropper:null}},render:function(){var e=window.imgUrl+this.props.proId+"_"+this.props.proIdCode+"?"+(new Date).getTime();return React.createElement(Modal,{keyboard:!1,enforceFocus:!1,backdrop:"static",show:this.props.show,onHide:this.props.onHide},React.createElement(Modal.Header,{className:"modal-header bg-blue-dark font-white",closeButton:!0},React.createElement(Modal.Title,null,"Crop Photo")),React.createElement(Modal.Body,{bsClass:"modal-body overflow-auto"},React.createElement("div",null,React.createElement("img",{id:"original_image",style:{maxWidth:"100%"},src:e})),React.createElement("div",{className:"col-md-12 text-right",style:{marginTop:"15px"}},React.createElement("button",{className:"btn btn-sm btn-primary",onClick:this.saveImage,style:{marginRight:"10px"}},"Crop Selected Area"),React.createElement("button",{className:"btn btn-sm btn-default",onClick:this.props.onHide},"Close "))))},componentDidMount:function(){this.initCropper()},initCropper:function(){var e=document.getElementById("original_image"),t=!1,a=new Cropper(e,{aspectRatio:.8,autoCropArea:.65,viewMode:1,ready:function(){t=!0}});this.imageCropper=a},saveImage:function(){console.log("saving image");var e=this;this.imageCropper.getCroppedCanvas().toBlob(function(t){console.log("blob data"),console.log(t);var a=new FormData;a.append("files[]",t,"profile_photo.jpg"),$.ajax(Routing.generate("ajax_upload_project_voter_photo",{proId:e.props.proId,voterId:e.props.voterId}),{method:"POST",data:a,processData:!1,contentType:!1}).done(function(t){e.props.onSuccess(),e.props.onHide()}).fail(function(e){console.log("something went wrong")})})}});window.VoterCropModal=VoterCropModal;var Modal=ReactBootstrap.Modal,FormGroup=ReactBootstrap.FormGroup,HelpBlock=ReactBootstrap.HelpBlock,ControlLabel=ReactBootstrap.ControlLabel,FormControl=ReactBootstrap.FormControl,VoterEditModal=React.createClass({displayName:"VoterEditModal",getInitialState:function(){return{form:{data:{category:"",cellphone:"",organization:"",voterGroup:""},errors:[]},voter:{status:"I"},showCropModal:!1}},componentDidMount:function(){this.loadVoter(this.props.proId,this.props.voterId),this.initSelect2(),this.initUploader()},loadVoter:function(e,t){var a=this;a.requestVoter=$.ajax({url:Routing.generate("ajax_get_project_voter",{voterId:t,proId:e}),type:"GET"}).done(function(e){var t=a.state.form;t.data.cellphone=e.cellphoneNo,t.data.category=e.category,t.data.organization=e.organization,t.data.voterGroup=e.voterGroup,t.data.proIdCode=e.proIdCode,t.data.assignedPrecinct=e.assignedPrecinct,t.data.remarks=e.remarks,t.data.status=e.status,a.setState({form:t,voter:e},a.reinitSelect2)})},initSelect2:function(){$("#voter-group-select2").select2({casesentitive:!1,placeholder:"Enter Group",width:"100%",allowClear:!0,tags:!0,containerCssClass:":all:",createTag:function(e){return{id:e.term,text:e.term,newOption:!0}},ajax:{url:Routing.generate("ajax_select2_voter_group"),data:function(e){return{searchText:e.term}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.voter_group,text:e.voter_group}})}}}});var e=this;$("#voter-group-select2").on("change",function(){e.setFieldValue("voterGroup",$(this).val())})},reinitSelect2:function(){var e=this.state.form.data.voterGroup;$("#voter-group-select2").empty().append($("<option />").val(e).text(e)).trigger("change")},initUploader:function(){var e=this;$("#voter-photo-upload").fileupload({dataType:"json",done:function(t,a){$.each(a.result.files,function(e,t){$("<p/>").text(t.name).appendTo(document.body)}),e.refresh(),e.openCropModal()},progressall:function(e,t){parseInt(t.loaded/t.total*100,10)}})},openCropModal:function(){this.setState({showCropModal:!0})},closeCropModal:function(){this.setState({showCropModal:!1})},generateIdNo:function(){},resetId:function(){var e=this;e.requestVoter=$.ajax({url:Routing.generate("ajax_get_project_voter_reset_id",{voterId:e.props.voterId,proId:e.props.proId}),type:"GET"}).done(function(t){alert("You can now re-print this member ID"),e.refresh()})},refresh:function(){this.loadVoter(this.props.proId,this.props.voterId)},setFormProp:function(e){var t=this.state.form;t.data[e.target.name]=e.target.value,this.setState({form:t})},setFieldValue:function(e,t){var a=this.state.form;a.data[e]=t,this.setState({form:a})},setErrors:function(e){var t=this.state.form;t.errors=e,this.setState({form:t})},getError:function(e){var t=this.state.form.errors;for(var a in t)if(a==e)return t[e];return null},getValidationState:function(e){return null!=this.getError(e)?"error":""},isEmpty:function(e){return null==e||""==e},submit:function(e){e.preventDefault();var t=this,a=t.state.form.data;a.proId=this.props.proId,t.requestPost=$.ajax({url:Routing.generate("ajax_patch_project_voter",{voterId:this.props.voterId,proId:this.props.proId}),type:"PATCH",data:a}).done(function(e){t.props.notify("Record has been updated.","ruby"),t.props.onHide()}).fail(function(e){"401"==e.status?t.props.notify("You dont have the permission to update this record.","ruby"):t.props.notify("Form Validation Failed.","ruby"),t.setErrors(e.responseJSON)})},render:function(){if(!this.isEmpty(this.state.voter))var e=window.imgUrl+this.props.proId+"_"+this.state.voter.proIdCode+"?"+(new Date).getTime();return React.createElement(Modal,{keyboard:!1,enforceFocus:!1,bsSize:"lg",backdrop:"static",show:this.props.show,onHide:this.props.onHide},React.createElement(Modal.Header,{className:"modal-header bg-blue-dark font-white",closeButton:!0},React.createElement(Modal.Title,null,"Update Form")),React.createElement(Modal.Body,{bsClass:"modal-body overflow-auto"},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-4"},React.createElement("div",{onClick:this.openCropModal},React.createElement("img",{src:e,className:"img-responsive",alt:""})),this.state.showCropModal&&React.createElement(VoterCropModal,{proId:this.props.proId,voterId:this.props.voterId,proIdCode:this.state.voter.proIdCode,show:this.state.showCropModal,onHide:this.closeCropModal,onSuccess:this.refresh}),React.createElement("div",{className:"profile-userbuttons",style:{marginTop:"10px"}},React.createElement("span",{className:"btn col-md-12 green btn-sm fileinput-button "},React.createElement("span",null," Change Photo"),React.createElement("input",{id:"voter-photo-upload",type:"file",name:"files[]","data-url":Routing.generate("ajax_upload_project_voter_photo",{proId:this.props.proId,voterId:this.props.voterId}),multiple:!1}))),!this.isEmpty(this.state.voter)&&this.isEmpty(this.state.voter.proIdCode)&&React.createElement("div",null,React.createElement("button",{className:"btn btn-primary btn-sm col-md-12",onClick:this.generateIdNo,style:{marginTop:"10px"}},"Generate ID No")),!this.isEmpty(this.state.voter)&&this.state.voter.hasId&&React.createElement("div",null,React.createElement("button",{className:"btn btn-info btn-sm col-md-12",onClick:this.resetId,style:{marginTop:"10px"}},"Reprint ID")),!this.isEmpty(this.state.voter)&&React.createElement("div",{style:{marginTop:"90px"}},React.createElement("div",null,React.createElement("small",null,React.createElement("strong",null,"Name : ")," ",this.state.voter.voterName," ")),React.createElement("div",null,React.createElement("small",null,React.createElement("strong",null,"Municipality :")," ",this.state.voter.municipalityName)),React.createElement("div",null,React.createElement("small",null,React.createElement("strong",null,"Barangay :")," ",this.state.voter.barangayName)))),React.createElement("div",{className:"col-md-8"},React.createElement("form",{id:"voter-updated-form"},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-12"},React.createElement("div",{className:"col-md-6"},React.createElement(FormGroup,{controlId:"formProIdCode",validationState:this.getValidationState("proIdCode")},React.createElement(ControlLabel,null," ID No : "),React.createElement(FormControl,{bsClass:"form-control input-sm",name:"proIdCode",value:this.state.form.data.proIdCode,onChange:this.setFormProp}),React.createElement(HelpBlock,null,this.getError("proIdCode")))),React.createElement("div",{className:"col-md-6"},React.createElement(FormGroup,{controlId:"formStatus",validationState:this.getValidationState("status")},React.createElement(ControlLabel,null," Status : "),React.createElement(FormControl,{componentClass:"select",bsClass:"form-control input-sm",name:"status",value:this.state.form.data.status,onChange:this.setFormProp},React.createElement("option",{value:""}," -- Select Status --"),React.createElement("option",{value:"A"},"Active"),React.createElement("option",{value:"I"},"Inactive"),React.createElement("option",{value:"B"},"Blocked")),React.createElement(HelpBlock,null,this.getError("status")))))),React.createElement("div",{className:"clearfix"}),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-12"},React.createElement("div",{className:"col-md-6"},React.createElement(FormGroup,{controlId:"formVoterGroup",validationState:this.getValidationState("voterGroup")},React.createElement(ControlLabel,null,"Position : "),React.createElement("select",{id:"voter-group-select2",className:"form-control input-sm"},React.createElement("option",{value:""}," ")),React.createElement(HelpBlock,null,this.getError("voterGroup")))),React.createElement("div",{className:"col-md-6"},React.createElement(FormGroup,{controlId:"formCellphone",validationState:this.getValidationState("cellphone")},React.createElement(ControlLabel,null," Cellphone : "),React.createElement(FormControl,{bsClass:"form-control input-sm",name:"cellphone",value:this.state.form.data.cellphone,onChange:this.setFormProp}),React.createElement(HelpBlock,null,this.getError("cellphone")))))),React.createElement("div",{className:"clearfix"}),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-12"},React.createElement("div",{className:"col-md-12"},React.createElement(FormGroup,{controlId:"formRemarks",validationState:this.getValidationState("remarks")},React.createElement(ControlLabel,null," Remarks : "),React.createElement(FormControl,{componentClass:"textarea",rows:"5",bsClass:"form-control input-sm",name:"remarks",value:this.state.form.data.remarks,onChange:this.setFormProp}),React.createElement(HelpBlock,null,this.getError("remarks")))))),React.createElement("div",{className:"text-right col-md-12"},React.createElement("button",{type:"button",className:"btn btn-default",style:{marginRight:"5px"},onClick:this.props.onHide},"Close"),React.createElement("button",{type:"button",className:"btn blue-madison",disabled:"I"==this.state.voter.status||"B"==this.state.voter.status,onClick:this.submit},"A"==this.state.voter.status?"Submit":"Update not Allowed... Voter either blocked or deactivated."," ")))))))}});window.VoterEditModal=VoterEditModal;var FormGroup=ReactBootstrap.FormGroup,HelpBlock=ReactBootstrap.HelpBlock,ControlLabel=ReactBootstrap.ControlLabel,FormControl=ReactBootstrap.FormControl,IdInhouseRequestVoterProfile=React.createClass({displayName:"IdInhouseRequestVoterProfile",getInitialState:function(){return{form:{data:{voterId:null,proVoterId:null,proIdCode:"",cellphoneNo:""},errors:[]},voter:null,showCropModal:!1}},componentDidMount:function(){console.log("voter profile did load"),this.loadVoter(this.props.proId,this.props.voterId),this.initSelect2()},render:function(){var e=window.imgUrl+this.props.proId+"_"+this.state.form.data.proIdCode+"?"+(new Date).getTime(),t=Routing.generate("ajax_upload_project_voter_photo",{proId:this.props.proId,voterId:this.state.form.data.voterId})+"?"+(new Date).getTime();return React.createElement("form",{id:"id_inhouse_request_voter_profile",onSubmit:this.submit},React.createElement("div",{className:"col-md-4"},React.createElement("div",{onClick:this.openCropModal},React.createElement("img",{src:e,className:"img-responsive",alt:""})),this.state.showCropModal&&React.createElement(VoterCropModal,{proId:this.props.proId,voterId:this.state.voter.voterId,proIdCode:this.state.voter.proIdCode,show:this.state.showCropModal,onHide:this.closeCropModal,onSuccess:this.refresh}),React.createElement("div",{className:"profile-userbuttons",style:{marginTop:"10px"}},React.createElement("span",{className:"btn col-md-12 green btn-sm fileinput-button "},React.createElement("span",null," Change Photo"),React.createElement("input",{id:"voter-photo-upload",type:"file",name:"files[]","data-url":t,multiple:!1})))),React.createElement("div",{className:"col-md-8",style:{paddingLeft:"0"}},React.createElement(FormGroup,{controlId:"formCellphoneNo",validationState:this.getValidationState("cellphoneNo")},React.createElement(ControlLabel,null," CellphoneNo : "),React.createElement("input",{type:"text",placeholder:"Example : 09283182013",value:this.state.form.data.cellphoneNo,className:"input-sm form-control",onChange:this.setFormProp,name:"cellphoneNo"}),React.createElement(HelpBlock,null,this.getError("cellphoneNo"))),React.createElement(FormGroup,{controlId:"formVoterGroup",validationState:this.getValidationState("voterGroup")},React.createElement(ControlLabel,null,"Position : "),React.createElement("select",{id:"voter-group-select2",className:"form-control input-sm"},React.createElement("option",{value:""}," ")),React.createElement(HelpBlock,null,this.getError("voterGroup"))),React.createElement(FormGroup,{controlId:"formRemarks",validationState:this.getValidationState("remarks")},React.createElement(ControlLabel,null," Remarks : "),React.createElement("textarea",{rows:"5",value:this.state.form.data.remarks,className:"input-sm form-control",onChange:this.setFormProp,name:"remarks"}),React.createElement(HelpBlock,null,this.getError("remarks"))),React.createElement(HelpBlock,null,this.getError("voterId")),React.createElement("div",{className:"text-right"},React.createElement("button",{className:"btn btn-default btn-md ",style:{marginRight:"15px",width:"150px"},type:"button",onClick:this.props.reset}," Reset "),React.createElement("button",{className:"btn btn-primary btn-md ",style:{width:"250px"},disabled:this.isEmpty(this.state.form.data.voterId),type:"submit"}," Submit "))))},initSelect2:function(){var e=this;$("#id_inhouse_request_voter_profile #voter-group-select2").select2({casesentitive:!1,placeholder:"Enter Group",width:"100%",allowClear:!0,tags:!0,containerCssClass:":all:",createTag:function(e){return{id:e.term,text:e.term,newOption:!0}},ajax:{url:Routing.generate("ajax_select2_voter_group"),data:function(e){return{searchText:e.term}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.voter_group,text:e.voter_group}})}}}}),$("#id_inhouse_request_voter_profile #voter-group-select2").on("change",function(){e.setFormPropValue("voterGroup",$(this).val())})},loadVoter:function(e,t){var a=this;console.log("loading voter"),a.requestVoter=$.ajax({url:Routing.generate("ajax_get_project_voter",{proId:e,voterId:t}),type:"GET"}).done(function(e){var t=a.state.form;console.log("voter has been loaded"),t.data.municipalityNo=e.municipalityNo,t.data.brgyNo=e.brgyNo,t.data.voterId=e.voterId,t.data.proVoterId=e.proVoterId,t.data.proIdCode=e.proIdCode,t.data.cellphoneNo=a.isEmpty(e.cellphoneNo)?"":e.cellphoneNo,t.data.precinctNo=e.precinctNo,t.data.assignedPrecinct=a.isEmpty(e.assignedPrecinct)?e.precinctNo:e.assignedPrecinct,t.data.voterGroup=a.isEmpty(e.voterGroup)?"KCL3":e.voterGroup,t.data.remarks=a.isEmpty(e.remarks)?"":e.remarks,$("#voter-group-select2").empty().append($("<option/>").val(t.data.voterGroup).text(t.data.voterGroup)).trigger("change"),a.setState({form:t,voter:e},a.initUploader)})},initUploader:function(){var e=this;$("#inhouse_id_request_item_form #voter-photo-upload").fileupload({dataType:"json",done:function(t,a){$.each(a.result.files,function(e,t){$("<p/>").text(t.name).appendTo(document.body)}),e.refresh()},progressall:function(e,t){parseInt(t.loaded/t.total*100,10)}})},openCropModal:function(){this.setState({showCropModal:!0})},closeCropModal:function(){this.setState({showCropModal:!1})},setFormPropValue:function(e,t){var a=this.state.form;a.data[e]=t,this.setState({form:a})},setFormProp:function(e){var t=this.state.form;t.data[e.target.name]=e.target.value,this.setState({form:t})},setErrors:function(e){var t=this.state.form;t.errors=e,this.setState({form:t})},getError:function(e){var t=this.state.form.errors;for(var a in t)if(a==e)return t[e];return null},getValidationState:function(e){return null!=this.getError(e)?"error":""},isEmpty:function(e){return null==e||""==e},refresh:function(){this.loadVoter(this.props.proId,this.state.voter.voterId)},submit:function(e){e.preventDefault();var t=this,a=t.state.form.data;a.hdrId=t.props.hdrId,t.requestPost=$.ajax({url:Routing.generate("ajax_post_id_request_detail"),data:a,type:"POST"}).done(function(e){t.props.reset()}).fail(function(e){t.setErrors(e.responseJSON)})}});window.IdInhouseRequestVoterProfile=IdInhouseRequestVoterProfile;var IdInhouseRequestDetailDatatable=React.createClass({displayName:"IdInhouseRequestDetailDatatable",getInitialState:function(){return{showEditModal:!1,target:null,typingTimer:null,doneTypingInterval:1500}},componentDidMount:function(){this.initGrid()},initGrid:function(){var e=new Datatable,t=this;e.init({src:$("#id_inhouse_request_detail_datatable"),dataTable:{ordering:!1,serverSide:!0,processing:!0,searching:!1,deferRender:!0,autoWidth:!1,dom:'<"top"fpli>rt<"bottom"pli><"clear">',searchDelay:2e3,language:{processing:'<i class="fa fa-spinner fa-pulse fa-fw"></i><span > Loading...</span>.'},lengthMenu:[[10,20,50,100,150],[10,20,50,100,150]],pageLength:10,ajax:{url:Routing.generate("ajax_get_id_request_detail_datatable"),type:"GET",data:function(e){e.hdrId=t.props.hdrId,e.voterName=$('#id_inhouse_request_detail_datatable input[name="voterName"]').val(),e.barangayName=$('#id_inhouse_request_detail_datatable input[name="barangayName"]').val(),e.hasPhoto=$('#id_inhouse_request_detail_datatable select[name="hasPhotoFilter"]').val(),e.hasId=$('#id_inhouse_request_detail_datatable select[name="hasIdFilter"]').val(),e.status=$('#id_inhouse_request_detail_datatable select[name="statusFilter"]').val()}},columns:[{data:null,className:"text-center",width:30,render:function(e,t,a,o){return o.settings._iDisplayStart+o.row+1}},{data:"voter_name",className:"text-center",render:function(e,a,o){return'<img src="'+(window.imgUrl+t.props.proId)+"_"+o.pro_id_code+"?"+(new Date).getTime()+'" style="width:180px;height:auto;"/><strong style="margin-top:10px;"><br/>'+e+"</strong>"}},{data:"barangay_name",width:100},{data:"voter_group",width:50,className:"text-center"},{data:"has_photo",width:30,className:"text-center",render:function(e){return 1==parseInt(e)?"DONE":"PEN"}},{data:"has_id",width:30,className:"text-center",render:function(e){return 1==parseInt(e)?"DONE":"PEN"}},{data:"status",width:40,className:"text-center",render:function(e){var t="";switch(e){case"A":t="ACTIVE";break;case"R":t="RELEASED";break;default:t="INVALID"}return t}},{data:"created_at",className:"text-center",width:150,render:function(e){return moment(e).format("MMM DD, YYYY hh:mm A")}},{data:"created_by",className:"text-center",width:80},{width:120,className:"text-center",render:function(e,t,a){return'<button class="btn btn-xs edit-btn btn-primary"> Edit </button><button class="btn btn-xs delete-btn btn-danger"> Remove </button>'}}]}}),$("#id_inhouse_request_detail_datatable tbody").on("click",".edit-btn",function(){var a=e.getDataTable().row($(this).parents("tr")).data();t.openEditModal(a.voter_id)}),$("#id_inhouse_request_detail_datatable tbody").on("click",".delete-btn",function(){var a=e.getDataTable().row($(this).parents("tr")).data();t.remove(a.dtl_id)}),t.grid=e},openEditModal:function(e){this.setState({showEditModal:!0,target:e})},closeEditModal:function(){this.setState({showEditModal:!1,target:null})},remove:function(e){var t=this;confirm("Are you sure you want to remove this item?")&&(t.requestDelete=$.ajax({url:Routing.generate("ajax_delete_id_request_detail",{dtlId:e}),type:"DELETE"}).done(function(e){t.reload()}))},handleFilterChange:function(){var e=this;clearTimeout(this.state.typingTimer),this.state.typingTimer=setTimeout(function(){e.reload()},this.state.doneTypingInterval)},reload:function(){this.grid.getDataTable().ajax.reload()},render:function(){return React.createElement("div",null,this.state.showEditModal&&React.createElement(VoterEditModal,{show:this.state.showEditModal,onHide:this.closeEditModal,notify:this.props.notify,voterId:this.state.target,proId:this.props.proId}),React.createElement("table",{id:"id_inhouse_request_detail_datatable",className:"table table-bordered"},React.createElement("thead",null,React.createElement("tr",{className:"text-center"},React.createElement("td",null,"#"),React.createElement("td",null,"Voter Name"),React.createElement("td",null,"Barangay"),React.createElement("td",null,"Position"),React.createElement("td",null,"Photo"),React.createElement("td",null,"ID"),React.createElement("td",null,"Created At"),React.createElement("td",null,"By"),React.createElement("td",null,"Status"),React.createElement("td",null)),React.createElement("tr",null,React.createElement("td",null),React.createElement("td",null,React.createElement("input",{type:"text",className:"form-control form-filter input-sm",name:"voterName"})),React.createElement("td",null,React.createElement("input",{type:"text",className:"form-control form-filter input-sm",name:"barangayName"})),React.createElement("td",null),React.createElement("td",null,React.createElement("select",{name:"hasPhotoFilter",className:"input-sm",style:{marginTop:"2px"}},React.createElement("option",{value:""},"All"),React.createElement("option",{value:"1"},"Yes"),React.createElement("option",{value:"0"},"No"))),React.createElement("td",null,React.createElement("select",{name:"hasIdFilter",className:"input-sm",style:{marginTop:"2px"}},React.createElement("option",{value:""},"All"),React.createElement("option",{value:"1"},"Yes"),React.createElement("option",{value:"0"},"No"))),React.createElement("td",null,React.createElement("select",{name:"statusFilter",className:"input-sm",style:{marginTop:"2px"}},React.createElement("option",{value:""},"All"),React.createElement("option",{value:"A"},"Active"),React.createElement("option",{value:"R"},"Released"))),React.createElement("td",null),React.createElement("td",null),React.createElement("td",{className:"text-right"},React.createElement("button",{className:"btn btn-xs green btn-outline filter-submit"},React.createElement("i",{className:"fa fa-search"}),"Search")))),React.createElement("tbody",null)))}});window.IdInhouseRequestDetailDatatable=IdInhouseRequestDetailDatatable;var Modal=ReactBootstrap.Modal,FormGroup=ReactBootstrap.FormGroup,HelpBlock=ReactBootstrap.HelpBlock,ControlLabel=ReactBootstrap.ControlLabel,FormControl=ReactBootstrap.FormControl,IdInhouseRequestPrintModal=React.createClass({displayName:"IdInhouseRequestPrintModal",getInitialState:function(){return{unselected:[],options:[],form:{data:{projectVoters:[]},errors:[]},isLoading:!1,progressValue:0,header:null}},componentDidMount:function(){this.initComponents(),this.loadProjectVoters(),this.loadHeader(this.props.hdrId)},loadProjectVoters:function(){var e=this;e.requestProjectVoters=$.ajax({url:Routing.generate("ajax_get_id_request_for_release",{hdrId:this.props.hdrId}),type:"GET"}).done(function(t){e.setState({options:t,unselected:t}),setTimeout(e.refreshSelectBox,2e3)})},loadHeader:function(e){var t=this;t.requestHeader=$.ajax({url:Routing.generate("ajax_get_id_request_header",{hdrId:e}),type:"GET"}).done(function(e){console.log(e),t.setState({header:e})}).fail(function(e){console.log("failed to get the header")})},componentWillUnmount:function(){this.isEmpty(this.requestProjectVoters)||this.requestProjectVoters.abort()},initComponents:function(){this.initMultiSelect()},initMultiSelect:function(){var e=this,t=this.refs.selectBox;$(t).multiSelect({selectableOptgroup:!0,selectableHeader:"<input placeholder='Enter Name' type='text' class='form-control' autocomplete='off' style='text-transform:uppercase;margin-bottom:5px;'>",selectionHeader:"<input placeholder='Enter Name' type='text' class='form-control' autocomplete='off' style='text-transform:uppercase;margin-bottom:5px;'>",afterInit:function(e){var t=this,a=t.$selectableUl.prev(),o=t.$selectionUl.prev(),r="#"+t.$container.attr("id")+" .ms-elem-selectable:not(.ms-selected)",n="#"+t.$container.attr("id")+" .ms-elem-selection.ms-selected";t.qs1=a.quicksearch(r).on("keydown",function(e){if(40===e.which)return t.$selectableUl.focus(),!1}),t.qs2=o.quicksearch(n).on("keydown",function(e){if(40==e.which)return t.$selectionUl.focus(),!1})},afterSelect:function(t){this.qs1.cache(),this.qs2.cache(),e.setProjectVoters($(e.refs.selectBox).val())},afterDeselect:function(t){this.qs1.cache(),this.qs2.cache(),e.setProjectVoters($(e.refs.selectBox).val())},cssClass:"fluid-size"})},refreshSelectBox:function(){$(this.refs.selectBox).multiSelect("refresh")},deselectAll:function(){$(this.refs.selectBox).multiSelect("deselect_all")},selectAll:function(){$(this.refs.selectBox).multiSelect("select_all")},setProjectVoters:function(e){var t=this.state.form,a=[];null!=e?(t.data.projectVoters=e,a=this.state.options.filter(function(t){return-1==e.indexOf(t.pro_voter_id)})):(t.data.projectVoters=[],a=this.state.options),this.setState({form:t,unselected:a})},setFormProp:function(e){var t=this.state.form;t.data[e.target.name]=e.target.value,this.setState({form:t})},setErrors:function(e){var t=this.state.form;t.errors=e,this.setState({form:t})},getError:function(e){var t=this.state.form.errors;for(var a in t)if(a==e)return t[e];return null},getValidationState:function(e){return null!=this.getError(e)?"error":null},submit:function(e){e.preventDefault();var t=this,a=t.state.form.data;a.profiles=a.projectVoters,a.printOrigin="INHOUSE",a.printDesc=t.state.header.submittedBy+" - "+moment(new Date(t.state.header.submittedAt)).format("MMM DD, YYYY"),a.originId=t.props.hdrId,t.requestPostUpdate=$.ajax({url:Routing.generate("ajax_post_project_print",{proId:this.props.proId}),type:"POST",data:a}).done(function(e){t.props.notify("Items has been released...","ruby"),t.props.onHide(),t.showKfcPrintout(e.printId)}).fail(function(e){t.props.notify("Opps!","ruby"),t.setErrors(e.responseJSON)}).always(function(){t.setState({isLoading:!1,progressValue:0})}),t.setState({isLoading:!0,progressValue:0})},showKfcPrintout:function(e){var t="http://"+window.hostIp+":8100/voter-report/web/voter/id-template/index.php?print_id="+e;this.popupCenter(t,"ID Group Template",900,600)},popupCenter:function(e,t,a,o){var r=void 0!=window.screenLeft?window.screenLeft:screen.left,n=void 0!=window.screenTop?window.screenTop:screen.top,l=0,s=0;l=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,s=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height;var i=l/2-a/2+r,c=s/2-o/2+n,d=window.open(e,t,"scrollbars=yes, width="+a+", height="+o+", top="+c+", left="+i);window.focus&&d.focus()},isEmpty:function(e){return null==e||""==e},render:function(){return React.createElement(Modal,{enforceFocus:!1,backdrop:"static",dialogClassName:"modal-custom-85",show:this.props.show,onHide:this.props.onHide},React.createElement(Modal.Header,{closeButton:!0},React.createElement(Modal.Title,null,"ID Printing Form")),React.createElement(Modal.Body,{bsClass:"modal-body overflow-auto"},React.createElement("form",{onSubmit:this.submit},React.createElement("div",{className:"text-right"},React.createElement("button",{type:"button",onClick:this.deselectAll,className:"btn btn-xs btn-default",style:{marginRight:"5px"}},"Deselect All"),React.createElement("button",{type:"button",onClick:this.selectAll,className:"btn btn-xs btn-success"},"Select All")),React.createElement("div",{className:"clearfix"}),React.createElement("div",{className:"col-md-6 remove-padding"},React.createElement("div",{style:{marginLeft:"-15px"}},React.createElement("strong",null,"Available :")," ",this.state.unselected.length)),React.createElement("div",{className:"col-md-6 "},React.createElement("div",{style:{marginLeft:"30px"}},React.createElement("strong",null,"Selected : ")," ",this.state.form.data.projectVoters.length)),React.createElement(FormGroup,{controlId:"formProjectVoters",validationState:this.getValidationState("projectVoters")},React.createElement("select",{multiple:!0,ref:"selectBox",className:"searchable",id:"voters_multiselect",name:"projectVoters[]"},this.state.options.map(function(e){return React.createElement("option",{key:e.dtl_id,value:e.pro_voter_id},e.voter_name," / ",e.barangay_name," (",moment(e.updated_at).format("MMM DD, YYYY hh:mm A"),")")})),React.createElement("div",{className:"text-right"},React.createElement(HelpBlock,null,this.getError("projectVoters")))),React.createElement("div",{className:"clearfix"}),React.createElement("div",{className:"text-right m-t-md"},React.createElement("button",{type:"button",className:"btn btn-default",style:{marginRight:"10px"},onClick:this.props.onHide},"Cancel"),React.createElement("button",{type:"submit",className:"btn btn-primary"},"Submit")))))}});window.IdInhouseRequestPrintModal=IdInhouseRequestPrintModal;var Modal=ReactBootstrap.Modal,FormGroup=ReactBootstrap.FormGroup,HelpBlock=ReactBootstrap.HelpBlock,ControlLabel=ReactBootstrap.ControlLabel,FormControl=ReactBootstrap.FormControl,IdInhouseRequestItemModal=React.createClass({displayName:"IdInhouseRequestItemModal",getInitialState:function(){return{voterId:null}},render:function(){var e=this;return React.createElement(Modal,{style:{marginTop:"10px"},keyboard:!1,bsSize:"lg",enforceFocus:!1,backdrop:"static",show:this.props.show,onHide:this.props.onHide},React.createElement(Modal.Header,{className:"modal-header bg-blue-dark font-white",closeButton:!0},React.createElement(Modal.Title,null,"Form")),React.createElement(Modal.Body,{bsClass:"modal-body overflow-auto"},React.createElement("div",{id:"inhouse_id_request_item_form"},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-12"},React.createElement("div",{className:"col-md-4"},React.createElement(FormGroup,{controlId:"formMunicipalityNo"},React.createElement(ControlLabel,null," Municipality : "),React.createElement("select",{id:"municipality_select2",className:"form-control form-filter input-sm",name:"municipalityNo"}))),React.createElement("div",{className:"col-md-3"},React.createElement(FormGroup,{controlId:"formBrgyNo"},React.createElement(ControlLabel,null," Barangay : "),React.createElement("select",{id:"barangay_select2",className:"form-control form-filter input-sm",name:"brgyNo"}))),React.createElement("div",{className:"col-md-12"},React.createElement(FormGroup,{controlId:"formVoterId"},React.createElement(ControlLabel,null," Voter Name : "),React.createElement("select",{id:"voter-recruit-select2",className:"form-control input-sm"}))),null!=this.state.voterId&&React.createElement(IdInhouseRequestVoterProfile,{electId:e.props.electId,proId:e.props.proId,provinceCode:e.props.provinceCode,voterId:e.state.voterId,hdrId:e.props.hdrId,reset:e.reset}))))))},componentDidMount:function(){this.initSelect2()},initSelect2:function(){var e=this;$("#inhouse_id_request_item_form #municipality_select2").select2({casesentitive:!1,placeholder:"Select City/Municipality",allowClear:!0,delay:1500,width:"100%",containerCssClass:":all:",ajax:{url:Routing.generate("ajax_select2_municipality"),data:function(t){return{searchText:t.term,provinceCode:e.props.provinceCode}},processResults:function(e,t){return{
results:e.map(function(e){return{id:e.municipality_no,text:e.name}})}}}}),$("#inhouse_id_request_item_form #barangay_select2").select2({casesentitive:!1,placeholder:"Select Barangay",allowClear:!0,delay:1500,width:"100%",containerCssClass:":all:",ajax:{url:Routing.generate("ajax_select2_barangay"),data:function(e){return{searchText:e.term,municipalityNo:$("#inhouse_id_request_item_form #municipality_select2").val(),provinceCode:53}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.brgy_no,text:e.name}})}}}}),$("#inhouse_id_request_item_form #voter-recruit-select2").select2({casesentitive:!1,placeholder:"Enter Name...",delay:1500,width:"100%",containerCssClass:":all:",dropdownCssClass:"custom-option",ajax:{url:Routing.generate("ajax_select2_project_voters_strict"),data:function(t){return{searchText:t.term,electId:e.props.electId,proId:e.props.proId,provinceCode:e.props.provinceCode,municipalityNo:$("#inhouse_id_request_item_form #municipality_select2").val(),brgyNo:$("#inhouse_id_request_item_form #barangay_select2").val()}},processResults:function(t,a){return{results:t.map(function(t){var a=t.voter_name+" - "+t.precinct_no+" ( "+t.municipality_name+", "+t.barangay_name+" )",o=null!=e.state.voterId||""==e.state.voterId;return"A"!=t.status&&(o=!0,a+=" Opps! Voter either blocked or deactivated... Please notify the system administrator..."),{id:t.voter_id,text:a,disabled:o}})}}}}),$("#inhouse_id_request_item_form #voter-recruit-select2").on("change",function(){var t=$(this).val();"undefined"!=t&&""!=t||(t=null),e.setState({voterId:t})})},reset:function(){$("#inhouse_id_request_item_form #voter-recruit-select2").empty().trigger("change"),this.setState({voterId:null}),this.props.onSuccess()}});window.IdInhouseRequestItemModal=IdInhouseRequestItemModal;var Modal=ReactBootstrap.Modal,IdInhouseRequestDetailViewModal=React.createClass({displayName:"IdInhouseRequestDetailViewModal",getInitialState:function(){return{showNewRequestItemModal:!1,printedAt:null}},componentDidMount:function(){this.initSelect2()},initSelect2:function(){var e=this;$("#date_select2").select2({casesentitive:!1,placeholder:"Select Date",allowClear:!0,delay:1500,width:"100%",containerCssClass:":all:",ajax:{url:Routing.generate("ajax_select2_printed_dates"),data:function(t){return{searchText:t.term,proId:e.props.proId,requestId:e.props.hdrId}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.print_date,text:e.print_date}})}}}}),$("#date_select2").on("change",function(){e.setState({printedAt:$(this).val()})})},openNewRequestItemModal:function(){this.setState({showNewRequestItemModal:!0})},closeNewRequestItemModal:function(){this.setState({showNewRequestItemModal:!1})},onSuccessCreate:function(){this.reloadDatatable()},reloadDatatable:function(){this.refs.InhouseRequestDetailDatatable.reload()},showPrintout:function(){console.log("showing attendance summary");var e="http://"+window.hostIp+":8100/voter-report/web/voter/id-request-printout/index.php?request_id="+this.props.hdrId+"&printed_at="+this.state.printedAt;this.popupCenter(e,"Request Printout",900,600)},popupCenter:function(e,t,a,o){var r=void 0!=window.screenLeft?window.screenLeft:screen.left,n=void 0!=window.screenTop?window.screenTop:screen.top,l=0,s=0;l=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,s=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height;var i=l/2-a/2+r,c=s/2-o/2+n,d=window.open(e,t,"scrollbars=yes, width="+a+", height="+o+", top="+c+", left="+i);window.focus&&d.focus()},render:function(){return React.createElement(Modal,{style:{marginTop:"10px"},keyboard:!1,dialogClassName:"modal-custom-95",enforceFocus:!1,backdrop:"static",show:this.props.show,onHide:this.props.onHide},React.createElement(Modal.Header,{className:"modal-header bg-blue-dark font-white",closeButton:!0},React.createElement(Modal.Title,null,"Request  Information ")),React.createElement(Modal.Body,{bsClass:"modal-body overflow-auto"},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-8 text-left"},React.createElement("button",{type:"button",onClick:this.openNewRequestItemModal,className:"btn btn-sm green"},"Add New Item")),React.createElement("div",{classname:"col-md-4 text-right"},React.createElement("div",{className:"form-group col-md-3"},React.createElement("select",{id:"date_select2",className:"form-control form-filter input-sm",name:"brgyNo"})),React.createElement("button",{type:"button",onClick:this.showPrintout,className:"btn btn-sm green"},"Generate"))),this.state.showNewRequestItemModal&&React.createElement(IdInhouseRequestItemModal,{show:this.state.showNewRequestItemModal,proId:this.props.proId,electId:this.props.electId,provinceCode:this.props.provinceCode,hdrId:this.props.hdrId,onHide:this.closeNewRequestItemModal,onSuccess:this.onSuccessCreate,notify:this.props.notify}),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-12"},React.createElement(IdInhouseRequestDetailDatatable,{hdrId:this.props.hdrId,proId:this.props.proId,electId:this.props.electId,provinceCode:this.props.provinceCode,ref:"InhouseRequestDetailDatatable",notify:this.props.notify})))))}});window.IdInhouseRequestDetailViewModal=IdInhouseRequestDetailViewModal;var InhouseRequestsDatatable=React.createClass({displayName:"InhouseRequestsDatatable",getInitialState:function(){return{showViewModal:!1,showPrintModal:!1,target:null,typingTimer:null,doneTypingInterval:1500}},componentDidMount:function(){this.initGrid()},initGrid:function(){var e=new Datatable,t=this;e.init({src:$("#id_inhouse_request_datatable"),dataTable:{ordering:!1,serverSide:!0,processing:!0,searching:!1,deferRender:!0,autoWidth:!1,dom:'<"top"fpli>rt<"bottom"pli><"clear">',searchDelay:2e3,language:{processing:'<i class="fa fa-spinner fa-pulse fa-fw"></i><span > Loading...</span>.'},lengthMenu:[[10,20,50,100,150],[10,20,50,100,150]],pageLength:10,ajax:{url:Routing.generate("ajax_get_id_request_datatable"),type:"GET",data:function(e){e.electId=t.props.electId,e.proId=t.props.proId,e.submittedBy=$('#id_inhouse_request_datatable input[name="submitted_by"]').val(),e.municipalityName=$('#id_inhouse_request_datatable input[name="municipality_name"]').val(),e.barangayName=$('#id_inhouse_request_datatable input[name="barangay_name"]').val(),e.submittedAt=$('#id_inhouse_request_datatable input[name="submitted_at"]').val()}},columns:[{data:null,className:"text-center",width:30,render:function(e,t,a,o){return o.settings._iDisplayStart+o.row+1}},{data:"submitted_by"},{data:"municipality_name",className:"text-center",width:80},{data:"barangay_name",className:"text-center",width:80},{data:"submitted_at",width:100,className:"text-center",render:function(e){return moment(e).format("MMM DD, YYYY")}},{data:"total_received",width:30,className:"text-center"},{data:"total_photo",width:30,className:"text-center"},{data:"total_id",width:30,className:"text-center"},{data:"total_released",width:30,className:"text-center"},{data:"cellphone",width:80,className:"text-center"},{width:180,className:"text-center",render:function(e,t,a){return'<button class="btn btn-xs btn-view btn-primary"> View </button><button class="btn btn-xs print-btn btn-info"> Print </button><button class="btn btn-xs delete-btn btn-danger"> Remove </button>'}}]}}),$("#id_inhouse_request_datatable tbody").on("click",".btn-view",function(){var a=e.getDataTable().row($(this).parents("tr")).data();t.openViewModal(a.hdr_id)}),$("#id_inhouse_request_datatable tbody").on("click",".print-btn",function(){var a=e.getDataTable().row($(this).parents("tr")).data();t.openPrintModal(a.hdr_id)}),$("#id_inhouse_request_datatable tbody").on("click",".delete-btn",function(){var a=e.getDataTable().row($(this).parents("tr")).data();t.remove(a.hdr_id)}),t.grid=e},openViewModal:function(e){this.setState({showViewModal:!0,target:e})},closeViewModal:function(){this.setState({showViewModal:!1,target:null})},openPrintModal:function(e){this.setState({showPrintModal:!0,target:e})},closePrintModal:function(){this.setState({showPrintModal:!1,target:null})},remove:function(e){var t=this;confirm("Are you sure you want to remove this item?")&&(t.requestDelete=$.ajax({url:Routing.generate("ajax_delete_id_request_header",{hdrId:e}),type:"DELETE"}).done(function(e){t.reload()}))},handleFilterChange:function(){var e=this;clearTimeout(this.state.typingTimer),this.state.typingTimer=setTimeout(function(){e.reload()},this.state.doneTypingInterval)},reload:function(){this.grid.getDataTable().ajax.reload()},render:function(){return React.createElement("div",null,this.state.showViewModal&&React.createElement(IdInhouseRequestDetailViewModal,{show:this.state.showViewModal,onHide:this.closeViewModal,hdrId:this.state.target,provinceCode:this.props.provinceCode,electId:this.props.electId,proId:this.props.proId,notify:this.props.notify}),this.state.showPrintModal&&React.createElement(IdInhouseRequestPrintModal,{show:this.state.showPrintModal,onHide:this.closePrintModal,hdrId:this.state.target,provinceCode:this.props.provinceCode,electId:this.props.electId,proId:this.props.proId,notify:this.props.notify}),React.createElement("table",{id:"id_inhouse_request_datatable",className:"table table-bordered"},React.createElement("thead",null,React.createElement("tr",{className:"text-center"},React.createElement("td",null,"#"),React.createElement("td",null,"Submitted By"),React.createElement("td",null,"Mun"),React.createElement("td",null,"Brgy"),React.createElement("td",null,"Received At"),React.createElement("td",null,"RECV"),React.createElement("td",null,"PHOTO"),React.createElement("td",null,"ID"),React.createElement("td",null,"REL"),React.createElement("td",null,"Cellphone"),React.createElement("td",null)),React.createElement("tr",null,React.createElement("td",null),React.createElement("td",null,React.createElement("input",{type:"text",className:"form-control form-filter input-sm",name:"submitted_by"})),React.createElement("td",null,React.createElement("input",{type:"text",className:"form-control form-filter input-sm",name:"municipality_name"})),React.createElement("td",null,React.createElement("input",{type:"text",className:"form-control form-filter input-sm",name:"barangay_name"})),React.createElement("td",null,React.createElement("input",{type:"text",className:"form-control form-filter input-sm",name:"submitted_at"})),React.createElement("td",null),React.createElement("td",null),React.createElement("td",null),React.createElement("td",null),React.createElement("td",null),React.createElement("td",{className:"text-right"},React.createElement("button",{className:"btn btn-xs green btn-outline filter-submit"},React.createElement("i",{className:"fa fa-search"}),"Search")))),React.createElement("tbody",null)))}});window.InhouseRequestsDatatable=InhouseRequestsDatatable;var Modal=ReactBootstrap.Modal,FormGroup=ReactBootstrap.FormGroup,HelpBlock=ReactBootstrap.HelpBlock,ControlLabel=ReactBootstrap.ControlLabel,FormControl=ReactBootstrap.FormControl,NewIdRequestModal=React.createClass({displayName:"NewIdRequestModal",getInitialState:function(){return{form:{data:{municipalityNo:null,brgyNo:null,submittedBy:"",submittedAt:moment(new Date).format("YYYY-MM-DD"),totalReceived:0,remarks:""},errors:[]}}},componentDidMount:function(){this.initSelect2()},initSelect2:function(){var e=this;$("#new_request_form #municipality_select2").select2({casesentitive:!1,placeholder:"Select City/Municipality",allowClear:!0,delay:1500,width:"100%",containerCssClass:":all:",ajax:{url:Routing.generate("ajax_select2_municipality"),data:function(t){return{searchText:t.term,provinceCode:e.props.provinceCode}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.municipality_no,text:e.name}})}}}}),$("#new_request_form #barangay_select2").select2({casesentitive:!1,placeholder:"Select Barangay",allowClear:!0,delay:1500,width:"100%",containerCssClass:":all:",ajax:{url:Routing.generate("ajax_select2_barangay"),data:function(e){return{searchText:e.term,municipalityNo:$("#new_request_form #municipality_select2").val(),provinceCode:53}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.brgy_no,text:e.name}})}}}}),$("#new_request_form #municipality_select2").on("change",function(){e.setFieldValue("municipalityNo",$(this).val())}),$("#new_request_form #barangay_select2").on("change",function(){e.setFieldValue("brgyNo",$(this).val())})},setFormProp:function(e){var t=this.state.form;t.data[e.target.name]=e.target.value,this.setState({form:t})},setFieldValue:function(e,t){var a=this.state.form;a.data[e]=t,this.setState({form:a})},setErrors:function(e){var t=this.state.form;t.errors=e,this.setState({form:t})},getError:function(e){var t=this.state.form.errors;for(var a in t)if(a==e)return t[e];return null},getValidationState:function(e){return null!=this.getError(e)?"error":""},isEmpty:function(e){return null==e||""==e},submit:function(e){e.preventDefault();var t=this,a=t.state.form.data;a.proId=t.props.proId,a.electId=t.props.electId,a.provinceCode=t.props.provinceCode,t.requestPost=$.ajax({url:Routing.generate("ajax_post_id_request_header"),data:a,type:"POST"}).done(function(e){t.props.onSuccess(),t.props.onHide()}).fail(function(e){t.setErrors(e.responseJSON)})},render:function(){return React.createElement(Modal,{enforceFocus:!1,backdrop:"static",show:this.props.show,onHide:this.props.onHide},React.createElement(Modal.Header,{closeButton:!0},React.createElement(Modal.Title,null,"New Request")),React.createElement(Modal.Body,{bsClass:"modal-body overflow-auto"},React.createElement("form",{id:"new_request_form",onSubmit:this.submit},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-12"},React.createElement("div",{className:"col-md-6",style:{paddingLeft:"0"}},React.createElement(FormGroup,{controlId:"formMunicipalityNo"},React.createElement(ControlLabel,null," Municipality : "),React.createElement("select",{id:"municipality_select2",className:"form-control form-filter input-sm",name:"municipalityNo"}))),React.createElement("div",{className:"col-md-6",style:{paddingLeft:"0"}},React.createElement(FormGroup,{controlId:"formBrgyNo"},React.createElement(ControlLabel,null," Barangay : "),React.createElement("select",{id:"barangay_select2",className:"form-control form-filter input-sm",name:"brgyNo"}))),React.createElement("div",{className:"col-md-6",style:{paddingLeft:"0"}},React.createElement(FormGroup,{controlId:"formSubmittedBy",validationState:this.getValidationState("submittedBy")},React.createElement(ControlLabel,null," Submitted By "),React.createElement("input",{type:"text",value:this.state.form.data.submittedBy,className:"input-sm form-control",onChange:this.setFormProp,name:"submittedBy"}),React.createElement(HelpBlock,null,this.getError("submittedBy")))),React.createElement("div",{className:"col-md-6",style:{paddingLeft:"0"}},React.createElement(FormGroup,{controlId:"formCellphone",validationState:this.getValidationState("cellphone")},React.createElement(ControlLabel,null," Cellphone No : "),React.createElement("input",{type:"text",placeholder:"Example : 09283182013",value:this.state.form.data.cellphone,className:"input-sm form-control",onChange:this.setFormProp,name:"cellphone"}),React.createElement(HelpBlock,null,this.getError("cellphone")))),React.createElement("div",{className:"col-md-4",style:{paddingLeft:"0"}},React.createElement(FormGroup,{controlId:"formSubmittedAt",validationState:this.getValidationState("submittedAt")},React.createElement(ControlLabel,null," Received At "),React.createElement("input",{type:"date",value:this.state.form.data.submittedAt,className:"input-sm form-control",onChange:this.setFormProp,name:"submittedAt"}),React.createElement(HelpBlock,null,this.getError("submittedAt")))),React.createElement("div",{className:"col-md-2",style:{paddingLeft:"0"}},React.createElement(FormGroup,{controlId:"formTotalReceived",validationState:this.getValidationState("totalReceived")},React.createElement(ControlLabel,null," Received : "),React.createElement("input",{type:"number",value:this.state.form.data.totalReceived,className:"input-sm form-control",onChange:this.setFormProp,name:"totalReceived"}),React.createElement(HelpBlock,null,this.getError("totalReceived")))),React.createElement("div",{className:"clearfix"}),React.createElement(FormGroup,{controlId:"formRemarks",validationState:this.getValidationState("remarks")},React.createElement(ControlLabel,null," Remarks : "),React.createElement("textarea",{rows:"5",value:this.state.form.data.remarks,className:"input-sm form-control",onChange:this.setFormProp,name:"remarks"}),React.createElement(HelpBlock,null,this.getError("remarks"))))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-12 text-right"},React.createElement("button",{className:"btn btn-primary btn-sm",type:"submit"}," Submit "),React.createElement("button",{className:"btn btn-default btn-sm",type:"button",onClick:this.props.onHide}," Close "))))))}});window.NewIdRequestModal=NewIdRequestModal;var IdInhouseRequests=React.createClass({displayName:"IdInhouseRequests",getInitialState:function(){return{showNewRequestModal:!1,user:null,status:{total_count:0},filters:{proId:null,electId:null,provinceCode:null}}},notify:function(e,t){$.notific8("zindex",11500),$.notific8(e,{heading:"System Message",color:t,life:5e3,verticalEdge:"right",horizontalEdge:"top"})},componentDidMount:function(){this.initSelect2(),this.loadUser(window.userId),this.loadPrintingStatus()},loadUser:function(e){var t=this;t.requestUser=$.ajax({url:Routing.generate("ajax_get_user",{id:e}),type:"GET"}).done(function(e){t.setState({user:e},t.reinitSelect2)})},loadPrintingStatus:function(){var e=this;e.requestPrintingStatus=$.ajax({url:Routing.generate("ajax_get_id_request_status"),type:"GET"}).done(function(t){e.setState({status:t})})},initSelect2:function(){var e=this;$("#id_inhouse_requests_component #election_select2").select2({casesentitive:!1,placeholder:"Select Election...",allowClear:!0,delay:1500,width:"100%",containerCssClass:":all:",ajax:{url:Routing.generate("ajax_select2_elections"),data:function(e){return{searchText:e.term}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.elect_id,text:e.elect_name}})}}}}),$("#id_inhouse_requests_component #project_select2").select2({casesentitive:!1,placeholder:"Select Project...",allowClear:!0,delay:1500,width:"100%",containerCssClass:":all:",ajax:{url:Routing.generate("ajax_select2_projects"),data:function(e){return{searchText:e.term}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.pro_id,text:e.pro_name}})}}}}),$("#id_inhouse_requests_component #province_select2").select2({casesentitive:!1,placeholder:"Enter Province...",allowClear:!0,delay:1500,width:"100%",containerCssClass:":all:",ajax:{url:Routing.generate("ajax_select2_province"),data:function(e){return{searchText:e.term}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.province_code,text:e.name}})}}}}),$("#id_inhouse_requests_component #election_select2").on("change",function(){var t=e.state.filters;t.electId=$(this).val(),e.setState({filters:t})}),$("#id_inhouse_requests_component #project_select2").on("change",function(){var t=e.state.filters;t.proId=$(this).val(),e.setState({filters:t})}),$("#id_inhouse_requests_component #province_select2").on("change",function(){var t=e.state.filters;t.provinceCode=$(this).val(),e.setState({filters:t})})},reinitSelect2:function(){var e=this;if(!e.isEmpty(e.state.user.project)){var t=e.state.user.project.provinceCode;e.requestProvince=$.ajax({url:Routing.generate("ajax_get_province",{provinceCode:t}),type:"GET"}).done(function(e){$("#id_inhouse_requests_component #province_select2").empty().append($("<option/>").val(e.province_code).text(e.name)).trigger("change")}),e.requestProject=$.ajax({url:Routing.generate("ajax_get_project",{proId:e.state.user.project.proId}),type:"GET"}).done(function(e){$("#id_inhouse_requests_component #project_select2").empty().append($("<option/>").val(e.proId).text(e.proName)).trigger("change")})}e.requestActiveElection=$.ajax({url:Routing.generate("ajax_get_active_election"),type:"GET"}).done(function(e){$("#id_inhouse_requests_component #election_select2").empty().append($("<option/>").val(e.electId).text(e.electName)).trigger("change")}),e.state.user.isAdmin||($("#id_inhouse_requests_component #election_select2").attr("disabled","disabled"),$("#id_inhouse_requests_component #province_select2").attr("disabled","disabled"),$("#id_inhouse_requests_component #project_select2").attr("disabled","disabled"))},openNewRequestModal:function(){console.log("opening new new  request modal !"),this.setState({showNewRequestModal:!0})},closeNewRequestModal:function(){this.setState({showNewRequestModal:!1})},isEmpty:function(e){return null==e||""==e||"undefined"==e||e<=0},reloadDatatable:function(){this.refs.idRequestsDatatable.reload()},render:function(){return React.createElement("div",{className:"portlet light portlet-fit bordered",id:"id_inhouse_requests_component"},React.createElement("div",{className:"portlet-body"},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-5"},React.createElement("div",null,React.createElement("h3",null,"ID Inhouse Requests ",React.createElement("small",null,React.createElement("strong",null,React.createElement("em",null,"Today's Total Printed ID: ",this.state.status.total_count))))," "),React.createElement("button",{type:"button",onClick:this.openNewRequestModal,className:"btn btn-sm green"},"New Request"),this.state.showNewRequestModal&&React.createElement(NewIdRequestModal,{notify:this.notify,show:this.state.showNewRequestModal,onHide:this.closeNewRequestModal,proId:this.state.filters.proId,electId:this.state.filters.electId,provinceCode:this.state.filters.provinceCode,onSuccess:this.reloadDatatable})),React.createElement("div",{className:"col-md-7"},React.createElement("form",null,React.createElement("div",{className:"col-md-3 col-md-offset-1"},React.createElement("select",{id:"election_select2",className:"form-control form-filter input-sm"})),React.createElement("div",{className:"col-md-4"},React.createElement("select",{id:"province_select2",className:"form-control form-filter input-sm"})),React.createElement("div",{className:"col-md-4"},React.createElement("select",{id:"project_select2",className:"form-control form-filter input-sm"}))))),React.createElement("br",null),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-12"},React.createElement(InhouseRequestsDatatable,{proId:this.state.filters.proId,electId:this.state.filters.electId,provinceCode:this.state.filters.provinceCode,ref:"idRequestsDatatable",notify:this.notify})))))}});setTimeout(function(){ReactDOM.render(React.createElement(IdInhouseRequests,null),document.getElementById("component-container"))},500);