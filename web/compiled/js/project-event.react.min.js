var Modal=ReactBootstrap.Modal,FormGroup=ReactBootstrap.FormGroup,HelpBlock=ReactBootstrap.HelpBlock,ControlLabel=ReactBootstrap.ControlLabel,FormControl=ReactBootstrap.FormControl,VoterTemporaryCreateModal=React.createClass({displayName:"VoterTemporaryCreateModal",getInitialState:function(){return{form:{data:{proVoterId:null},errors:[]},provinceCode:53}},render:function(){return React.createElement(Modal,{style:{marginTop:"10px"},keyboard:!1,enforceFocus:!1,backdrop:"static",show:this.props.show,onHide:this.props.onHide},React.createElement(Modal.Header,{className:"modal-header bg-blue-dark font-white",closeButton:!0},React.createElement(Modal.Title,null,"New Voter Form")),React.createElement(Modal.Body,{bsClass:"modal-body overflow-auto"},React.createElement("form",{id:"new-voter-create-form",onSubmit:this.submit},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-6"},React.createElement(FormGroup,{controlId:"formMunicipalityNo",validationState:this.getValidationState("municipalityNo")},React.createElement("label",{className:"control-label"},"City/Municipality"),React.createElement("select",{id:"municipality_select2",className:"form-control form-filter input-sm",name:"municipalityNo"}),React.createElement(HelpBlock,null,this.getError("municipalityNo")))),React.createElement("div",{className:"col-md-6"},React.createElement(FormGroup,{controlId:"formBrgyNo",validationState:this.getValidationState("brgyNo")},React.createElement("label",{className:"control-label"},"Barangay"),React.createElement("select",{id:"barangay_select2",className:"form-control form-filter input-sm",name:"brgyNo"}),React.createElement(HelpBlock,null,this.getError("brgyNo"))))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-6"},React.createElement(FormGroup,{controlId:"formLastname",validationState:this.getValidationState("lastname")},React.createElement(ControlLabel,null," Lastname : "),React.createElement("input",{type:"text",value:this.state.form.data.lastname,className:"input-sm form-control",onChange:this.setFormProp,name:"lastname"}),React.createElement(HelpBlock,null,this.getError("lastname")))),React.createElement("div",{className:"col-md-6"},React.createElement(FormGroup,{controlId:"formFirstname",validationState:this.getValidationState("firstname")},React.createElement(ControlLabel,null," Firstname : "),React.createElement("input",{type:"text",value:this.state.form.data.firstname,className:"input-sm form-control",onChange:this.setFormProp,name:"firstname"}),React.createElement(HelpBlock,null,this.getError("firstname")))),React.createElement("div",{className:"col-md-6"},React.createElement(FormGroup,{controlId:"formMiddlename",validationState:this.getValidationState("middlename")},React.createElement(ControlLabel,null," Middlename : "),React.createElement("input",{type:"text",value:this.state.form.data.middlename,className:"input-sm form-control",onChange:this.setFormProp,name:"middlename"}),React.createElement(HelpBlock,null,this.getError("middlename")))),React.createElement("div",{className:"col-md-3"},React.createElement(FormGroup,{controlId:"formExtName",validationState:this.getValidationState("extName")},React.createElement(ControlLabel,null," Ext : "),React.createElement("input",{type:"text",value:this.state.form.data.extName,className:"input-sm form-control",onChange:this.setFormProp,name:"extName"}),React.createElement(HelpBlock,null,this.getError("extName"))))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-6"},React.createElement(FormGroup,{controlId:"formGender",validationState:this.getValidationState("gender")},React.createElement(ControlLabel,null," Gender : "),React.createElement("select",{className:"input-sm form-control",onChange:this.setFormProp,name:"gender"},React.createElement("option",{value:""},"- Select -"),React.createElement("option",{value:"M"},"Male"),React.createElement("option",{value:"F"},"Female")),React.createElement(HelpBlock,null,this.getError("gender"))))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-12 text-right"},React.createElement("button",{className:"btn btn-primary btn-sm",style:{marginRight:"10px"},type:"submit"}," Submit "),React.createElement("button",{className:"btn btn-default btn-sm",type:"button",onClick:this.props.onHide}," Close "))))))},componentDidMount:function(){this.initSelect2()},initSelect2:function(){var e=this;$("#new-voter-create-form #voter-recruit-select2").select2({casesentitive:!1,placeholder:"Enter Name...",allowClear:!0,delay:1500,width:"100%",containerCssClass:":all:",dropdownCssClass:"custom-option",ajax:{url:Routing.generate("ajax_select2_project_voters"),data:function(t){return{searchText:t.term,electId:e.props.electId,proId:e.props.proId,provinceCode:e.props.provinceCode,municipalityNo:e.props.municipalityNo,brgyNo:e.props.brgyNo}},processResults:function(e,t){return{results:e.map(function(e){var t=e.voter_name+" - "+e.precinct_no+" ( "+e.municipality_name+", "+e.barangay_name+" )";return{id:e.voter_id,text:t}})}}}}),$("#new-voter-create-form #municipality_select2").select2({casesentitive:!1,placeholder:"Select City/Municipality",allowClear:!0,delay:1500,width:"100%",containerCssClass:":all:",ajax:{url:Routing.generate("ajax_select2_municipality"),data:function(t){return{searchText:t.term,provinceCode:e.state.provinceCode}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.municipality_no,text:e.name}})}}}}),$("#new-voter-create-form #barangay_select2").select2({casesentitive:!1,placeholder:"Select Barangay",allowClear:!0,delay:1500,width:"100%",containerCssClass:":all:",ajax:{url:Routing.generate("ajax_select2_barangay"),data:function(t){return{searchText:t.term,municipalityNo:$("#new-voter-create-form #municipality_select2").val(),provinceCode:e.state.provinceCode}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.brgy_no,text:e.name}})}}}}),$("#new-voter-create-form #civil_status_select2").select2({casesentitive:!1,placeholder:"Select...",allowClear:!0,width:"100%",containerCssClass:":all:",tags:!0,createTag:function(e){return{id:e.term,text:e.term,newOption:!0}},ajax:{url:Routing.generate("ajax_select2_civil_status"),data:function(e){return{searchText:e.term}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.civil_status,text:e.civil_status}})}}}}),$("#new-voter-create-form #bloodtype_select2").select2({casesentitive:!1,placeholder:"Select...",allowClear:!0,width:"100%",containerCssClass:":all:",tags:!0,createTag:function(e){return{id:e.term,text:e.term,newOption:!0}},ajax:{url:Routing.generate("ajax_select2_bloodtype"),data:function(e){return{searchText:e.term}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.bloodtype,text:e.bloodtype}})}}}}),$("#new-voter-create-form #occupation_select2").select2({casesentitive:!1,placeholder:"Select...",allowClear:!0,width:"100%",containerCssClass:":all:",tags:!0,createTag:function(e){return{id:e.term,text:e.term,newOption:!0}},ajax:{url:Routing.generate("ajax_select2_occupation"),data:function(e){return{searchText:e.term}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.occupation,text:e.occupation}})}}}}),$("#new-voter-create-form #religion_select2").select2({casesentitive:!1,placeholder:"Select...",allowClear:!0,width:"100%",containerCssClass:":all:",tags:!0,createTag:function(e){return{id:e.term,text:e.term,newOption:!0}},ajax:{url:Routing.generate("ajax_select2_religion"),data:function(e){return{searchText:e.term}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.religion,text:e.religion}})}}}}),$("#new-voter-create-form #dialect_select2").select2({casesentitive:!1,placeholder:"Select...",allowClear:!0,width:"100%",containerCssClass:":all:",tags:!0,createTag:function(e){return{id:e.term,text:e.term,newOption:!0}},ajax:{url:Routing.generate("ajax_select2_dialect"),data:function(e){return{searchText:e.term}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.dialect,text:e.dialect}})}}}}),$("#new-voter-create-form #ip_group_select2").select2({casesentitive:!1,placeholder:"Select...",allowClear:!0,width:"100%",containerCssClass:":all:",tags:!0,createTag:function(e){return{id:e.term,text:e.term,newOption:!0}},ajax:{url:Routing.generate("ajax_select2_ip_group"),data:function(e){return{searchText:e.term}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.ip_group,text:e.ip_group}})}}}}),$("#new-voter-create-form #voter_group_select2").select2({casesentitive:!1,placeholder:"Select...",allowClear:!0,width:"100%",containerCssClass:":all:",tags:!0,createTag:function(e){return{id:e.term,text:e.term,newOption:!0}},ajax:{url:Routing.generate("ajax_select2_voter_group"),data:function(e){return{searchText:e.term}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.voter_group,text:e.voter_group}})}}}}),$("#new-voter-create-form #other_position_select2").select2({casesentitive:!1,placeholder:"Select...",allowClear:!0,width:"100%",containerCssClass:":all:",tags:!0,createTag:function(e){return{id:e.term,text:e.term,newOption:!0}},ajax:{url:Routing.generate("ajax_select2_voter_position"),data:function(e){return{searchText:e.term}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.position,text:e.position}})}}}}),$("#new-voter-create-form #civil_status_select2").on("change",function(){console.log("civil status changed"),e.setFormPropValue("civilStatus",$(this).val())}),$("#new-voter-create-form #bloodtype_select2").on("change",function(){e.setFormPropValue("bloodtype",$(this).val())}),$("#new-voter-create-form #occupation_select2").on("change",function(){e.setFormPropValue("occupation",$(this).val())}),$("#new-voter-create-form #religion_select2").on("change",function(){e.setFormPropValue("religion",$(this).val())}),$("#new-voter-create-form #dialect_select2").on("change",function(){e.setFormPropValue("dialect",$(this).val())}),$("#new-voter-create-form #ip_group_select2").on("change",function(){e.setFormPropValue("ipGroup",$(this).val())}),$("#new-voter-create-form #municipality_select2").on("change",function(){e.setFormPropValue("municipalityNo",$(this).val())}),$("#new-voter-create-form #barangay_select2").on("change",function(){e.setFormPropValue("brgyNo",$(this).val())});var t=this.props.municipalityNo,a=this.props.municipalityName,o=this.props.barangayNo,r=this.props.barangayName;null!=t&&($("#new-voter-create-form #municipality_select2").empty().append($("<option/>").val(t).text(a)).trigger("change"),$("#new-voter-create-form #barangay_select2").empty().append($("<option/>").val(o).text(r)).trigger("change")),e.props.user.isAdmin||$("#new-voter-create-form #municipality_select2").attr("disabled","disabled")},loadVoter:function(e,t){var a=this;a.requestVoter=$.ajax({url:Routing.generate("ajax_get_project_voter",{proId:e,voterId:t}),type:"GET"}).done(function(e){var t=a.state.form;t.data.nodeLabel=e.voterName,t.data.nodeOrder=10,t.data.municipalityNo=e.municipalityNo,t.data.brgyNo=e.brgyNo,t.data.voterId=e.voterId,t.data.proVoterId=e.proVoterId,t.data.cellphoneNo=a.isEmpty(e.cellphoneNo)?"":e.cellphoneNo,t.data.voterGroup=a.isEmpty(e.voterGroup)?"KFC":e.voterGroup,t.data.remarks=a.isEmpty(e.remarks)?"":e.remarks,$("#voter-group-select2").empty().append($("<option/>").val(t.data.voterGroup).text(t.data.voterGroup)).trigger("change"),a.setState({form:t})})},setFormPropValue:function(e,t){var a=this.state.form;a.data[e]=t,this.setState({form:a})},setFormProp:function(e){var t=this.state.form;t.data[e.target.name]=e.target.value.toUpperCase(),this.setState({form:t})},setErrors:function(e){var t=this.state.form;t.errors=e,this.setState({form:t})},getError:function(e){var t=this.state.form.errors;for(var a in t)if(a==e)return t[e];return null},getValidationState:function(e){return null!=this.getError(e)?"error":""},isEmpty:function(e){return null==e||""==e},reset:function(){var e=this.state.form;e.errors=[],this.setState({form:e})},notify:function(e,t){$.notific8("zindex",11500),$.notific8(e,{heading:"System Message",color:t,life:5e3,verticalEdge:"right",horizontalEdge:"top"})},submit:function(e){e.preventDefault();var t=this,a=t.state.form.data;a.civilStatus=$("#new-voter-create-form #civil_status_select2").val(),a.bloodtype=$("#new-voter-create-form #bloodtype_select2").val(),a.occupation=$("#new-voter-create-form #occupation_select2").val(),a.religion=$("#new-voter-create-form #religion_select2").val(),a.dialect=$("#new-voter-create-form #dialect_select2").val(),a.ipGroup=$("#new-voter-create-form #ip_group_select2").val(),a.voterGroup=$("#new-voter-create-form #voter_group_select2").val(),a.position=$("#new-voter-create-form #other_position_select2").val(),a.electId=t.props.electId,a.proId=t.props.proId,t.requestPost=$.ajax({url:Routing.generate("ajax_post_project_temporary_voter"),data:a,type:"POST"}).done(function(e){t.props.onHide(),t.props.onSuccess(e),t.notify("New record has been saved.","teal")}).fail(function(e){t.setErrors(e.responseJSON),t.notify("Form validation failed!.","ruby")})}});window.VoterTemporaryCreateModal=VoterTemporaryCreateModal;var Modal=ReactBootstrap.Modal,Tab=ReactBootstrap.Tab,Tabs=ReactBootstrap.Tabs,Nav=ReactBootstrap.Nav,NavItem=ReactBootstrap.NavItem,VoterCropModal=React.createClass({displayName:"VoterCropModal",getInitialState:function(){return{imageCropper:null}},render:function(){var e=window.imgUrl+this.props.proId+"_"+this.props.generatedIdNo+"?"+(new Date).getTime();return React.createElement(Modal,{keyboard:!1,enforceFocus:!1,backdrop:"static",show:this.props.show,onHide:this.props.onHide},React.createElement(Modal.Header,{className:"modal-header bg-blue-dark font-white",closeButton:!0},React.createElement(Modal.Title,null,"Crop Photo")),React.createElement(Modal.Body,{bsClass:"modal-body overflow-auto"},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-12 text-right"},React.createElement("button",{className:"btn btn-sm btn-primary",onClick:this.saveImage,style:{marginRight:"10px"}},"Crop Selected Area"),React.createElement("button",{className:"btn btn-sm btn-default",onClick:this.props.onHide},"Close ")),React.createElement("div",{style:{marginTop:"45px"}},React.createElement("img",{id:"original_image",style:{maxWidth:"100%"},src:e})))))},componentDidMount:function(){this.initCropper()},initCropper:function(){var e=document.getElementById("original_image"),t=!1,a=new Cropper(e,{aspectRatio:1,autoCropArea:.65,viewMode:1,ready:function(){t=!0}});this.imageCropper=a},saveImage:function(){console.log("saving image");var e=this;this.imageCropper.getCroppedCanvas().toBlob(function(t){console.log("blob data"),console.log(t);var a=new FormData;a.append("files[]",t,"profile_photo.jpg"),$.ajax(Routing.generate("ajax_upload_project_voter_photo",{proId:e.props.proId,proVoterId:e.props.proVoterId}),{method:"POST",data:a,processData:!1,contentType:!1}).done(function(t){$.ajax(Routing.generate("ajax_patch_voter_cropped_photo",{proId:e.props.proId,proVoterId:e.props.proVoterId}),{method:"PATCH"}).done(function(e){console.log("photo has been cropped")}).fail(function(e){console.log("failed to crop photo")}),e.props.onSuccess(),e.props.onHide()}).fail(function(e){console.log("something went wrong")})})}});window.VoterCropModal=VoterCropModal;var Modal=ReactBootstrap.Modal,FormGroup=ReactBootstrap.FormGroup,HelpBlock=ReactBootstrap.HelpBlock,ControlLabel=ReactBootstrap.ControlLabel,FormControl=ReactBootstrap.FormControl,VoterEditModal=React.createClass({displayName:"VoterEditModal",getInitialState:function(){return{form:{data:{category:"",cellphone:"",organization:"",voterGroup:""},errors:[]},voter:{status:"I"},showCropModal:!1,showNewVoterCreateModal:!1}},componentDidMount:function(){console.log("pro id"),console.log(this.props.proId),console.log("pro voter id"),console.log(this.props.proVoterId),this.loadVoter(this.props.proId,this.props.proVoterId),this.initSelect2(),this.initUploader()},loadVoter:function(e,t){var a=this;a.requestVoter=$.ajax({url:Routing.generate("ajax_get_project_voter",{proVoterId:t,proId:e}),type:"GET"}).done(function(e){var t=a.state.form;t.data.cellphone=e.cellphoneNo,t.data.category=e.category,t.data.organization=e.organization,t.data.voterGroup=e.voterGroup,t.data.proIdCode=e.proIdCode,t.data.assignedPrecinct=e.assignedPrecinct,t.data.precinctNo=e.precinctNo,t.data.remarks=e.remarks,t.data.status=e.status,a.setState({form:t,voter:e},a.reinitSelect2)})},initSelect2:function(){$("#voter-group-select2").select2({casesentitive:!1,placeholder:"Enter Group",width:"100%",allowClear:!0,tags:!0,containerCssClass:":all:",createTag:function(e){return{id:e.term,text:e.term,newOption:!0}},ajax:{url:Routing.generate("ajax_select2_voter_group"),data:function(e){return{searchText:e.term}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.voter_group,text:e.voter_group}})}}}});var e=this;$("#voter-group-select2").on("change",function(){e.setFieldValue("voterGroup",$(this).val())})},reinitSelect2:function(){var e=this.state.form.data.voterGroup;$("#voter-group-select2").empty().append($("<option />").val(e).text(e)).trigger("change")},initUploader:function(){var e=this;$("#voter-photo-upload").fileupload({dataType:"json",done:function(t,a){$.each(a.result.files,function(e,t){$("<p/>").text(t.name).appendTo(document.body)}),e.refresh(),e.openCropModal()},progressall:function(e,t){parseInt(t.loaded/t.total*100,10)}})},openCropModal:function(){this.setState({showCropModal:!0})},closeCropModal:function(){this.setState({showCropModal:!1})},generateIdNo:function(){var e=this;alert("generating id number"),e.requestVoter=$.ajax({url:Routing.generate("ajax_get_project_voter_generate_id_no",{proVoterId:e.props.proVoterId,proId:e.props.proId}),type:"GET"}).done(function(t){alert("ID NO has been created : "+t.proIdCode),e.refresh()})},resetId:function(){var e=this;e.requestVoter=$.ajax({url:Routing.generate("ajax_get_project_voter_reset_id",{proVoterId:e.props.proVoterId,proId:e.props.proId}),type:"GET"}).done(function(t){alert("You can now re-print this member ID"),e.refresh()})},refresh:function(){this.loadVoter(this.props.proId,this.props.proVoterId)},setFormProp:function(e){var t=this.state.form;t.data[e.target.name]=e.target.value,this.setState({form:t})},setFieldValue:function(e,t){var a=this.state.form;a.data[e]=t,this.setState({form:a})},setErrors:function(e){var t=this.state.form;t.errors=e,this.setState({form:t})},getError:function(e){var t=this.state.form.errors;for(var a in t)if(a==e)return t[e];return null},getValidationState:function(e){return null!=this.getError(e)?"error":""},isEmpty:function(e){return null==e||""==e},submit:function(e){e.preventDefault();var t=this,a=t.state.form.data;a.proId=this.props.proId,t.requestPost=$.ajax({url:Routing.generate("ajax_patch_project_voter",{proVoterId:this.props.proVoterId,proId:this.props.proId}),type:"PATCH",data:a}).done(function(e){t.props.onHide()}).fail(function(e){e.status,t.setErrors(e.responseJSON)})},render:function(){if(!this.isEmpty(this.state.voter))var e=window.imgUrl+this.props.proId+"_"+this.state.voter.generatedIdNo+"?"+(new Date).getTime();return React.createElement(Modal,{keyboard:!1,enforceFocus:!1,bsSize:"lg",backdrop:"static",show:this.props.show,onHide:this.props.onHide},React.createElement(Modal.Header,{className:"modal-header bg-blue-dark font-white",closeButton:!0},React.createElement(Modal.Title,null,"Update Form")),React.createElement(Modal.Body,{bsClass:"modal-body overflow-auto"},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-4"},React.createElement("div",{onClick:this.openCropModal},React.createElement("img",{src:e,className:"img-responsive",alt:""})),this.state.showCropModal&&React.createElement(VoterCropModal,{proId:this.props.proId,proVoterId:this.props.proVoterId,generatedIdNo:this.state.voter.generatedIdNo,show:this.state.showCropModal,onHide:this.closeCropModal,onSuccess:this.refresh}),React.createElement("div",{className:"profile-userbuttons",style:{marginTop:"10px"}},React.createElement("span",{className:"btn col-md-12 green btn-sm fileinput-button "},React.createElement("span",null," Change Photo"),React.createElement("input",{id:"voter-photo-upload",type:"file",name:"files[]","data-url":Routing.generate("ajax_upload_project_voter_photo",{proId:this.props.proId,proVoterId:this.props.proVoterId}),multiple:!1}))),!this.isEmpty(this.state.voter)&&this.isEmpty(this.state.voter.generateIdNo)&&React.createElement("div",null,React.createElement("button",{className:"btn btn-primary btn-sm col-md-12",onClick:this.generateIdNo,style:{marginTop:"10px"}},"Generate ID No")),React.createElement("div",null,React.createElement("button",{className:"btn btn-info btn-sm col-md-12",onClick:this.openCropModal,style:{marginTop:"10px"}},"Crop Photo")),!this.isEmpty(this.state.voter)&&this.state.voter.hasId&&React.createElement("div",null,React.createElement("button",{className:"btn btn-info btn-sm col-md-12",onClick:this.resetId,style:{marginTop:"10px"}},"Reprint ID")),!this.isEmpty(this.state.voter)&&React.createElement("div",{style:{marginTop:"90px"}},React.createElement("div",null,React.createElement("small",null,React.createElement("strong",null,"Name : ")," ",this.state.voter.voterName," ")),React.createElement("div",null,React.createElement("small",null,React.createElement("strong",null,"Municipality :")," ",this.state.voter.municipalityName)),React.createElement("div",null,React.createElement("small",null,React.createElement("strong",null,"Barangay :")," ",this.state.voter.barangayName)),React.createElement("div",null,React.createElement("small",null,React.createElement("strong",null,"Precinct No :")," ",this.state.voter.precinctNo)),React.createElement("div",null,React.createElement("small",null,React.createElement("strong",null,"Assigned Precinct :")," ",this.state.voter.assignedPrecinct)))),React.createElement("div",{className:"col-md-8"},React.createElement("form",{id:"voter-updated-form"},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-12"},React.createElement("div",{className:"col-md-6"},React.createElement(FormGroup,{controlId:"formPrecinctNo",validationState:this.getValidationState("precinctNo")},React.createElement(ControlLabel,null," Precinct No : "),React.createElement(FormControl,{bsClass:"form-control input-sm",name:"precinctNo",value:this.state.form.data.precinctNo,disabled:!0}),React.createElement(HelpBlock,null,this.getError("precinctNo")))),React.createElement("div",{className:"col-md-6"},React.createElement(FormGroup,{controlId:"formAssignedPrecinct",validationState:this.getValidationState("assignedPrecinct")},React.createElement(ControlLabel,null," Assigned Precinct No : "),React.createElement(FormControl,{bsClass:"form-control input-sm",name:"assignedPrecinct",value:this.state.form.data.assignedPrecinct,onChange:this.setFormProp}),React.createElement(HelpBlock,null,this.getError("assignedPrecinct")))))),React.createElement("div",{className:"clearfix"}),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-12"},React.createElement("div",{className:"col-md-6"},React.createElement(FormGroup,{controlId:"formProIdCode",validationState:this.getValidationState("proIdCode")},React.createElement(ControlLabel,null," ID No : "),React.createElement(FormControl,{bsClass:"form-control input-sm",disabled:!0,name:"proIdCode",value:this.state.form.data.proIdCode,onChange:this.setFormProp}),React.createElement(HelpBlock,null,this.getError("proIdCode")))),React.createElement("div",{className:"col-md-6"},React.createElement(FormGroup,{controlId:"formStatus",validationState:this.getValidationState("status")},React.createElement(ControlLabel,null," Status : "),React.createElement(FormControl,{componentClass:"select",bsClass:"form-control input-sm",name:"status",value:this.state.form.data.status,onChange:this.setFormProp},React.createElement("option",{value:""}," -- Select Status --"),React.createElement("option",{value:"A"},"Active"),React.createElement("option",{value:"I"},"Inactive"),React.createElement("option",{value:"B"},"Blocked")),React.createElement(HelpBlock,null,this.getError("status")))))),React.createElement("div",{className:"clearfix"}),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-12"},React.createElement("div",{className:"col-md-6"},React.createElement(FormGroup,{controlId:"formVoterGroup",validationState:this.getValidationState("voterGroup")},React.createElement(ControlLabel,null,"Position : "),React.createElement("select",{id:"voter-group-select2",className:"form-control input-sm"},React.createElement("option",{value:""}," ")),React.createElement(HelpBlock,null,this.getError("voterGroup")))),React.createElement("div",{className:"col-md-6"},React.createElement(FormGroup,{controlId:"formCellphone",validationState:this.getValidationState("cellphone")},React.createElement(ControlLabel,null," Cellphone : "),React.createElement(FormControl,{bsClass:"form-control input-sm",name:"cellphone",value:this.state.form.data.cellphone,onChange:this.setFormProp}),React.createElement(HelpBlock,null,this.getError("cellphone")))))),React.createElement("div",{className:"clearfix"}),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-12"},React.createElement("div",{className:"col-md-12"},React.createElement(FormGroup,{controlId:"formRemarks",validationState:this.getValidationState("remarks")},React.createElement(ControlLabel,null," Remarks : "),React.createElement(FormControl,{componentClass:"textarea",rows:"5",bsClass:"form-control input-sm",name:"remarks",value:this.state.form.data.remarks,onChange:this.setFormProp}),React.createElement(HelpBlock,null,this.getError("remarks")))))),React.createElement("div",{className:"text-right col-md-12"},React.createElement("button",{type:"button",className:"btn btn-default",style:{marginRight:"5px"},onClick:this.props.onHide},"Close"),React.createElement("button",{type:"button",className:"btn blue-madison",onClick:this.submit},"Submit")))))))}});window.VoterEditModal=VoterEditModal;var Modal=ReactBootstrap.Modal,FormGroup=ReactBootstrap.FormGroup,HelpBlock=ReactBootstrap.HelpBlock,ControlLabel=ReactBootstrap.ControlLabel,FormControl=ReactBootstrap.FormControl,ProjectEventAttendeeBatchModal=React.createClass({displayName:"ProjectEventAttendeeBatchModal",getInitialState:function(){return{form:{data:{provinceCode:"",electId:"",municipalityNo:"",brgyNo:"",voterGroup:"",project:2,withId:0,withNoId:1,is1:1,is2:0,is3:0,is4:0,is5:0,is6:0,is7:0,is8:0,isCh:0,isKcl:0,isKcl0:0,isKcl1:0,isKcl2:0,isKcl3:0,isKfc:0,isDao:0,sop:0,notSop:0,voters:[]},errors:[]},categories:[],votersList:[],unselected:[]}},render:function(){var e=this,t=e.state.form.data;return React.createElement(Modal,{keyboard:!1,enforceFocus:!1,dialogClassName:"modal-full",show:this.props.show,onHide:this.props.onHide},React.createElement(Modal.Header,{className:"modal-header bg-blue-dark font-white bold",closeButton:!0},React.createElement(Modal.Title,null,"Add Attendees")),React.createElement(Modal.Body,{bsClass:"modal-body overflow-auto"},React.createElement("form",{id:"sms-form",onSubmit:this.submit},React.createElement("div",{className:"col-md-3"},React.createElement(FormGroup,{controlId:"formProvinceCode"},React.createElement(ControlLabel,null," Province : "),React.createElement("select",{id:"form-province-select2",className:"form-control input-sm"})),React.createElement(FormGroup,{controlId:"formMunicipalityNo",validationState:this.getValidationState("municipalityNo")},React.createElement(ControlLabel,null," Municipality : "),React.createElement("select",{id:"form-municipality-select2",className:"form-control input-sm"}),React.createElement(HelpBlock,null,this.getError("municipalityNo"))),React.createElement(FormGroup,{controlId:"formBarangayNo",validationState:this.getValidationState("brgyNo")},React.createElement(ControlLabel,null," Barangay : "),React.createElement("select",{id:"form-barangay-select2",className:"form-control input-sm"}),React.createElement(HelpBlock,null,this.getError("brgyNo"))),React.createElement("div",{className:"col-md-3",style:{padding:0}},React.createElement("div",{className:"mt-checkbox-list"},React.createElement("label",{className:"mt-checkbox"},React.createElement("input",{type:"checkbox",name:"withId",checked:t.withId,onChange:this.setFormCheckProp}),"ID",React.createElement("span",null)),React.createElement("label",{className:"mt-checkbox"},React.createElement("input",{type:"checkbox",name:"withNoId",checked:t.withNoId,onChange:this.setFormCheckProp}),"No ID",React.createElement("span",null)))),React.createElement("div",{className:"col-md-3",style:{padding:0}},React.createElement("div",{className:"mt-checkbox-list"},React.createElement("label",{className:"mt-checkbox"},React.createElement("input",{type:"checkbox",name:"notSop",checked:t.notSop,onChange:this.setFormCheckProp}),"!SOP",React.createElement("span",null)),React.createElement("label",{className:"mt-checkbox"},React.createElement("input",{type:"checkbox",name:"sop",checked:t.sop,onChange:this.setFormCheckProp}),"SOP",React.createElement("span",null)))),React.createElement("div",{className:"clearfix"}),React.createElement("div",{className:"col-md-4",style:{padding:0}},React.createElement("div",{className:"mt-checkbox-list"},React.createElement("label",{className:"mt-checkbox"},React.createElement("input",{type:"checkbox",name:"isCh",checked:t.isCh,onChange:this.setFormCheckProp}),"CH",React.createElement("span",null)),React.createElement("label",{className:"mt-checkbox"},React.createElement("input",{type:"checkbox",name:"isKcl",checked:t.isKcl,onChange:this.setFormCheckProp}),"KCL",React.createElement("span",null)),React.createElement("label",{className:"mt-checkbox"},React.createElement("input",{type:"checkbox",name:"isKcl0",checked:t.isKcl0,onChange:this.setFormCheckProp}),"KCL0",React.createElement("span",null)))),React.createElement("div",{className:"col-md-4",style:{padding:0}},React.createElement("div",{className:"mt-checkbox-list"},React.createElement("label",{className:"mt-checkbox"},React.createElement("input",{type:"checkbox",name:"isKcl1",checked:t.isKcl1,onChange:this.setFormCheckProp}),"KCL1",React.createElement("span",null)),React.createElement("label",{className:"mt-checkbox"},React.createElement("input",{type:"checkbox",name:"isKcl2",checked:t.isKcl2,onChange:this.setFormCheckProp}),"KCL2",React.createElement("span",null)),React.createElement("label",{className:"mt-checkbox"},React.createElement("input",{type:"checkbox",name:"isKcl3",checked:t.isKcl3,onChange:this.setFormCheckProp}),"KCL3",React.createElement("span",null)))),React.createElement("div",{className:"col-md-4",style:{padding:0}},React.createElement("div",{className:"mt-checkbox-list"},React.createElement("label",{className:"mt-checkbox"},React.createElement("input",{type:"checkbox",name:"isKjr",checked:t.isKjr,onChange:this.setFormCheckProp}),"KJR",React.createElement("span",null)),React.createElement("label",{className:"mt-checkbox"},React.createElement("input",{type:"checkbox",name:"isKfc",checked:t.isKfc,onChange:this.setFormCheckProp}),"KFC",React.createElement("span",null)),React.createElement("label",{className:"mt-checkbox"},React.createElement("input",{type:"checkbox",name:"isDao",checked:t.isDao,onChange:this.setFormCheckProp}),"DAO",React.createElement("span",null)))),React.createElement("div",{className:"clearfix"}),React.createElement("div",{className:"col-md-2",style:{padding:0}},React.createElement("div",{className:"mt-checkbox-list"},React.createElement("label",{className:"mt-checkbox"},React.createElement("input",{type:"checkbox",name:"is1",checked:t.is1,
onChange:this.setFormCheckProp}),"1",React.createElement("span",null)),React.createElement("label",{className:"mt-checkbox"},React.createElement("input",{type:"checkbox",name:"is2",checked:t.is2,onChange:this.setFormCheckProp}),"2",React.createElement("span",null)))),React.createElement("div",{className:"col-md-2",style:{padding:0}},React.createElement("div",{className:"mt-checkbox-list"},React.createElement("label",{className:"mt-checkbox"},React.createElement("input",{type:"checkbox",name:"is3",checked:t.is3,onChange:this.setFormCheckProp}),"3",React.createElement("span",null)),React.createElement("label",{className:"mt-checkbox"},React.createElement("input",{type:"checkbox",name:"is4",checked:t.is4,onChange:this.setFormCheckProp}),"4",React.createElement("span",null)))),React.createElement("div",{className:"col-md-2",style:{padding:0}},React.createElement("div",{className:"mt-checkbox-list"},React.createElement("label",{className:"mt-checkbox"},React.createElement("input",{type:"checkbox",name:"is5",checked:t.is5,onChange:this.setFormCheckProp}),"5",React.createElement("span",null)),React.createElement("label",{className:"mt-checkbox"},React.createElement("input",{type:"checkbox",name:"is6",checked:t.is5,onChange:this.setFormCheckProp}),"6",React.createElement("span",null)))),React.createElement("div",{className:"col-md-2",style:{padding:0}},React.createElement("div",{className:"mt-checkbox-list"},React.createElement("label",{className:"mt-checkbox"},React.createElement("input",{type:"checkbox",name:"is7",checked:t.is7,onChange:this.setFormCheckProp}),"7",React.createElement("span",null)),React.createElement("label",{className:"mt-checkbox"},React.createElement("input",{type:"checkbox",name:"is8",checked:t.is8,onChange:this.setFormCheckProp}),"8",React.createElement("span",null)))),React.createElement("div",{className:"col-md-2",style:{padding:0}},React.createElement("div",{className:"mt-checkbox-list"},React.createElement("label",{className:"mt-checkbox"},React.createElement("input",{type:"checkbox",name:"is9",checked:t.is9,onChange:this.setFormCheckProp}),"9",React.createElement("span",null)),React.createElement("label",{className:"mt-checkbox"},React.createElement("input",{type:"checkbox",name:"is10",checked:t.is10,onChange:this.setFormCheckProp}),"10",React.createElement("span",null)))),React.createElement("button",{type:"button",className:"btn btn-sm btn-primary",style:{width:"100%"},onClick:this.loadVoters},"Apply")),React.createElement("div",{className:"col-md-9"},React.createElement("div",{style:{margin:"5px 0 20px 0 "}},React.createElement("span",{style:{marginRight:"10px"}}," Members : "),React.createElement("div",{className:"btn-group",style:{marginTop:"-6px"}},React.createElement("button",{type:"button",onClick:this.deselectAll,className:"btn btn-xs grey-steel"},"Deselect All"),React.createElement("button",{type:"button",onClick:this.selectAll,className:"btn btn-xs green-turquoise"},"Select All"))),React.createElement("div",{className:"clearfix"}),React.createElement("div",{className:"col-md-6 remove-padding"},React.createElement("div",null," Available : ",this.state.unselected.length)),React.createElement("div",{className:"col-md-6 "},React.createElement("div",{style:{marginLeft:"18px"}}," Selected :  ",t.voters.length)),React.createElement(FormGroup,{controlId:"formProfiles",validationState:this.getValidationState("students")},React.createElement("select",{multiple:!0,ref:"selectBox",className:"searchable",id:"voters",name:"voters[]"},this.state.votersList.map(function(t){e.isEmpty(t.cellphone);return React.createElement("option",{key:t.pro_voter_id,value:t.pro_voter_id},t.voter_name," - ",t.voter_group," (",t.cellphone,") ")})),React.createElement("div",{className:"text-right"},React.createElement(HelpBlock,null,this.getError("voters"))))),React.createElement("div",{className:"text-right col-md-12"},React.createElement("button",{type:"submit",style:{marginRight:"5px"},className:"btn blue-madison btn-sm"},"Submit"),React.createElement("button",{type:"button",className:"btn btn-sm btn-default",onClick:this.props.onHide},"Close")))))},componentDidMount:function(){this.initSelect2(),this.initMultiSelect(),this.initFormData(),this.loadUser(window.userId)},initFormData:function(){var e=this.state.form;e.data.electId=this.props.electId,this.setState({form:e})},loadUser:function(e){var t=this;t.requestUser=$.ajax({url:Routing.generate("ajax_get_user",{id:e}),type:"GET"}).done(function(e){t.setState({user:e},t.reinitSelect2)})},initMultiSelect:function(){var e=this,t=this.refs.selectBox;$(t).multiSelect({selectableOptgroup:!0,selectableHeader:"<input placeholder='Enter Name' type='text' class='form-control input-sm' autocomplete='off' style='text-transform:uppercase;margin-bottom:5px;'>",selectionHeader:"<input placeholder='Enter Name' type='text' class='form-control input-sm' autocomplete='off' style='text-transform:uppercase;margin-bottom:5px;'>",afterInit:function(e){var t=this,a=t.$selectableUl.prev(),o=t.$selectionUl.prev(),r="#"+t.$container.attr("id")+" .ms-elem-selectable:not(.ms-selected)",n="#"+t.$container.attr("id")+" .ms-elem-selection.ms-selected";t.qs1=a.quicksearch(r).on("keydown",function(e){if(40===e.which)return t.$selectableUl.focus(),!1}),t.qs2=o.quicksearch(n).on("keydown",function(e){if(40==e.which)return t.$selectionUl.focus(),!1})},afterSelect:function(t){this.qs1.cache(),this.qs2.cache(),e.setVoters($(e.refs.selectBox).val())},afterDeselect:function(t){this.qs1.cache(),this.qs2.cache(),e.setVoters($(e.refs.selectBox).val())},cssClass:"fluid-size"})},loadVoters:function(){var e=this,t=e.state.form.data;e.requestVoters=$.ajax({url:Routing.generate("ajax_project_event_attendee_multiselect",t),type:"GET"}).done(function(t){e.setState({votersList:t,unselected:t}),e.refreshSelectBox()})},refreshSelectBox:function(){$(this.refs.selectBox).multiSelect("refresh")},deselectAll:function(){$(this.refs.selectBox).multiSelect("deselect_all")},selectAll:function(){$(this.refs.selectBox).multiSelect("select_all")},setVoters:function(e){var t=this.state.form,a=[];null!=e?(t.data.voters=e,a=this.state.votersList.filter(function(t){return-1==e.indexOf(t.voter_id)})):(t.data.voters=[],a=this.state.votersList),this.setState({form:t,unselected:a})},initSelect2:function(){var e=this;$("#form-province-select2").select2({casesentitive:!1,placeholder:"Enter Name...",allowClear:!0,delay:1500,width:"100%",containerCssClass:":all:",ajax:{url:Routing.generate("ajax_select2_province"),data:function(e){return{searchText:e.term}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.province_code,text:e.name}})}}}}),$("#form-municipality-select2").select2({casesentitive:!1,placeholder:"Enter Name...",allowClear:!0,delay:1500,width:"100%",containerCssClass:":all:",ajax:{url:Routing.generate("ajax_select2_municipality"),data:function(e){return{searchText:e.term,provinceCode:$("#form-province-select2").val()}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.municipality_no,text:e.name}})}}}}),$("#form-barangay-select2").select2({casesentitive:!1,placeholder:"Enter name...",allowClear:!0,delay:1500,width:"100%",containerCssClass:":all:",ajax:{url:Routing.generate("ajax_select2_barangay"),data:function(e){return{searchText:e.term,provinceCode:$("#form-province-select2").val(),municipalityNo:$("#form-municipality-select2").val()}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.brgy_no,text:e.name}})}}}}),$("#form-voter-group-select2").select2({casesentitive:!1,placeholder:"Enter Category",allowClear:!0,delay:1500,width:"100%",containerCssClass:":all:",ajax:{url:Routing.generate("ajax_select2_voter_group"),data:function(e){return{searchText:e.term}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.voter_group,text:e.voter_group}})}}}}),$("#form-province-select2").on("change",function(){$("#form-municipality-select2").empty().trigger("change"),$("#form-barangay-select2").empty().trigger("change"),e.setFormPropValue("provinceCode",$(this).val())}),$("#form-municipality-select2").on("change",function(){$("#form-barangay-select2").empty().trigger("change"),e.setFormPropValue("municipalityNo",$(this).val())}),$("#form-barangay-select2").on("change",function(){$("#form-province-select2").val(),$("#form-municipality-select2").val(),$("#form-barangay-select2").val();e.setFormPropValue("brgyNo",$(this).val())}),$("#form-voter-group-select2").on("change",function(){e.setFormPropValue("voterGroup",$(this).val())})},reinitSelect2:function(){var e=this,t=e.state.user.province.provinceCode;e.requestProvince=$.ajax({url:Routing.generate("ajax_get_province",{provinceCode:t}),type:"GET"}).done(function(e){console.log("province loaded."),$("#form-province-select2").empty().append($("<option/>").val(e.province_code).text(e.name)).trigger("change")})},setFormPropValue:function(e,t){var a=this.state.form;a.data[e]=t,this.setState({form:a})},setFormCheckProp:function(e){var t=this.state.form;t.data[e.target.name]=e.target.checked?1:0,this.setState({form:t})},setFormProp:function(e){var t=this.state.form;t.data[e.target.name]=e.target.value,this.setState({form:t})},setErrors:function(e){var t=this.state.form;t.errors=e,this.setState({form:t})},getError:function(e){var t=this.state.form.errors;for(var a in t)if(a==e)return t[e];return null},getValidationState:function(e){return null!=this.getError(e)?"error":""},submit:function(e){e.preventDefault();var t=this,a=t.state.form.data;a.eventId=t.props.eventId,a.proId=t.props.proId,t.requestValidation=$.ajax({url:Routing.generate("ajax_post_project_event_batch_attendee"),type:"POST",data:a}).done(function(e){t.props.notify("Attendees has been added.","ruby"),t.props.onSuccess(),t.reset()}).fail(function(e){"401"==e.status?t.props.notify("You dont have the permission to perform this action.","ruby"):"400"==e.status&&t.props.notify("Form Validation Failed.","ruby"),t.setErrors(e.responseJSON)}).always(function(){})},isEmpty:function(e){return null==e||""==e},reset:function(){var e=this.state.form;e.errors=[],this.deselectAll(),this.setState({form:e})}});window.ProjectEventAttendeeBatchModal=ProjectEventAttendeeBatchModal;var Modal=ReactBootstrap.Modal,FormGroup=ReactBootstrap.FormGroup,HelpBlock=ReactBootstrap.HelpBlock,ControlLabel=ReactBootstrap.ControlLabel,FormControl=ReactBootstrap.FormControl,ProjectEventAttendeeModal=React.createClass({displayName:"ProjectEventAttendeeModal",getInitialState:function(){return{form:{data:{proVoterId:null,voterId:null,cellphone:"",voterGroup:"",position:"",assignedPrecinct:"",precinctNo:"",remarks:""},errors:[]},tempVoter:{hasPhoto:"",hasId:"",lastEvent:{event_name:""}}}},componentDidMount:function(){this.initSelect2()},initSelect2:function(){var e=this;$("#form-voter-select2").select2({casesentitive:!1,placeholder:"Enter Name...",allowClear:!0,delay:3e3,width:"100%",containerCssClass:":all:",dropdownCssClass:"custom-option",ajax:{url:Routing.generate("ajax_select2_project_voters"),data:function(t){return{searchText:t.term,proId:e.props.proId,electId:e.props.electId,provinceCode:e.props.provinceCode,municipalityNo:$("#municipality-select2").val()}},processResults:function(e,t){return{results:e.map(function(e){var t=e.voter_name+" - "+e.precinct_no+" ( "+e.municipality_name+", "+e.barangay_name+" )";return{id:e.pro_voter_id,text:t}})}}}}),$("#voter-group-select2").select2({casesentitive:!1,placeholder:"Enter Group",width:"100%",allowClear:!0,tags:!0,containerCssClass:":all:",createTag:function(e){return{id:e.term,text:e.term,newOption:!0}},ajax:{url:Routing.generate("ajax_select2_voter_group"),data:function(e){return{searchText:e.term}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.voter_group,text:e.voter_group}})}}}}),$("#municipality-select2").select2({casesentitive:!1,placeholder:"Enter municipality...",width:"100%",allowClear:!0,tags:!0,containerCssClass:":all:",createTag:function(e){return{id:e.term,text:e.term,newOption:!0}},ajax:{url:Routing.generate("ajax_select2_municipality"),data:function(e){return{searchText:e.term,provinceCode:53}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.municipality_no,text:e.name}})}}}}),$("#position-select2").select2({casesentitive:!1,placeholder:"Enter Barangay Position",width:"100%",allowClear:!0,tags:!0,containerCssClass:":all:",createTag:function(e){return{id:e.term,text:e.term,newOption:!0}},ajax:{url:Routing.generate("ajax_select2_voter_position"),data:function(e){return{searchText:e.term}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.position,text:e.position}})}}}}),$("#form-voter-select2").on("change",function(){e.loadVoter(e.props.proId,$(this).val())}),$("#voter-group-select2").on("change",function(){e.setFieldValue("voterGroup",$(this).val())}),$("#position-select2").on("change",function(){e.setFieldValue("position",$(this).val())})},loadVoter:function(e,t){var a=this;a.requestVoter=$.ajax({url:Routing.generate("ajax_get_project_voter",{proId:e,proVoterId:t}),type:"GET"}).done(function(e){var t=a.state.form;t.data.proVoterId=e.proVoterId,t.data.voterId=e.voterId,t.data.cellphone=a.isEmpty(e.cellphoneNo)?"":e.cellphoneNo,t.data.voterGroup=a.isEmpty(e.voterGroup)?"":e.voterGroup,t.data.position=a.isEmpty(e.position)?"":e.position,t.data.assignedPrecinct=a.isEmpty(e.assignedPrecinct)?"":e.assignedPrecinct,t.data.precinctNo=a.isEmpty(e.precinctNo)?"":e.precinctNo,t.data.is1=e.is1,t.data.is2=e.is2,t.data.is3=e.is3,t.data.is4=e.is4,t.data.is5=e.is5,t.data.is6=e.is6,t.data.is7=e.is7,t.data.is8=e.is8,t.data.is9=e.is9,t.data.is10=e.is10,t.data.remarks=e.remarks,$("#voter-group-select2").empty().append($("<option/>").val(e.voterGroup).text(e.voterGroup)).trigger("change"),$("#position-select2").empty().append($("<option/>").val(e.position).text(e.position)).trigger("change"),a.setState({form:t,tempVoter:e})});var o=a.state.form;o.data.proVoterId=null,o.data.voterId=null,o.data.cellphone="",o.data.voterGroup="",o.data.position="",o.data.is1=null,o.data.is2=null,o.data.is3=null,o.data.is4=null,o.data.is5=null,o.data.is6=null,o.data.is7=null,o.data.is8=null,o.data.is9=null,o.data.is10=null,o.data.remarks="",a.setState({form:o,tempVoter:{hasPhoto:"",hasId:"",lastEvent:{event_name:""}}})},reset:function(){var e=this.state.form;e.data.proVoterId="",e.data.cellphone="",e.data.remarks="",e.errors=[],$("#form-voter-select2").empty().trigger("change"),this.setState({form:e})},handleCheckbox:function(e){var t=this.state.form;t.data[e.target.name]=e.target.checked?1:0,this.setState({form:t})},setFormProp:function(e){var t=this.state.form;t.data[e.target.name]=e.target.value,this.setState({form:t})},setFieldValue:function(e,t){var a=this.state.form;a.data[e]=t,this.setState({form:a})},setErrors:function(e){var t=this.state.form;t.errors=e,this.setState({form:t})},getError:function(e){var t=this.state.form.errors;for(var a in t)if(a==e)return t[e];return null},getValidationState:function(e){return null!=this.getError(e)?"error":""},isEmpty:function(e){return null==e||""==e},submit:function(e){e.preventDefault();var t=this,a=t.state.form.data;a.eventId=t.props.eventId,a.proId=t.props.proId,t.requestAddAttendee=$.ajax({url:Routing.generate("ajax_post_project_event_attendee"),type:"POST",data:a}).done(function(e){t.props.onSuccess(""),t.props.notify("Attendee has been added.","teal")}).fail(function(e){"401"==e.status?t.props.notify("You dont have the permission to update this record.","ruby"):t.props.notify("Form Validation Failed.","ruby"),t.setErrors(e.responseJSON)})},openNewVoterCreateModal:function(){console.log("opening modal"),this.setState({showNewVoterCreateModal:!0})},closeNewVoterCreateModal:function(){this.setState({showNewVoterCreateModal:!1})},render:function(){var e=this;e.state.form.data;return React.createElement(Modal,{keyboard:!1,enforceFocus:!1,dialogClassName:"modal-custom-40",backdrop:"static",show:this.props.show,onHide:this.props.onHide},React.createElement(Modal.Header,{className:"modal-header bg-blue-dark font-white",closeButton:!0},React.createElement(Modal.Title,null,"Attendee Form")),React.createElement(Modal.Body,{bsClass:"modal-body overflow-auto"},this.state.showNewVoterCreateModal&&React.createElement(VoterTemporaryCreateModal,{proId:3,electId:423,provinceCode:53,show:this.state.showNewVoterCreateModal,onHide:this.closeNewVoterCreateModal}),React.createElement("form",{id:"voter-node-form",onSubmit:this.submit},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-3"},React.createElement("button",{style:{marginBottom:"10px"},onClick:this.openNewVoterCreateModal,className:"btn btn-primary btn-sm",type:"button"}," Non-voter "))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-12"},React.createElement(FormGroup,{controlId:"formMunicipalityNo",validationState:this.getValidationState("municipalityNo")},React.createElement(ControlLabel,null," Municipality : "),React.createElement("select",{id:"municipality-select2",className:"form-control input-sm"}),React.createElement(HelpBlock,null,this.getError("municipalityNo"))),React.createElement(FormGroup,{controlId:"formProVoterId",validationState:this.getValidationState("proVoterId")},React.createElement(ControlLabel,null," Voter Name : "),React.createElement("select",{id:"form-voter-select2",className:"form-control input-sm"}),React.createElement(HelpBlock,null,this.getError("proVoterId"))),React.createElement("div",{className:"col-md-6",style:{paddingLeft:"0"}},React.createElement(FormGroup,{controlId:"formCellphone",validationState:this.getValidationState("cellphone")},React.createElement(ControlLabel,null," Cellphone No : "),React.createElement("input",{type:"text",placeholder:"Example : 09283182013",value:this.state.form.data.cellphone,className:"input-sm form-control",onChange:this.setFormProp,name:"cellphone"}),React.createElement(HelpBlock,null,this.getError("cellphone")))),React.createElement("div",{className:"col-md-6",style:{paddingRight:"0"}},React.createElement(FormGroup,{controlId:"formVoterGroup",validationState:this.getValidationState("voterGroup")},React.createElement(ControlLabel,null,"Position: "),React.createElement("select",{id:"voter-group-select2",className:"form-control input-sm"},React.createElement("option",{value:""}," ")),React.createElement(HelpBlock,null,this.getError("voterGroup")))),React.createElement("div",{className:"col-md-6",style:{paddingLeft:"0"}},React.createElement(FormGroup,{controlId:"formPosition",validationState:this.getValidationState("position")},React.createElement(ControlLabel,null,"Barangay Position: "),React.createElement("select",{id:"position-select2",className:"form-control input-sm"},React.createElement("option",{value:""}," ")),React.createElement(HelpBlock,null,this.getError("position")))))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-12 text-right"},React.createElement("button",{className:"btn btn-primary btn-sm",disabled:this.isEmpty(this.state.form.data.proVoterId),type:"submit"}," Submit "),React.createElement("button",{className:"btn btn-default btn-sm",type:"button",onClick:this.props.onHide}," Close "))))))}});window.ProjectEventAttendeeModal=ProjectEventAttendeeModal;var ProjectEventDetailDatatable=React.createClass({displayName:"ProjectEventDetailDatatable",getInitialState:function(){return{target:null,typingTimer:null,doneTypingInterval:1500,showEditModal:!1}},componentDidMount:function(){this.initDatatable(this.props.eventId)},initDatatable:function(e){var t=this,a=(new Datatable,$("#project_event_detail_datatable")),o=new Datatable,r=Routing.generate("ajax_datatable_event_member",{eventId:e},!0);o.init({src:a,loadingMessage:"Loading...",dataTable:{bState:!0,autoWidth:!0,deferRender:!0,ajax:{url:r,type:"GET",data:function(e){e.provinceCode="53",e.proId=t.props.proId,e.voterName=$('#project_event_detail_datatable input[name="voterName"]').val(),e.voterGroup=$('#project_event_detail_datatable input[name="voterGroup"]').val(),e.hasAttended=$('#project_event_detail_datatable select[name="hasAttendedFilter"]').val(),e.hasNewId=$('#project_event_detail_datatable select[name="hasNewIdFilter"]').val(),e.croppedPhoto=$('#project_event_detail_datatable select[name="hasCroppedPhoto"]').val(),e.barangayName=$('#project_event_detail_datatable input[name="barangayName"]').val(),e.precinctNo=$('#project_event_detail_datatable input[name="precinctNo"]').val()}},columnDefs:[{orderable:!1,targets:[0,2,3,4,5,6,7,8,9,10,11]},{className:"align-center",targets:[0,3]}],order:[[1,"desc"]],columns:[{data:null,className:"text-center",width:20,render:function(e,t,a,o){return o.settings._iDisplayStart+o.row+1}},{data:"voter_name",className:"text-center",width:150,render:function(e,a,o){var r=window.imgUrl+t.props.proId+"_"+o.generated_id_no+"?"+(new Date).getTime(),n="No Event";return null!=o.last_event&&(n=o.last_event.event_name+" - Event Date : "+o.last_event.event_date),'<img src="'+r+'" style="width:80px;height:auto;"/><strong style="margin-top:10px;"><br/>'+e+"</strong> <br/><span>"+n+"</span>"}},{data:"voter_group",className:"text-center",width:30},{data:"has_attended",className:"text-center",width:30,render:function(e,t,a){return'<label class="mt-checkbox status-checkbox"><input type="checkbox" name="hasAttended" '+(1==parseInt(e)?' checked="checked" ':"")+' value="'+a.event_detail_id+'"></input><span></span></label>'}},{data:"has_new_id",className:"text-center",width:30,render:function(e,t,a){return'<label class="mt-checkbox status-checkbox"><input type="checkbox" name="hasNewId" '+(1==parseInt(e)?' checked="checked" ':"")+' value="'+a.event_detail_id+'"></input><span></span></label>'}},{data:"cropped_photo",className:"text-center",width:30,render:function(e,t,a){return 1==parseInt(e)?"YES":"NO"}},{data:"barangay_name",className:"text-center",width:150},{data:"precinct_no",className:"text-center",width:"10px",width:60},{data:"cellphone",className:"text-center",width:50},{data:"is_1",className:"text-center",width:70,render:function(e,t,a){return(1==parseInt(a.is_1)?1:"")+" "+(1==parseInt(a.is_2)?2:"")+" "+(1==parseInt(a.is_3)?3:"")+" "+(1==parseInt(a.is_4)?4:"")+" "+(1==parseInt(a.is_5)?5:"")+" "+(1==parseInt(a.is_6)?6:"")+" "+(1==parseInt(a.is_7)?7:"")+" "+(1==parseInt(a.is_8)?8:"")+" "+(1==parseInt(a.is_9)?9:"")+" "+(1==parseInt(a.is_10)?10:"")}},{data:"with_stub",className:"text-center",width:20,render:function(e,t,a){return 1==parseInt(e)?"YES":"NO"}},{width:100,className:"text-center",render:function(e,t,a){return"<a href='javascript:void(0);' class='btn btn-xs font-white bg-primary edit-button' data-toggle='tooltip' data-title='Edit'><i class='fa fa-edit' ></i></a><a href='javascript:void(0);' class='btn btn-xs font-white bg-red-sunglo delete-button' data-toggle='tooltip' data-title='Delete'><i class='fa fa-trash' ></i></a>"}}]}}),a.on("click",".status-checkbox",function(e){var a=e.target.value,o=e.target.checked,r=e.target.name,n=o?1:0;null!=a&&null!=o&&t.patchStatus(a,r,n)}),a.on("click",".delete-button",function(){var e=o.getDataTable().row($(this).parents("tr")).data();t.delete(e.event_detail_id)}),a.on("click",".edit-button",function(){var e=o.getDataTable().row($(this).parents("tr")).data();t.edit(e.pro_voter_id)}),t.grid=o},patchStatus:function(e,t,a){var o=this,r={};r[t]=a,o.requestToggleRequirement=$.ajax({url:Routing.generate("ajax_patch_event_detail_status",{eventDetailId:e}),type:"PATCH",data:r}).done(function(e){console.log("requirement patched")})},edit:function(e){this.setState({showEditModal:!0,target:e})},closeEditModal:function(){this.reload(),this.setState({showEditModal:!1,target:null})},delete:function(e){var t=this;confirm("Are you sure you want to remove this member ?")&&(t.requestDelete=$.ajax({url:Routing.generate("ajax_delete_project_event_detail",{eventDetailId:e}),type:"DELETE"}).done(function(e){t.reload()}))},handleFilterChange:function(){var e=this;clearTimeout(this.state.typingTimer),this.state.typingTimer=setTimeout(function(){e.reload()},this.state.doneTypingInterval)},reload:function(){this.grid.getDataTable().ajax.reload()},reloadFiltered:function(e){var t=this;$('#project_event_detail_datatable input[name="assignedPrecinct"]').val(e),setTimeout(function(){t.grid.getDataTable().ajax.reload()})},isEmpty:function(e){return null==e||""==e||"undefined"==e||e<=0},handleFilterChange:function(){var e=this;clearTimeout(this.state.typingTimer),this.state.typingTimer=setTimeout(function(){e.reload()},this.state.doneTypingInterval)},render:function(){return React.createElement("div",null,this.state.showEditModal&&React.createElement(VoterEditModal,{show:this.state.showEditModal,onHide:this.closeEditModal,notify:this.props.notify,proVoterId:this.state.target,proId:this.props.proId}),React.createElement("div",{className:"table-container",style:{marginTop:"20px"}},React.createElement("table",{id:"project_event_detail_datatable",className:"table table-striped table-bordered",width:"100%"},React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",null,"No"),React.createElement("th",null,"Name"),React.createElement("th",null,"POS"),React.createElement("th",null,"ATD"),React.createElement("th",null,"PHOTO"),React.createElement("th",null,"CROPPED"),React.createElement("th",null,"Barangay"),React.createElement("th",null,"Precinct"),React.createElement("th",null,"CP"),React.createElement("th",null,"Tag"),React.createElement("th",null,"Stub"),React.createElement("th",null)),React.createElement("tr",null,React.createElement("td",null),React.createElement("td",{style:{padding:"10px 5px"}},React.createElement("input",{type:"text",className:"form-control form-filter input-sm",name:"voterName",onChange:this.handleFilterChange})),React.createElement("td",null,React.createElement("input",{type:"text",className:"form-control form-filter input-sm",name:"voterGroup",onChange:this.handleFilterChange})),React.createElement("td",null,React.createElement("select",{name:"hasAttendedFilter",onChange:this.handleFilterChange,className:"input-sm",style:{marginTop:"2px"}},React.createElement("option",{value:""},"All"),React.createElement("option",{value:"1"},"Yes"),React.createElement("option",{value:"0"},"No"))),React.createElement("td",null,React.createElement("select",{name:"hasNewIdFilter",onChange:this.handleFilterChange,className:"input-sm",style:{marginTop:"2px"}},React.createElement("option",{value:""},"All"),React.createElement("option",{value:"1"},"Yes"),React.createElement("option",{value:"0"},"No"))),React.createElement("td",null,React.createElement("select",{name:"hasCroppedPhoto",onChange:this.handleFilterChange,className:"input-sm",style:{marginTop:"2px"}},React.createElement("option",{value:""},"All"),React.createElement("option",{value:"1"},"Yes"),React.createElement("option",{value:"0"},"No"))),React.createElement("td",null,React.createElement("input",{type:"text",className:"form-control form-filter input-sm",name:"barangayName",onChange:this.handleFilterChange})),React.createElement("td",null,React.createElement("input",{type:"text",className:"form-control form-filter input-sm",name:"precinctNo",onChange:this.handleFilterChange})),React.createElement("td",null),React.createElement("td",null),React.createElement("td",null),React.createElement("td",null))),React.createElement("tbody",null))))}});window.ProjectEventDetailDatatable=ProjectEventDetailDatatable;var Modal=ReactBootstrap.Modal,FormGroup=ReactBootstrap.FormGroup,HelpBlock=ReactBootstrap.HelpBlock,ControlLabel=ReactBootstrap.ControlLabel,FormControl=ReactBootstrap.FormControl,ProjectEventAttendanceModal=React.createClass({displayName:"ProjectEventAttendanceModal",getInitialState:function(){return{proIdCode:null,member:null,showAttendeeModal:!1,showAttendeeBatchModal:!1,events:[],selectedEvent:null}},render:function(){var e=this;if(null!=this.state.member)var t=this.state.member.generated_id_no,a=window.imgUrl+this.props.proId+"_"+t+"?"+(new Date).getTime();return React.createElement(Modal,{style:{marginTop:"10px"},keyboard:!1,dialogClassName:"modal-full",enforceFocus:!1,backdrop:"static",show:this.props.show,onHide:this.props.onHide},React.createElement(Modal.Header,{className:"modal-header bg-blue-dark font-white",closeButton:!0},React.createElement(Modal.Title,null,"Event Attendance")),React.createElement(Modal.Body,{bsClass:"modal-body overflow-auto"},this.state.showAttendeeModal&&React.createElement(ProjectEventAttendeeModal,{proId:this.props.proId,electId:this.props.electId,provinceCode:this.props.provinceCode,eventId:this.props.eventId,show:this.state.showAttendeeModal,notify:this.props.notify,onSuccess:this.reloadFilteredDatatable,onHide:this.closeAttendeeModal}),this.state.showAttendeeBatchModal&&React.createElement(ProjectEventAttendeeBatchModal,{proId:this.props.proId,electId:this.props.electId,provinceCode:this.props.provinceCode,eventId:this.props.eventId,show:this.state.showAttendeeBatchModal,notify:this.props.notify,onSuccess:this.reloadDatatable,onHide:this.closeAttendeeBatchModal}),React.createElement("form",{id:"search-form"},React.createElement("div",{className:"col-md-2"},React.createElement("div",{className:"col-md-12"},React.createElement(FormGroup,{controlId:"formProIdCode"},React.createElement(FormControl,{bsClass:"form-control ",name:"proIdCode",value:this.state.proIdCode,onChange:this.setFormProp}))),null!=this.state.member&&React.createElement("div",{className:"row voter-view-header"},React.createElement("div",{className:"col-md-12"},React.createElement("div",{style:{marginBottom:"15px"}},React.createElement("div",null,React.createElement("em",null,React.createElement("small",null,"Last Updated : ",moment(this.state.member.updatedAt).format("MMM DD, YYYY hh:mm: A")))),React.createElement("div",null,React.createElement("em",null,React.createElement("small",null,"Updated By : ",this.state.member.updatedBy)))),React.createElement("div",{className:"clearfix"}),React.createElement("div",{className:"col-md-12"},React.createElement("div",null,React.createElement("a",{href:a,"data-lightbox":"Profile Photo","data-title":"Profile Photo"},React.createElement("img",{src:a,className:"img-responsive",alt:""}))),React.createElement("div",{className:"profile-userbuttons",style:{marginTop:"10px"}},React.createElement("span",{className:"btn col-md-12 green btn-sm fileinput-button "},React.createElement("span",null," Change Photo"),React.createElement("input",{id:"voter-photo-upload",type:"file",name:"files[]","data-url":Routing.generate("ajax_upload_project_voter_photo",{proId:this.props.proId,voterId:this.state.member.voterId}),multiple:!1})))),React.createElement("div",{className:"col-md-12"},React.createElement("div",null,React.createElement("strong",null,"Name : ")," ",this.state.member.voter_name," "),React.createElement("div",null,React.createElement("strong",null,"Birthdate : ")," ",""==this.state.member.birthdate?"- - - -":this.state.member.birthdate," "),React.createElement("div",null,React.createElement("strong",null,"Municipality :")," ",this.state.member.municipality_name," "),React.createElement("div",null,React.createElement("strong",null,"Barangay :")," ",this.state.member.barangay_name," "),React.createElement("div",null,React.createElement("strong",null,"Precinct No :")," ",this.state.member.precinct_no," ")),React.createElement("div",{className:"col-md-12"},React.createElement("div",null,React.createElement("strong",null,"CP # :")," ",this.state.member.cellphone," "),React.createElement("div",null,React.createElement("strong",null,"Position : ")," ",""==this.state.member.voter_group?"- - - -":this.state.member.voter_group," ")))),null==this.state.member&&React.createElement("div",{className:"row voter-view-header"},React.createElement("div",{className:"col-md-12"},React.createElement("h4",{className:"text-center"
},"Member not found...")))),React.createElement("div",{className:"col-md-10"},React.createElement("div",{className:"col-md-7",style:{paddingLeft:"0px",marginBottom:"10px"}},React.createElement("button",{onClick:this.openAttendeeModal,type:"button",className:"btn btn-sm btn-primary"},"Add Attendees"),React.createElement("div",{className:"btn-group",style:{marginLeft:"10px"}},React.createElement("button",{type:"button",className:"btn btn-sm blue"},"Export PDF"),React.createElement("button",{type:"button",className:"btn btn-sm blue dropdown-toggle","data-toggle":"dropdown","data-hover":"dropdown","data-delay":"1000","data-close-others":"true"},React.createElement("i",{className:"fa fa-angle-down"})),React.createElement("ul",{className:"dropdown-menu",role:"menu"},React.createElement("li",null,React.createElement("a",{href:"javascript:;",onClick:this.showAllAttendees},"All Attendees")),React.createElement("li",null,React.createElement("a",{href:"javascript:;",onClick:this.showAllAttendeesByPosition},"All Attendees By Position")),React.createElement("li",null,React.createElement("a",{href:"javascript:;",onClick:this.showAllAttendeesByBarangay},"All Attendees By Barangay & Position"))))),React.createElement("div",{className:"col-md-5 text-right"},React.createElement("div",{className:"input-group"},React.createElement("select",{className:"form-control input-sm",onChange:this.setSelectedEvent},React.createElement("option",{value:""}," -- Select Event -- "),this.state.events.map(function(e){return React.createElement("option",{value:e.event_id,key:"event"+e.event_id}," ",e.event_name," ")})),React.createElement("div",{className:"input-group-btn"},React.createElement("button",{type:"button",onClick:this.importAttendees,className:"btn btn-sm btn-primary",style:{marginLeft:"12px"},onClick:e.appendEventMembers},"Import Attendees")))),React.createElement(ProjectEventDetailDatatable,{ref:"DetailDatatable",proId:this.props.proId,notify:this.props.notify,eventId:this.props.eventId})))))},componentDidMount:function(){this.loadEvents()},setFormProp:function(e){this.setState({proIdCode:e.target.value},this.search)},search:function(){var e=this,t=this.state.proIdCode;null!=t&&""!=t&&setTimeout(function(){e.requestMember=$.ajax({url:Routing.generate("ajax_get_project_voter_alt",{proIdCode:t,proId:e.props.proId}),type:"GET"}).done(function(t){"A"==t.status?e.setState({member:t},e.add):alert("Opps! Cant add to the list of attendees. Voter either blocked or deactivated")}).fail(function(){console.log("member not found"),e.setState({member:null})})},2e3)},loadEvents:function(){var e=this;e.requestEvents=$.ajax({url:Routing.generate("ajax_get_project_event_headers"),type:"GET"}).done(function(t){console.log("events has been received"),console.log(t),e.setState({events:t})})},appendEventMembers:function(){var e=this;console.log("event id"),console.log(e.state.selectedEvent),e.appendMembers=$.ajax({url:Routing.generate("ajax_post_project_event_header_append"),data:{eventId:e.state.selectedEvent,currentEventId:e.props.eventId},type:"POST"}).done(function(t){console.log("members has been added"),e.refs.DetailDatatable.reload(),e.setState({selectedEvent:null})}).fail(function(){console.log("failed to append members")})},setSelectedEvent:function(e){this.setState({selectedEvent:e.target.value})},add:function(){var e=this;e.requestMember=$.ajax({url:Routing.generate("ajax_post_project_event_detail"),data:{proVoterId:this.state.member.pro_voter_id,proId:this.props.proId,proIdCode:this.state.member.pro_id_code,eventId:this.props.eventId},type:"POST"}).done(function(t){e.refs.DetailDatatable.reload(),e.setState({proIdCode:""})}).fail(function(){e.setState({proIdCode:""})})},reloadDatatable:function(){this.refs.DetailDatatable.reload()},reloadFilteredDatatable:function(e){this.refs.DetailDatatable.reloadFiltered(e)},openAttendeeModal:function(){this.setState({showAttendeeModal:!0})},closeAttendeeModal:function(){this.setState({showAttendeeModal:!1})},openAttendeeBatchModal:function(){this.setState({showAttendeeBatchModal:!0})},closeAttendeeBatchModal:function(){this.setState({showAttendeeBatchModal:!1})},showAttendaceSummary:function(){console.log("showing attendance summary");var e="http://"+window.hostIp+":8100/voter-report/web/voter/kfc/attendance-summary/index.php?event_id="+this.props.eventId;this.popupCenter(e,"Attendance Summary",900,600)},showAllAttendees:function(){var e="http://"+window.hostIp+":83/jpm/event-attendance/?event_id="+this.props.eventId;this.popupCenter(e,"List of All Attendees",900,600)},showAllAttendeesByPosition:function(){var e="http://"+window.hostIp+":83/jpm/event-attendance-by-position/?event_id="+this.props.eventId;this.popupCenter(e,"List of All Attendees",900,600)},showAllAttendeesByBarangay:function(){var e="http://"+window.hostIp+":83/jpm/event-attendance-by-barangay/?event_id="+this.props.eventId;this.popupCenter(e,"List of All Attendees",900,600)},showNewPrintout:function(){var e="http://"+window.hostIp+":8100/voter-report/web/voter/attendance-new/index.php?event_id="+this.props.eventId;this.popupCenter(e,"List of New Attendees",900,600)},showNewAllPrintout:function(){var e="http://"+window.hostIp+":8100/voter-report/web/voter/attendance-new-all/index.php?event_id="+this.props.eventId;this.popupCenter(e,"List of All New Expecteed Attendees",900,600)},showNewByBarangayPrintout:function(){var e="http://"+window.hostIp+":8100/voter-report/web/voter/attendance-new-by-barangay/index.php?event_id="+this.props.eventId;this.popupCenter(e,"List of New Attendees by Barangay",900,600)},showNewByAssignedPrecinctPrintout:function(){var e="http://"+window.hostIp+":8100/voter-report/web/voter/attendance-new-by-assigned-precinct/index.php?event_id="+this.props.eventId;this.popupCenter(e,"List of New Attendees by Assigned Precinct",900,600)},showNewAllByAssignedPrecinctPrintout:function(){var e="http://"+window.hostIp+":8100/voter-report/web/voter/attendance-new-all-by-assigned-precinct/index.php?event_id="+this.props.eventId;this.popupCenter(e,"List of All New Expecteed Attendees By Assigned Precinct",900,600)},showStabs:function(){var e="http://"+window.hostIp+":8100/voter-report/web/voter/voter-stab/index.php?event_id="+this.props.eventId;this.popupCenter(e,"Stabs",900,600)},showStabsByBarangay:function(){var e="http://"+window.hostIp+":8100/voter-report/web/voter/voter-stab-by-barangay/index.php?event_id="+this.props.eventId;this.popupCenter(e,"Stabs",900,600)},showStabsByPrecinct:function(){var e="http://"+window.hostIp+":8100/voter-report/web/voter/voter-stab-by-precinct/index.php?event_id="+this.props.eventId;this.popupCenter(e,"Stabs By Precinct No",900,600)},showOldPrintout:function(){var e="http://"+window.hostIp+":8100/voter-report/web/voter/attendance-old/index.php?event_id="+this.props.eventId;this.popupCenter(e,"List of Old Attendees",900,600)},popupCenter:function(e,t,a,o){var r=void 0!=window.screenLeft?window.screenLeft:screen.left,n=void 0!=window.screenTop?window.screenTop:screen.top,l=0,c=0;l=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,c=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height;var s=l/2-a/2+r,i=c/2-o/2+n,m=window.open(e,t,"scrollbars=yes, width="+a+", height="+o+", top="+i+", left="+s);window.focus&&m.focus()}});window.ProjectEventAttendanceModal=ProjectEventAttendanceModal;var Modal=ReactBootstrap.Modal,FormGroup=ReactBootstrap.FormGroup,HelpBlock=ReactBootstrap.HelpBlock,ControlLabel=ReactBootstrap.ControlLabel,FormControl=ReactBootstrap.FormControl,ProjectEventEditModal=React.createClass({displayName:"ProjectEventEditModal",getInitialState:function(){return{form:{data:{eventName:"",eventDate:null,status:""},errors:[]}}},render:function(){return React.createElement(Modal,{style:{marginTop:"10px"},keyboard:!1,enforceFocus:!1,backdrop:"static",show:this.props.show,onHide:this.props.onHide},React.createElement(Modal.Header,{className:"modal-header bg-blue-dark font-white",closeButton:!0},React.createElement(Modal.Title,null,"Edit Event")),React.createElement(Modal.Body,{bsClass:"modal-body overflow-auto"},React.createElement("form",{id:"event-form"},React.createElement(FormGroup,{controlId:"formEventName",validationState:this.getValidationState("eventName")},React.createElement(ControlLabel,null," Event Name : "),React.createElement(FormControl,{bsClass:"form-control input-sm",name:"eventName",value:this.state.form.data.eventName,onChange:this.setFormProp}),React.createElement(HelpBlock,null,this.getError("eventName"))),React.createElement("div",{className:"col-md-4",style:{paddingRight:"0",paddingLeft:"0"}},React.createElement(FormGroup,{controlId:"formEventDate",validationState:this.getValidationState("eventDate")},React.createElement(ControlLabel,null," Event Date : "),React.createElement(FormControl,{type:"date",bsClass:"form-control input-sm",name:"eventDate",value:this.state.form.data.eventDate,onChange:this.setFormProp}),React.createElement(HelpBlock,null,this.getError("eventDate")))),React.createElement("div",{className:"col-md-3"},React.createElement(FormGroup,{controlId:"formStatus",validationState:this.getValidationState("status")},React.createElement(ControlLabel,null," Status : "),React.createElement(FormControl,{componentClass:"select",bsClass:"form-control input-sm",name:"status",value:this.state.form.data.status,onChange:this.setFormProp},React.createElement("option",{value:"A"}," Active "),React.createElement("option",{value:"I"}," Inactive ")),React.createElement(HelpBlock,null,this.getError("status")))),React.createElement("div",{className:"clearfix"}),React.createElement(FormGroup,{controlId:"formEventDesc",validationState:this.getValidationState("eventDesc")},React.createElement(ControlLabel,null," Purpose : "),React.createElement(FormControl,{componentClass:"textarea",rows:"6",bsClass:"form-control input-sm",name:"eventDesc",value:this.state.form.data.eventDesc,onChange:this.setFormProp}),React.createElement(HelpBlock,null,this.getError("eventDesc"))),React.createElement("div",{className:"text-right"},React.createElement("button",{type:"button",className:"btn blue-madison",onClick:this.submit},"Submit"),React.createElement("button",{type:"button",className:"btn  btn-default",style:{marginRight:"5px"},onClick:this.props.onHide},"Close")))))},componentDidMount:function(){console.log("event id"),console.log(this.props.eventId),this.loadEvent(this.props.eventId)},loadEvent:function(e){var t=this;t.requestEvent=$.ajax({url:Routing.generate("ajax_get_project_event_header",{eventId:e}),type:"GET"}).done(function(e){var a=t.state.form;a.data=e,a.data.eventDate=t.isEmpty(e.eventDate)?null:moment(e.eventDate).format("YYYY-MM-DD"),t.setState({form:a})})},setFormPropValue:function(e,t){var a=this.state.form;a.data[e]=t,this.setState({form:a})},setFormProp:function(e){var t=this.state.form;t.data[e.target.name]=e.target.value,this.setState({form:t})},setErrors:function(e){var t=this.state.form;t.errors=e,this.setState({form:t})},getError:function(e){var t=this.state.form.errors;for(var a in t)if(a==e)return t[e];return null},getValidationState:function(e){return null!=this.getError(e)?"error":""},isEmpty:function(e){return null==e||""==e},reset:function(){var e=this.state.form;e.errors=[],this.setState({form:e})},submit:function(e){e.preventDefault();var t=this,a=t.state.form.data;a.proId=t.props.proId,t.requestPost=$.ajax({url:Routing.generate("ajax_patch_project_event_header",{eventId:t.props.eventId}),data:a,type:"PATCH"}).done(function(e){t.reset(),t.props.reload(),t.props.onHide()}).fail(function(e){t.setErrors(e.responseJSON)})}});window.ProjectEventEditModal=ProjectEventEditModal;var Modal=ReactBootstrap.Modal,FormGroup=ReactBootstrap.FormGroup,HelpBlock=ReactBootstrap.HelpBlock,ControlLabel=ReactBootstrap.ControlLabel,FormControl=ReactBootstrap.FormControl,ProjectEventCreateModal=React.createClass({displayName:"ProjectEventCreateModal",getInitialState:function(){return{form:{data:{eventName:"",eventDate:null},errors:[]}}},render:function(){return React.createElement(Modal,{style:{marginTop:"10px"},keyboard:!1,enforceFocus:!1,backdrop:"static",show:this.props.show,onHide:this.props.onHide},React.createElement(Modal.Header,{className:"modal-header bg-blue-dark font-white",closeButton:!0},React.createElement(Modal.Title,null,"Create Event")),React.createElement(Modal.Body,{bsClass:"modal-body overflow-auto"},React.createElement("form",{id:"event-form"},React.createElement(FormGroup,{controlId:"formEventName",validationState:this.getValidationState("eventName")},React.createElement(ControlLabel,null," Event Name : "),React.createElement(FormControl,{bsClass:"form-control input-sm",name:"eventName",value:this.state.form.data.eventName,onChange:this.setFormProp}),React.createElement(HelpBlock,null,this.getError("eventName"))),React.createElement("div",{className:"col-md-4",style:{paddingRight:"0",paddingLeft:"0"}},React.createElement(FormGroup,{controlId:"formEventDate",validationState:this.getValidationState("eventDate")},React.createElement(ControlLabel,null," Event Date : "),React.createElement(FormControl,{type:"date",bsClass:"form-control input-sm",name:"eventDate",value:this.state.form.data.eventDate,onChange:this.setFormProp}),React.createElement(HelpBlock,null,this.getError("eventDate")))),React.createElement("div",{className:"clearfix"}),React.createElement(FormGroup,{controlId:"formEventDesc",validationState:this.getValidationState("eventDesc")},React.createElement(ControlLabel,null," Purpose : "),React.createElement(FormControl,{componentClass:"textarea",rows:"6",bsClass:"form-control input-sm",name:"eventDesc",value:this.state.form.data.eventDesc,onChange:this.setFormProp}),React.createElement(HelpBlock,null,this.getError("eventDesc"))),React.createElement("div",{className:"text-right"},React.createElement("button",{type:"button",className:"btn blue-madison",onClick:this.submit},"Submit"),React.createElement("button",{type:"button",className:"btn  btn-default",style:{marginRight:"5px"},onClick:this.props.onHide},"Close")))))},componentDidMount:function(){},setFormPropValue:function(e,t){var a=this.state.form;a.data[e]=t,this.setState({form:a})},setFormProp:function(e){var t=this.state.form;t.data[e.target.name]=e.target.value,this.setState({form:t})},setErrors:function(e){var t=this.state.form;t.errors=e,this.setState({form:t})},getError:function(e){var t=this.state.form.errors;for(var a in t)if(a==e)return t[e];return null},getValidationState:function(e){return null!=this.getError(e)?"error":""},isEmpty:function(e){return null==e||""==e},reset:function(){var e=this.state.form;e.errors=[],this.setState({form:e})},submit:function(e){e.preventDefault();var t=this,a=t.state.form.data;a.proId=t.props.proId,t.requestPost=$.ajax({url:Routing.generate("ajax_post_project_event_header"),data:a,type:"POST"}).done(function(e){t.reset(),t.props.reload(),t.props.onHide()}).fail(function(e){t.setErrors(e.responseJSON)})}});window.ProjectEventCreateModal=ProjectEventCreateModal;var ProjectEventDatatable=React.createClass({displayName:"ProjectEventDatatable",getInitialState:function(){return{showCreateModal:!1,showEditModal:!1,showAttendanceModal:!1,target:null,typingTimer:null,doneTypingInterval:1500,user:null,filters:{electId:null,provinceCode:null,proId:null}}},componentDidMount:function(){this.loadUser(window.userId),this.initSelect2()},loadUser:function(e){var t=this;t.requestUser=$.ajax({url:Routing.generate("ajax_get_user",{id:e}),type:"GET"}).done(function(e){t.setState({user:e},t.reinitSelect2)})},initSelect2:function(){var e=this;$("#voter_component #election_select2").select2({casesentitive:!1,placeholder:"Select Election...",allowClear:!0,delay:1500,width:"100%",containerCssClass:":all:",ajax:{url:Routing.generate("ajax_select2_elections"),data:function(e){return{searchText:e.term}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.elect_id,text:e.elect_name}})}}}}),$("#voter_component #project_select2").select2({casesentitive:!1,placeholder:"Select Project...",allowClear:!0,delay:1500,width:"100%",containerCssClass:":all:",ajax:{url:Routing.generate("ajax_select2_projects"),data:function(e){return{searchText:e.term}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.pro_id,text:e.pro_name}})}}}}),$("#voter_component #province_select2").select2({casesentitive:!1,placeholder:"Enter Province...",allowClear:!0,delay:1500,width:"100%",containerCssClass:":all:",ajax:{url:Routing.generate("ajax_select2_province_strict"),data:function(e){return{searchText:e.term}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.province_code,text:e.name}})}}}}),$("#voter_component #election_select2").on("change",function(){var t=e.state.filters;t.electId=$(this).val(),e.setState({filters:t},e.reload)}),$("#voter_component #project_select2").on("change",function(){var t=e.state.filters;t.proId=$(this).val(),e.setState({filters:t},e.reload)}),$("#voter_component #province_select2").on("change",function(){var t=e.state.filters;t.provinceCode=$(this).val(),e.setState({filters:t},e.reload)})},reinitSelect2:function(){var e=this;if(!e.isEmpty(e.state.user.project)){var t=e.state.user.project.provinceCode;e.requestProvince=$.ajax({url:Routing.generate("ajax_get_province",{provinceCode:t}),type:"GET"}).done(function(e){$("#voter_component #province_select2").empty().append($("<option/>").val(e.province_code).text(e.name)).trigger("change")}),e.requestProject=$.ajax({url:Routing.generate("ajax_get_project",{proId:e.state.user.project.proId}),type:"GET"}).done(function(t){$("#voter_component #project_select2").empty().append($("<option/>").val(t.proId).text(t.proName)).trigger("change"),e.initDatatable()})}e.requestActiveElection=$.ajax({url:Routing.generate("ajax_get_active_election"),type:"GET"}).done(function(e){$("#voter_component #election_select2").empty().append($("<option/>").val(e.electId).text(e.electName)).trigger("change")}),e.state.user.isAdmin||($("#voter_component #election_select2").attr("disabled","disabled"),$("#voter_component #province_select2").attr("disabled","disabled"),$("#voter_component #project_select2").attr("disabled","disabled"))},initDatatable:function(){var e=this,t=(new Datatable,$("#project_event_table")),a=new Datatable,o=Routing.generate("ajax_get_datatable_project_event",{},!0);a.init({src:t,loadingMessage:"Loading...",dataTable:{bState:!0,autoWidth:!0,deferRender:!0,ajax:{url:o,type:"GET",data:function(e){e.electId=$("#voter_component #election_select2").val(),e.provinceCode=$("#voter_component #province_select2").val(),e.proId=$("#voter_component #project_select2").val()}},columnDefs:[{orderable:!1,targets:[0,2,3,4,5,6,7]},{className:"align-center",targets:[0,3]}],order:[[0,"desc"]],columns:[{data:null,className:"text-center",width:30,render:function(e,t,a,o){return o.settings._iDisplayStart+o.row+1}},{data:"event_name"},{data:"event_date",width:100,className:"text-center",render:function(e,t,a){return moment(e).format("MMM DD, YYYY")}},{data:"total_expected",className:"text-center",width:30},{data:"total_attended",className:"text-center",width:30},{data:"total_new_id",className:"text-center",width:30},{data:"total_claimed",className:"text-center",width:30},{render:function(e,t,a){return"<a href='javascript:void(0);' class='btn btn-xs font-white bg-green-dark edit-button' data-toggle='tooltip' data-title='Edit'><i class='fa fa-edit' ></i></a><a href='javascript:void(0);' class='btn btn-xs font-white bg-green attendance-button' data-toggle='tooltip' data-title='Edit'><i class='fa fa-calendar'></i></a><a href='javascript:void(0);' class='btn btn-xs font-white bg-red-sunglo delete-button' data-toggle='tooltip' data-title='Delete'><i class='fa fa-trash' ></i></a>"}}]}}),t.on("click",".edit-button",function(){var t=a.getDataTable().row($(this).parents("tr")).data();e.setState({showEditModal:!0,target:t.event_id})}),t.on("click",".attendance-button",function(){var t=a.getDataTable().row($(this).parents("tr")).data();e.setState({showAttendanceModal:!0,target:t.event_id})}),t.on("click",".delete-button",function(){var t=a.getDataTable().row($(this).parents("tr")).data();e.delete(t.event_id)}),e.grid=a},closeEditModal:function(){this.setState({showEditModal:!1,target:null})},closeCreateModal:function(){this.setState({showCreateModal:!1,target:null})},closeAttendanceModal:function(){this.setState({showAttendanceModal:!1,target:null})},openCreateModal:function(){this.setState({showCreateModal:!0})},delete:function(e){var t=this;confirm("Are you sure you want to delete this event?")&&(t.requestDelete=$.ajax({url:Routing.generate("ajax_delete_project_event_header",{eventId:e}),type:"DELETE"}).done(function(e){t.reload()}))},handleFilterChange:function(){var e=this;clearTimeout(this.state.typingTimer),this.state.typingTimer=setTimeout(function(){e.reload()},this.state.doneTypingInterval)},reload:function(){null!=this.grid&&this.grid.getDataTable().ajax.reload()},isEmpty:function(e){return null==e||""==e||"undefined"==e||e<=0},render:function(){return React.createElement("div",null,this.state.showCreateModal&&React.createElement(ProjectEventCreateModal,{proId:this.state.filters.proId,show:this.state.showCreateModal,notify:this.props.notify,reload:this.reload,onHide:this.closeCreateModal}),this.state.showEditModal&&React.createElement(ProjectEventEditModal,{proId:this.state.filters.proId,eventId:this.state.target,show:this.state.showEditModal,notify:this.props.notify,reload:this.reload,onHide:this.closeEditModal}),this.state.showAttendanceModal&&React.createElement(ProjectEventAttendanceModal,{proId:this.state.filters.proId,electId:this.state.filters.electId,provinceCode:this.state.filters.provinceCode,eventId:this.state.target,show:this.state.showAttendanceModal,notify:this.props.notify,reload:this.reload,onHide:this.closeAttendanceModal}),React.createElement("div",{className:"row",id:"voter_component"},React.createElement("div",{className:"col-md-5"},React.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.openCreateModal},"New Event")),React.createElement("div",{className:"col-md-7"},React.createElement("form",{onSubmit:this.onApplyCode},React.createElement("div",{className:"col-md-3 col-md-offset-1"},React.createElement("select",{id:"election_select2",className:"form-control form-filter input-sm"})),React.createElement("div",{className:"col-md-4"},React.createElement("select",{id:"province_select2",className:"form-control form-filter input-sm"})),React.createElement("div",{className:"col-md-4"},React.createElement("select",{id:"project_select2",className:"form-control form-filter input-sm"}))))),React.createElement("div",{className:"table-container",style:{marginTop:"20px"}},React.createElement("table",{id:"project_event_table",className:"table table-striped table-bordered",width:"100%"},React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",null,"No"),React.createElement("th",null,"Event Name"),React.createElement("th",null,"Event Date "),React.createElement("th",null,"Expected"),React.createElement("th",null,"Attended"),React.createElement("th",null,"New"),React.createElement("th",null,"Claimed"),React.createElement("th",{width:"90px"})),React.createElement("tr",null,React.createElement("td",null),React.createElement("td",{style:{padding:"10px 5px"}},React.createElement("input",{type:"text",className:"form-control form-filter input-sm",name:"idx_no",onChange:this.handleFilterChange})),React.createElement("td",null),React.createElement("td",null),React.createElement("td",null),React.createElement("td",null),React.createElement("td",null),React.createElement("td",null))),React.createElement("tbody",null))))}});window.ProjectEventDatatable=ProjectEventDatatable;var ProjectEventComponent=React.createClass({displayName:"ProjectEventComponent",notify:function(e,t){$.notific8("zindex",11500),$.notific8(e,{heading:"System Message",color:t,life:5e3,verticalEdge:"right",horizontalEdge:"top"})},render:function(){return React.createElement("div",{className:"portlet light portlet-fit bordered"},React.createElement("div",{className:"portlet-body"},React.createElement(ProjectEventDatatable,{notify:this.notify})))}});setTimeout(function(){ReactDOM.render(React.createElement(ProjectEventComponent,null),document.getElementById("project-event-container"))},500);