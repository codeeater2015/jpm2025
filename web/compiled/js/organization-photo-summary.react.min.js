var OrganizationMunicipalityPhotoSummaryTable=React.createClass({displayName:"OrganizationMunicipalityPhotoSummaryTable",getInitialState:function(){return{data:[],municipality:{name:""},summary:{totalBarangay:0,totalPrecincts:0,totalRegistered:0,totalRecruits:0,totalRecruitsMorning:0,totalRecruitsAfternoon:0},targetBarangay:null,targetMunicipality:null,loading:!1,refreshInterval:3e5,refreshCounter:0,refreshId:null,counterId:null,updating:!1}},componentDidMount:function(){this.loadData()},loadData:function(){this.loadMunicipality(this.props.provinceCode,this.props.municipalityNo),this.loadMunicipalityData(this.props.electId,this.props.proId,this.props.provinceCode,this.props.municipalityNo,this.props.photoDate)},loadMunicipalityData:function(e,t,a,r,n){var c=this;c.requestMunicipalityData=$.ajax({url:Routing.generate("ajax_get_municipality_organization_photo_summary",{electId:e,proId:t,provinceCode:a,municipalityNo:r,photoDate:n}),type:"GET"}).done(function(e){c.setState({data:e}),c.setSummary(e)})},setSummary:function(e){var t=0,a=0,r=0,n=0,c=0,i=0;e.map(function(e){t++,a+=parseInt(e.total_precincts),r+=parseInt(e.total_voters),n+=parseInt(e.total_recruits),c+=parseInt(e.total_recruits_morning),i+=parseInt(e.total_recruits_afternoon)});var l={totalBarangay:t,totalPrecincts:a,totalRegistered:r,totalRecruits:n,totalRecruitsMorning:c,totalRecruitsAfternoon:i};this.setState({summary:l})},loadMunicipality:function(e,t){var a=this;a.requestMunicipality=$.ajax({url:Routing.generate("ajax_get_municipality",{provinceCode:e,municipalityNo:t}),type:"GET"}).done(function(e){a.setState({municipality:e})})},numberWithCommas:function(e){var t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")},render:function(){var e=this,t=0;return React.createElement("div",null,React.createElement("div",{style:{marginBottom:"5px"}},React.createElement("strong",null,"City/Municipality : ",this.state.municipality.name)),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-3",style:{marginBottom:"15px"}},React.createElement("div",{className:"bold"},"Total Barangay : ",React.createElement("span",{className:"font-red-sunglo"},this.numberWithCommas(this.state.summary.totalBarangay))),React.createElement("div",{className:"bold"},"Total Precincts : ",React.createElement("span",{className:"font-red-sunglo"},this.numberWithCommas(this.state.summary.totalPrecincts))),React.createElement("div",{className:"bold"},"Registered Voter : ",React.createElement("span",{className:"font-red-sunglo"},this.numberWithCommas(this.state.summary.totalRegistered)))),React.createElement("div",{className:"col-md-3"},React.createElement("div",{className:"bold"},"Total Morning : ",React.createElement("span",{className:"font-red-sunglo"},this.numberWithCommas(this.state.summary.totalRecruitsMorning))),React.createElement("div",{className:"bold"},"Total Afternoon : ",React.createElement("span",{className:"font-red-sunglo"},this.numberWithCommas(this.state.summary.totalRecruitsAfternoon))),React.createElement("div",{className:"bold"},"Total Attendees : ",React.createElement("span",{className:"font-red-sunglo"},this.numberWithCommas(this.state.summary.totalRecruits))))),React.createElement("div",{className:"clearfix"}),React.createElement("div",{className:"table-container"},React.createElement("table",{id:"voter_summary_table",className:"table table-striped table-bordered",width:"100%"},React.createElement("thead",{className:"bg-blue-dark font-white"},React.createElement("tr",null,React.createElement("th",{className:"text-center",rowSpan:"2"},"#"),React.createElement("th",{className:"text-center",rowSpan:"2"},"Brgy"),React.createElement("th",{className:"text-center",rowSpan:"2"},"Total Precincts"),React.createElement("th",{className:"text-center",rowSpan:"2"},"Total Voters"),React.createElement("th",{className:"text-center",colSpan:"3"},"Attendees Photo Taken")),React.createElement("tr",null,React.createElement("th",{className:"text-center"},"Morning"),React.createElement("th",{className:"text-center"},"Afternoon"),React.createElement("th",{className:"text-center"},"Total"))),React.createElement("tbody",null,this.state.data.map(function(a,r){return t+=1,React.createElement("tr",null,React.createElement("td",{className:"text-center"},t),React.createElement("td",{className:"text-center"}," ",a.name),React.createElement("td",{className:"text-center"},0==a.total_precincts?"- - -":e.numberWithCommas(a.total_precincts)),React.createElement("td",{className:"text-center"},0==a.total_voters?"- - -":e.numberWithCommas(a.total_voters)),React.createElement("td",{className:"text-center"},0==a.total_recruits_morning?"- - -":e.numberWithCommas(a.total_recruits_morning)),React.createElement("td",{className:"text-center"},0==a.total_recruits_afternoon?"- - -":e.numberWithCommas(a.total_recruits_afternoon)),React.createElement("td",{className:"text-center"},0==a.total_recruits?"- - -":e.numberWithCommas(a.total_recruits)))}),0==this.state.data.length&&!this.state.loading&&React.createElement("tr",null,React.createElement("td",{colSpan:"11",className:"text-center"},"No records was found...")),this.state.loading&&React.createElement("tr",null,React.createElement("td",{colSpan:"11",className:"text-center"},"Data is being processed. Please wait for a while..."))))))},isEmpty:function(e){return null==e||""==e||"undefined"==e}});window.OrganizationMunicipalityPhotoSummaryTable=OrganizationMunicipalityPhotoSummaryTable;var OrganizationPhotoSummaryComponent=React.createClass({displayName:"OrganizationPhotoSummaryComponent",getInitialState:function(){return{provinceCode:null,municipalityNo:null,brgyNo:null,electId:null,proId:null,photoDate:moment(new Date).format("YYYY/MM/DD"),displayBarangayTable:!1,displayMunicipalityTable:!1,displayProvinceTable:!1}},notify:function(e,t){$.notific8("zindex",11500),$.notific8(e,{heading:"System Message",color:t,life:5e3,verticalEdge:"right",horizontalEdge:"top"})},render:function(){return React.createElement("div",{id:"voter_record_summary",className:"portlet light portlet-fit bordered"},React.createElement("div",{className:"portlet-body"},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-3"},React.createElement("form",null,React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label"},"Election"),React.createElement("select",{id:"election_select2",className:"form-control form-filter input-sm",name:"electId"})),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label"},"Province"),React.createElement("select",{id:"province_select2",className:"form-control form-filter input-sm",name:"provinceCode"})),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label"},"Project"),React.createElement("select",{id:"project_select2",className:"form-control form-filter input-sm",name:"proId"})),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label"},"City/Municipality"),React.createElement("select",{id:"municipality_select2",className:"form-control form-filter input-sm",name:"municipalityNo"})),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label"},"Date"),React.createElement("input",{type:"date",onChange:this.setPhotoDate,className:"form-control form-filter input-sm"})),React.createElement("div",null,React.createElement("button",{type:"button",style:{width:"100%"},className:"btn btn-primary",onClick:this.displayTable},"Apply")))),React.createElement("div",{className:"col-md-9",style:{padding:"0px"}},this.state.displayMunicipalityTable&&React.createElement(OrganizationMunicipalityPhotoSummaryTable,{electId:this.state.electId,proId:this.state.proId,provinceCode:this.state.provinceCode,municipalityNo:this.state.municipalityNo,photoDate:this.state.photoDate,notify:this.notify}),!this.state.displayProvinceTable&&!this.state.displayMunicipalityTable&&!this.state.displayBarangayTable&&React.createElement("div",{style:{marginTop:"10px"}},"This area was intentionally left blank...")))))},componentDidMount:function(){this.initSelect2(),this.loadUser(window.userId)},loadUser:function(e){var t=this;t.requestUser=$.ajax({url:Routing.generate("ajax_get_user",{id:e}),type:"GET"}).done(function(e){t.setState({user:e},t.reinitSelect2)})},initSelect2:function(){var e=this;$("#voter_record_summary #election_select2").select2({casesentitive:!1,placeholder:"Select Election",allowClear:!0,delay:1500,width:"100%",containerCssClass:":all:",ajax:{url:Routing.generate("ajax_select2_elections"),data:function(e){return{searchText:e.term}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.elect_id,text:e.elect_name}})}}}}),$("#voter_record_summary #province_select2").select2({casesentitive:!1,placeholder:"Select Province",allowClear:!0,delay:1500,width:"100%",containerCssClass:":all:",ajax:{url:Routing.generate("ajax_select2_province_strict"),data:function(e){return{searchText:e.term}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.province_code,text:e.name}})}}}}),$("#voter_record_summary #project_select2").select2({casesentitive:!1,placeholder:"Select Project",allowClear:!0,delay:1500,width:"100%",containerCssClass:":all:",ajax:{url:Routing.generate("ajax_select2_projects"),data:function(e){return{searchText:e.term}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.pro_id,text:e.pro_name}})}}}}),$("#voter_record_summary #municipality_select2").select2({casesentitive:!1,placeholder:"Select City/Municipality",allowClear:!0,delay:1500,width:"100%",containerCssClass:":all:",ajax:{url:Routing.generate("ajax_select2_municipality_strict"),data:function(t){return{searchText:t.term,provinceCode:e.state.provinceCode}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.municipality_no,text:e.name}})}}}}),$("#voter_record_summary #barangay_select2").select2({casesentitive:!1,placeholder:"Select Barangay",allowClear:!0,delay:1500,width:"100%",containerCssClass:":all:",ajax:{url:Routing.generate("ajax_select2_barangay_strict"),data:function(t){return{searchText:t.term,municipalityNo:$("#voter_record_summary #municipality_select2").val(),provinceCode:e.state.provinceCode}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.brgy_no,text:e.name}})}}}}),$("#voter_record_summary #election_select2").on("change",function(){e.setState({electId:$(this).val()})}),$("#voter_record_summary #project_select2").on("change",function(){e.setState({proId:$(this).val()})}),$("#voter_record_summary #province_select2").on("change",function(){$("#voter_record_summary #municipality_select2").empty().trigger("change"),$("#voter_record_summary #barangay_select2").empty().trigger("change"),e.setState({provinceCode:$(this).val()})}),$("#voter_record_summary #municipality_select2").on("change",function(){$("#voter_record_summary #barangay_select2").empty().trigger("change"),e.setState({municipalityNo:$(this).val()})}),$("#voter_record_summary #barangay_select2").on("change",function(){e.setState({brgyNo:$(this).val()})})},reinitSelect2:function(){var e=this;if(!e.isEmpty(e.state.user)){var t=e.state.user.project.provinceCode;e.requestProvince=$.ajax({url:Routing.generate("ajax_get_province",{provinceCode:t}),type:"GET"}).done(function(e){$("#voter_record_summary #province_select2").empty().append($("<option/>").val(e.province_code).text(e.name)).trigger("change")}),e.requestProject=$.ajax({url:Routing.generate("ajax_get_project",{proId:e.state.user.project.proId}),type:"GET"}).done(function(e){$("#voter_record_summary #project_select2").empty().append($("<option/>").val(e.proId).text(e.proName)).trigger("change")})}e.requestActiveElection=$.ajax({url:Routing.generate("ajax_get_active_election"),type:"GET"}).done(function(e){$("#voter_record_summary #election_select2").empty().append($("<option/>").val(e.electId).text(e.electName)).trigger("change")}),e.state.user.isAdmin||$("#voter_record_summary #province_select2").attr("disabled","disabled")},displayTable:function(){var e=this,t=this.state.provinceCode,a=this.state.municipalityNo,r=this.state.brgyNo,n=!1,c=!1,i=!1;this.isEmpty(a)&&this.isEmpty(r)&&!this.isEmpty(t)?(n=!0,c=!1,i=!1):!this.isEmpty(a)&&this.isEmpty(r)?(n=!1,c=!0,i=!1):this.isEmpty(a)||this.isEmpty(r)||(n=!1,c=!1,i=!0),console.log(this.state),this.setState({displayProvinceTable:!1,displayMunicipalityTable:!1,displayBarangayTable:!1}),setTimeout(function(){e.setState({displayProvinceTable:n,displayMunicipalityTable:c,displayBarangayTable:i})},1e3)},isEmpty:function(e){return null==e||""==e||"undefined"==e},setPhotoDate:function(e){this.setState({photoDate:e.target.value})}});setTimeout(function(){ReactDOM.render(React.createElement(OrganizationPhotoSummaryComponent,null),document.getElementById("container"))},500);