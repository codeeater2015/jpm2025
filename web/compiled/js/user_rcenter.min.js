var UserRcenter=function(){var e=$("#rcenter"),t=$("#user"),n=$("#save_changes"),c=$("#select_all"),l=$("#deselect_all"),o=function(){t.select2({width:"auto",placeholder:"Select...",allowClear:!0}),e.multiSelect({selectableOptgroup:!0,selectableHeader:"<input type='text' class='form-control' autocomplete='off' style='text-transform:uppercase;margin-bottom:5px;'>",selectionHeader:"<input type='text' class='form-control' autocomplete='off' style='text-transform:uppercase;margin-bottom:5px;'>",afterInit:function(e){var t=this,n=t.$selectableUl.prev(),c=t.$selectionUl.prev(),l="#"+t.$container.attr("id")+" .ms-elem-selectable:not(.ms-selected)",o="#"+t.$container.attr("id")+" .ms-elem-selection.ms-selected";t.qs1=n.quicksearch(l).on("keydown",function(e){if(40===e.which)return t.$selectableUl.focus(),!1}),t.qs2=c.quicksearch(o).on("keydown",function(e){if(40===e.which)return t.$selectionUl.focus(),!1})},afterSelect:function(){this.qs1.cache(),this.qs2.cache()},afterDeselect:function(){this.qs1.cache(),this.qs2.cache()},cssClass:"fluid-size"})},s=function(){t.on("change",function(){i()}),n.on("click",function(){null===t.val()||""===t.val()?swal({text:"Please select user first",type:"warning"}):a()}),c.on("click",function(){e.multiSelect("select_all")}),l.on("click",function(){e.multiSelect("deselect_all")})},i=function(){var n=[],c=Routing.generate("ajax_get_user_rcenter",{userid:t.val()},!0);$.get(c).done(function(t){t.map(function(e){n.push(e.rc_code)}),e.multiSelect("deselect_all"),e.multiSelect("select",n)}).fail(function(e){$.error_notify(e)}).always(function(){})},a=function(){var n=t.val(),c=e.val();$.show_loading("Processing request...");var l=Routing.generate("ajax_save_user_rcenter",{},!0);$.post(l,{userid:n,rcenter:c}).done(function(e){$.notify(e.message,"teal")}).fail(function(e){$.error_notify(e)}).always(function(){$.hide_loading()})};return{init:function(){o(),s()}}}();jQuery(document).ready(function(){UserRcenter.init()});