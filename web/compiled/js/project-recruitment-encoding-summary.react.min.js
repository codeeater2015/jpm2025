var ProjectRecruitmentEncodingSummaryByEncoderDatatable=React.createClass({displayName:"ProjectRecruitmentEncodingSummaryByEncoderDatatable",getInitialState:function(){return{showCreateModal:!1,showEditModal:!1,showRecruitsModal:!1,target:null,typingTimer:null,doneTypingInterval:1500,selectedDate:moment(new Date).format("YYYY-MM-DD"),user:null,filters:{electId:null,provinceCode:null,proId:null}}},componentDidMount:function(){this.loadUser(window.userId),this.initSelect2()},loadUser:function(e){var t=this;t.requestUser=$.ajax({url:Routing.generate("ajax_get_user",{id:e}),type:"GET"}).done(function(e){t.setState({user:e},t.reinitSelect2)})},initSelect2:function(){var e=this;$("#handler_component #election_select2").select2({casesentitive:!1,placeholder:"Select Election...",allowClear:!0,delay:1500,width:"100%",containerCssClass:":all:",ajax:{url:Routing.generate("ajax_select2_elections"),data:function(e){return{searchText:e.term}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.elect_id,text:e.elect_name}})}}}}),$("#handler_component #project_select2").select2({casesentitive:!1,placeholder:"Select Project...",allowClear:!0,delay:1500,width:"100%",containerCssClass:":all:",ajax:{url:Routing.generate("ajax_select2_projects"),data:function(e){return{searchText:e.term}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.pro_id,text:e.pro_name}})}}}}),$("#handler_component #province_select2").select2({casesentitive:!1,placeholder:"Enter Province...",allowClear:!0,delay:1500,width:"100%",containerCssClass:":all:",ajax:{url:Routing.generate("ajax_select2_province_strict"),data:function(e){return{searchText:e.term}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.province_code,text:e.name}})}}}}),$("#handler_component #election_select2").on("change",function(){var t=e.state.filters;t.electId=$(this).val(),e.setState({filters:t},e.reload)}),$("#handler_component #project_select2").on("change",function(){var t=e.state.filters;t.proId=$(this).val(),e.setState({filters:t},e.reload)}),$("#voter_table #province_select2").on("change",function(){var t=e.state.filters;t.provinceCode=$(this).val(),e.setState({filters:t},e.reload)})},reinitSelect2:function(){var e=this;if(!e.isEmpty(e.state.user.project)){var t=e.state.user.project.provinceCode;e.requestProvince=$.ajax({url:Routing.generate("ajax_get_province",{provinceCode:t}),type:"GET"}).done(function(e){$("#handler_component #province_select2").empty().append($("<option/>").val(e.province_code).text(e.name)).trigger("change")}),e.requestProject=$.ajax({url:Routing.generate("ajax_get_project",{proId:e.state.user.project.proId}),type:"GET"}).done(function(t){$("#handler_component #project_select2").empty().append($("<option/>").val(t.proId).text(t.proName)).trigger("change"),e.initDatatable()})}e.requestActiveElection=$.ajax({url:Routing.generate("ajax_get_active_election"),type:"GET"}).done(function(e){$("#handler_component #election_select2").empty().append($("<option/>").val(e.electId).text(e.electName)).trigger("change")}),e.state.user.isAdmin||($("#handler_component #election_select2").attr("disabled","disabled"),$("#handler_component #province_select2").attr("disabled","disabled"),$("#handler_component #project_select2").attr("disabled","disabled"))},initDatatable:function(){var e=this,t=(new Datatable,$("#project_recruitment_summary_table")),a=new Datatable,n=Routing.generate("ajax_get_datatable_project_recruitment_encoding_summary_by_encoder",{},!0);a.init({src:t,loadingMessage:"Loading...",dataTable:{bState:!0,autoWidth:!0,deferRender:!0,ajax:{url:n,type:"GET",data:function(t){t.electId=$("#handler_component #election_select2").val(),t.provinceCode=$("#handler_component #province_select2").val(),t.proId=$("#handler_component #project_select2").val(),t.createdAt=e.state.selectedDate}},columnDefs:[{orderable:!1,targets:[0,2,3,4,5,6,7,8,9,10,11,12,13]},{className:"align-center",targets:[0,3]}],order:[[0,"desc"]],columns:[{data:null,className:"text-center",width:30,render:function(e,t,a,n){return n.settings._iDisplayStart+n.row+1}},{data:"created_by"},{data:"start_time",width:70,className:"text-center",render:function(e){return moment(e).format("hh:mm A")}},{data:"end_time",width:70,className:"text-center",render:function(e){return moment(e).format("hh:mm A")}},{data:"start_time",width:60,className:"text-center",render:function(e,t,a){var n=moment(a.end_time),r=moment(a.start_time);return moment.duration(n.diff(r)).asHours().toFixed(2)+" Hrs"}},{data:"start_time",width:80,className:"text-center",render:function(e,t,a){var n=moment(a.end_time),r=moment(a.start_time),l=moment.duration(n.diff(r));return(a.total_recruits/l.asHours().toFixed()).toFixed()+"  <sub>/ hour</sub>"}},{data:"total_recruits",className:"text-center",width:80},{data:"total_with_cellphone",className:"text-center",width:80},{data:"total_members",className:"text-center",width:50,render:function(e,t,a){return(a.total_with_cellphone/a.total_recruits*100).toFixed(2)}},{data:"total_with_cellphone",className:"text-center",width:80,render:function(e,t,a){return a.total_recruits-a.total_with_cellphone}},{data:"total_with_cellphone",className:"text-center",width:50,render:function(e,t,a){return((a.total_recruits-a.total_with_cellphone)/a.total_recruits*100).toFixed(2)}},{data:"total_work_days",className:"text-center",width:80},{data:"total_work_result",className:"text-center",width:50},{data:"total_work_result",className:"text-center",width:50,render:function(e,t,a){return a.total_work_result-500*a.total_work_days}}]}}),t.on("click",".recruits-button",function(){var t=a.getDataTable().row($(this).parents("tr")).data();e.setState({showRecruitsModal:!0,target:t.rec_id})}),t.on("click",".delete-button",function(){var t=a.getDataTable().row($(this).parents("tr")).data();e.delete(t.rec_id)}),e.grid=a},closeCreateModal:function(){this.setState({showCreateModal:!1,target:null})},closeRecruitsModal:function(){this.setState({showRecruitsModal:!1,target:null})},openCreateModal:function(){this.setState({showCreateModal:!0})},delete:function(e){var t=this;confirm("Are you sure you want to delete this record ?")&&(t.requestDelete=$.ajax({url:Routing.generate("ajax_delete_project_recruitment_header",{recId:e}),type:"DELETE"}).done(function(e){t.reload()}))},handleFilterChange:function(){console.log("filter has been changed");var e=this;clearTimeout(this.state.typingTimer),this.state.typingTimer=setTimeout(function(){console.log("try reload"),e.reload()},this.state.doneTypingInterval)},reload:function(){null!=this.grid&&(console.log("reloading datatable"),this.grid.getDataTable().ajax.reload())},isEmpty:function(e){return null==e||""==e||"undefined"==e||e<=0},onDateChange:function(e){console.log("date has been changed"),this.setState({selectedDate:e.target.value},this.reload)},render:function(){return console.log("current date"),console.log(this.state.selectedDate),React.createElement("div",null,React.createElement("div",{className:"row",id:"handler_component"},React.createElement("div",{className:"col-md-6 col-md-offset-6"},React.createElement("form",{onSubmit:this.onApplyCode},React.createElement("div",{className:"col-md-3"},React.createElement("select",{id:"election_select2",className:"form-control form-filter input-sm"})),React.createElement("div",{className:"col-md-3"},React.createElement("select",{id:"province_select2",className:"form-control form-filter input-sm"})),React.createElement("div",{className:"col-md-3"},React.createElement("select",{id:"project_select2",className:"form-control form-filter input-sm"})),React.createElement("div",{className:"col-md-3"},React.createElement("input",{type:"date",className:"form-control input-sm",value:this.state.selectedDate,onChange:this.onDateChange,name:"encoding_date_picker"}))))),React.createElement("div",{className:"table-container",style:{marginTop:"20px"}},React.createElement("table",{id:"project_recruitment_summary_table",className:"table table-striped table-bordered",width:"100%"},React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",null,"No"),React.createElement("th",null,"Encoder"),React.createElement("th",null,"Started"),React.createElement("th",null,"Ended"),React.createElement("th",null,"Duration"),React.createElement("th",null,"Speed"),React.createElement("th",{className:"text-center"},"Total"),React.createElement("th",{className:"text-center"},"With CP"),React.createElement("th",{className:"text-center"},"%"),React.createElement("th",{className:"text-center"},"No CP"),React.createElement("th",{className:"text-center"},"%"),React.createElement("th",null,"No of Days"),React.createElement("th",null,"Overall"),React.createElement("th",null,"Credits")),React.createElement("tr",null,React.createElement("td",null),React.createElement("td",null),React.createElement("td",null),React.createElement("td",null),React.createElement("td",null),React.createElement("td",null),React.createElement("td",null),React.createElement("td",null),React.createElement("td",null),React.createElement("td",null),React.createElement("td",null),React.createElement("td",null),React.createElement("td",null),React.createElement("td",null))),React.createElement("tbody",null))))}});window.ProjectRecruitmentEncodingSummaryByEncoderDatatable=ProjectRecruitmentEncodingSummaryByEncoderDatatable;var ProjectRecruitmentEncodingSummaryDatatable=React.createClass({displayName:"ProjectRecruitmentEncodingSummaryDatatable",getInitialState:function(){return{showCreateModal:!1,showEditModal:!1,showRecruitsModal:!1,target:null,typingTimer:null,doneTypingInterval:1500,user:null,filters:{electId:null,provinceCode:null,proId:null}}},componentDidMount:function(){this.loadUser(window.userId),this.initSelect2()},loadUser:function(e){var t=this;t.requestUser=$.ajax({url:Routing.generate("ajax_get_user",{id:e}),type:"GET"}).done(function(e){t.setState({user:e},t.reinitSelect2)})},initSelect2:function(){var e=this;$("#handler_component #election_select2").select2({casesentitive:!1,placeholder:"Select Election...",allowClear:!0,delay:1500,width:"100%",containerCssClass:":all:",ajax:{url:Routing.generate("ajax_select2_elections"),data:function(e){return{searchText:e.term}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.elect_id,text:e.elect_name}})}}}}),$("#handler_component #project_select2").select2({casesentitive:!1,placeholder:"Select Project...",allowClear:!0,delay:1500,width:"100%",containerCssClass:":all:",ajax:{url:Routing.generate("ajax_select2_projects"),data:function(e){return{searchText:e.term}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.pro_id,text:e.pro_name}})}}}}),$("#handler_component #province_select2").select2({casesentitive:!1,placeholder:"Enter Province...",allowClear:!0,delay:1500,width:"100%",containerCssClass:":all:",ajax:{url:Routing.generate("ajax_select2_province_strict"),data:function(e){return{searchText:e.term}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.province_code,text:e.name}})}}}}),$("#handler_component #election_select2").on("change",function(){var t=e.state.filters;t.electId=$(this).val(),e.setState({filters:t},e.reload)}),$("#handler_component #project_select2").on("change",function(){var t=e.state.filters;t.proId=$(this).val(),e.setState({filters:t},e.reload)}),$("#voter_table #province_select2").on("change",function(){var t=e.state.filters;t.provinceCode=$(this).val(),e.setState({filters:t},e.reload)})},reinitSelect2:function(){var e=this;if(!e.isEmpty(e.state.user.project)){var t=e.state.user.project.provinceCode;e.requestProvince=$.ajax({url:Routing.generate("ajax_get_province",{provinceCode:t}),type:"GET"}).done(function(e){$("#handler_component #province_select2").empty().append($("<option/>").val(e.province_code).text(e.name)).trigger("change")}),e.requestProject=$.ajax({url:Routing.generate("ajax_get_project",{proId:e.state.user.project.proId}),type:"GET"}).done(function(t){$("#handler_component #project_select2").empty().append($("<option/>").val(t.proId).text(t.proName)).trigger("change"),e.initDatatable()})}e.requestActiveElection=$.ajax({url:Routing.generate("ajax_get_active_election"),type:"GET"}).done(function(e){$("#handler_component #election_select2").empty().append($("<option/>").val(e.electId).text(e.electName)).trigger("change")}),e.state.user.isAdmin||($("#handler_component #election_select2").attr("disabled","disabled"),$("#handler_component #province_select2").attr("disabled","disabled"),$("#handler_component #project_select2").attr("disabled","disabled"))},initDatatable:function(){var e=this,t=(new Datatable,$("#project_recruitment_summary_table")),a=new Datatable,n=Routing.generate("ajax_get_datatable_project_recruitment_encoding_summary",{},!0);a.init({src:t,loadingMessage:"Loading...",dataTable:{bState:!0,autoWidth:!0,deferRender:!0,ajax:{url:n,type:"GET",data:function(e){e.electId=$("#handler_component #election_select2").val(),e.provinceCode=$("#handler_component #province_select2").val(),e.proId=$("#handler_component #project_select2").val()}},columnDefs:[{orderable:!1,targets:[0,2,3,4,5]},{className:"align-center",targets:[0,3]}],order:[[0,"desc"]],columns:[{data:null,className:"text-center",width:30,render:function(e,t,a,n){return n.settings._iDisplayStart+n.row+1}},{data:"entry_date",render:function(e){return moment(new Date(e)).format("MMMM DD, YYYY")}},{data:"total_recruiter",className:"text-center",width:150},{data:"total_recruits",className:"text-center",width:180},{data:"total_with_cellphone",className:"text-center",width:150},{data:"total_members",className:"text-center",width:50,render:function(e,t,a){return(a.total_with_cellphone/a.total_recruits*100).toFixed(2)}}]}}),t.on("click",".recruits-button",function(){var t=a.getDataTable().row($(this).parents("tr")).data();e.setState({showRecruitsModal:!0,target:t.rec_id})}),t.on("click",".delete-button",function(){var t=a.getDataTable().row($(this).parents("tr")).data();e.delete(t.rec_id)}),e.grid=a},closeCreateModal:function(){this.setState({showCreateModal:!1,target:null})},closeRecruitsModal:function(){this.setState({showRecruitsModal:!1,target:null})},openCreateModal:function(){this.setState({showCreateModal:!0})},delete:function(e){var t=this;confirm("Are you sure you want to delete this record ?")&&(t.requestDelete=$.ajax({url:Routing.generate("ajax_delete_project_recruitment_header",{recId:e}),type:"DELETE"}).done(function(e){t.reload()}))},handleFilterChange:function(){console.log("filter has been changed");var e=this;clearTimeout(this.state.typingTimer),this.state.typingTimer=setTimeout(function(){console.log("try reload"),e.reload()},this.state.doneTypingInterval)},reload:function(){null!=this.grid&&(console.log("reloading datatable"),this.grid.getDataTable().ajax.reload())},isEmpty:function(e){return null==e||""==e||"undefined"==e||e<=0},render:function(){return React.createElement("div",null,React.createElement("div",{className:"row",id:"handler_component"},React.createElement("div",{className:"col-md-6 col-md-offset-6"},React.createElement("form",{onSubmit:this.onApplyCode},React.createElement("div",{className:"col-md-4"},React.createElement("select",{id:"election_select2",className:"form-control form-filter input-sm"})),React.createElement("div",{className:"col-md-4"},React.createElement("select",{id:"province_select2",className:"form-control form-filter input-sm"})),React.createElement("div",{className:"col-md-4"},React.createElement("select",{id:"project_select2",className:"form-control form-filter input-sm"}))))),React.createElement("div",{className:"table-container",style:{marginTop:"20px"}},React.createElement("table",{id:"project_recruitment_summary_table",className:"table table-striped table-bordered",width:"100%"},React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",null,"No"),React.createElement("th",null,"Entry Date"),React.createElement("th",{className:"text-center"},"Total Encoded Forms"),React.createElement("th",{className:"text-center"},"Total Encoded Recruits"),React.createElement("th",{className:"text-center"},"With Cellphone No"),React.createElement("th",{className:"text-center"},"%")),React.createElement("tr",null,React.createElement("td",null),React.createElement("td",null),React.createElement("td",null),React.createElement("td",null),React.createElement("td",null),React.createElement("td",null))),React.createElement("tbody",null))))}});window.ProjectRecruitmentEncodingSummaryDatatable=ProjectRecruitmentEncodingSummaryDatatable;var ProjectRecruitmentEncodingSummaryComponent=React.createClass({displayName:"ProjectRecruitmentEncodingSummaryComponent",getInitialState:function(){return{totalRecruit:0,totalRecruiter:0}},notify:function(e,t){$.notific8("zindex",11500),$.notific8(e,{heading:"System Message",color:t,life:5e3,verticalEdge:"right",horizontalEdge:"top"})},componentDidMount:function(){var e=this;e.requestEncodingStatus=$.ajax({url:Routing.generate("ajax_get_project_recruitment_status"),type:"GET"}).done(function(t){console.log("status has been received"),e.setState({totalRecruit:parseFloat(t.totalRecruit)})})},render:function(){return React.createElement("div",{className:"portlet light portlet-fit bordered"},React.createElement("div",{className:"portlet-body"},React.createElement("div",{className:"row",style:{marginBottom:"20px"}},React.createElement("div",{className:"col-md-6"},"Recruitment Encoding Summary"),React.createElement("div",{className:"col-md-6 text-right"},React.createElement("span",{style:{marginLeft:"10px"}},React.createElement("span",{className:"bold font-red-sunglo"},"Today's Total Encoded :  ")," ",React.createElement("strong",null,this.numberWithCommas(this.state.totalRecruit))))),React.createElement(ProjectRecruitmentEncodingSummaryByEncoderDatatable,null)))},numberWithCommas:function(e){var t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")}});setTimeout(function(){ReactDOM.render(React.createElement(ProjectRecruitmentEncodingSummaryComponent,null),document.getElementById("page-container"))},500);