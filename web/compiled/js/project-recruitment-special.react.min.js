var Modal=ReactBootstrap.Modal,FormGroup=ReactBootstrap.FormGroup,HelpBlock=ReactBootstrap.HelpBlock,ControlLabel=ReactBootstrap.ControlLabel,FormControl=ReactBootstrap.FormControl,VoterEditModal=React.createClass({displayName:"VoterEditModal",getInitialState:function(){return{form:{data:{category:"",cellphone:"",organization:"",voterGroup:""},errors:[]},voter:null}},render:function(){if(!this.isEmpty(this.state.voter))var e=window.imgUrl+this.props.proId+"_"+this.state.voter.proIdCode+"?"+(new Date).getTime();return React.createElement(Modal,{keyboard:!1,enforceFocus:!1,bsSize:"lg",backdrop:"static",show:this.props.show,onHide:this.props.onHide},React.createElement(Modal.Header,{className:"modal-header bg-blue-dark font-white",closeButton:!0},React.createElement(Modal.Title,null,"Update Form")),React.createElement(Modal.Body,{bsClass:"modal-body overflow-auto"},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-3"},React.createElement("div",null,React.createElement("a",{href:e,"data-lightbox":"Profile Photo","data-title":"Profile Photo"},React.createElement("img",{src:e,className:"img-responsive",alt:""}))),React.createElement("div",{className:"profile-userbuttons",style:{marginTop:"10px"}},React.createElement("span",{className:"btn col-md-12 green btn-sm fileinput-button "},React.createElement("span",null," Change Photo"),React.createElement("input",{id:"voter-photo-upload",type:"file",name:"files[]","data-url":Routing.generate("ajax_upload_project_voter_photo",{proId:this.props.proId,voterId:this.props.voterId}),multiple:!1}))),!this.isEmpty(this.state.voter)&&this.isEmpty(this.state.voter.proIdCode)&&React.createElement("div",null,React.createElement("button",{className:"btn btn-primary btn-sm col-md-12",onClick:this.generateIdNo,style:{marginTop:"10px"}},"Generate ID No")),!this.isEmpty(this.state.voter)&&this.state.voter.hasId&&React.createElement("div",null,React.createElement("button",{className:"btn btn-info btn-sm col-md-12",onClick:this.resetId,style:{marginTop:"10px"}},"Reprint ID")),!this.isEmpty(this.state.voter)&&React.createElement("div",{style:{marginTop:"90px"}},React.createElement("div",null,React.createElement("small",null,React.createElement("strong",null,"Name : ")," ",this.state.voter.voterName," ")),React.createElement("div",null,React.createElement("small",null,React.createElement("strong",null,"Municipality :")," ",this.state.voter.municipalityName)),React.createElement("div",null,React.createElement("small",null,React.createElement("strong",null,"Barangay :")," ",this.state.voter.barangayName)))),React.createElement("div",{className:"col-md-9"},React.createElement("form",{id:"voter-updated-form"},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-12"},React.createElement("div",{className:"col-md-6"},React.createElement(FormGroup,{controlId:"formProIdCode",validationState:this.getValidationState("proIdCode")},React.createElement(ControlLabel,null," ID No : "),React.createElement(FormControl,{bsClass:"form-control input-sm",name:"proIdCode",value:this.state.form.data.proIdCode,onChange:this.setFormProp}),React.createElement(HelpBlock,null,this.getError("proIdCode")))),React.createElement("div",{className:"col-md-6"},React.createElement(FormGroup,{controlId:"formAssignedPrecinct",validationState:this.getValidationState("assignedPrecinct")},React.createElement(ControlLabel,null," Assigned Precinct : "),React.createElement(FormControl,{bsClass:"form-control input-sm",name:"assignedPrecinct",value:this.state.form.data.assignedPrecinct,onChange:this.setFormProp}),React.createElement(HelpBlock,null,this.getError("assignedPrecinct")))))),React.createElement("div",{className:"clearfix"}),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-12"},React.createElement("div",{className:"col-md-6"},React.createElement(FormGroup,{controlId:"formVoterGroup",validationState:this.getValidationState("voterGroup")},React.createElement(ControlLabel,null,"Position : "),React.createElement("select",{id:"voter-group-select2",className:"form-control input-sm"},React.createElement("option",{value:""}," ")),React.createElement(HelpBlock,null,this.getError("voterGroup")))),React.createElement("div",{className:"col-md-6"},React.createElement(FormGroup,{controlId:"formCellphone",validationState:this.getValidationState("cellphone")},React.createElement(ControlLabel,null," Cellphone : "),React.createElement(FormControl,{bsClass:"form-control input-sm",name:"cellphone",value:this.state.form.data.cellphone,onChange:this.setFormProp}),React.createElement(HelpBlock,null,this.getError("cellphone")))))),React.createElement("div",{className:"clearfix"}),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-12"},React.createElement("div",{className:"col-md-12"},React.createElement(FormGroup,{controlId:"formRemarks",validationState:this.getValidationState("remarks")},React.createElement(ControlLabel,null," Remarks : "),React.createElement(FormControl,{componentClass:"textarea",rows:"5",bsClass:"form-control input-sm",name:"remarks",value:this.state.form.data.remarks,onChange:this.setFormProp}),React.createElement(HelpBlock,null,this.getError("remarks")))))),React.createElement("div",{className:"text-right col-md-12"},React.createElement("button",{type:"button",className:"btn  btn-default",style:{marginRight:"5px"},onClick:this.props.onHide},"Close"),React.createElement("button",{type:"button",className:"btn blue-madison",onClick:this.submit},"Submit")))))))},componentDidMount:function(){this.loadVoter(this.props.proId,this.props.voterId),this.initSelect2(),this.initUploader()},loadVoter:function(e,t){var a=this;a.requestVoter=$.ajax({url:Routing.generate("ajax_get_project_voter",{voterId:t,proId:e}),type:"GET"}).done(function(e){var t=a.state.form;t.data.cellphone=e.cellphoneNo,t.data.category=e.category,t.data.organization=e.organization,t.data.voterGroup=e.voterGroup,t.data.proIdCode=e.proIdCode,t.data.assignedPrecinct=e.assignedPrecinct,t.data.remarks=e.remarks,a.setState({form:t,voter:e},a.reinitSelect2)})},initSelect2:function(){$("#voter-group-select2").select2({casesentitive:!1,placeholder:"Enter Group",width:"100%",allowClear:!0,tags:!0,containerCssClass:":all:",createTag:function(e){return{id:e.term,text:e.term,newOption:!0}},ajax:{url:Routing.generate("ajax_select2_voter_group"),data:function(e){return{searchText:e.term}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.voter_group,text:e.voter_group}})}}}});var e=this;$("#voter-group-select2").on("change",function(){e.setFieldValue("voterGroup",$(this).val())})},reinitSelect2:function(){var e=this.state.form.data.voterGroup;$("#voter-group-select2").empty().append($("<option />").val(e).text(e)).trigger("change")},initUploader:function(){var e=this;$("#voter-photo-upload").fileupload({dataType:"json",done:function(t,a){$.each(a.result.files,function(e,t){$("<p/>").text(t.name).appendTo(document.body)}),e.loadVoter(e.props.proId,e.props.voterId)},progressall:function(e,t){parseInt(t.loaded/t.total*100,10)}})},generateIdNo:function(){var e=this;e.requestVoter=$.ajax({url:Routing.generate("ajax_get_project_voter_generate_id_no",{voterId:e.props.voterId,proId:e.props.proId}),type:"GET"}).done(function(t){alert("ID NO has been created : "+t.proIdCode),e.loadVoter(e.props.proId,e.props.voterId)})},resetId:function(){var e=this;e.requestVoter=$.ajax({url:Routing.generate("ajax_get_project_voter_reset_id",{voterId:e.props.voterId,proId:e.props.proId}),type:"GET"}).done(function(t){alert("You can now re-print this member ID"),e.loadVoter(e.props.proId,e.props.voterId)})},setFormProp:function(e){var t=this.state.form;t.data[e.target.name]=e.target.value,this.setState({form:t})},setFieldValue:function(e,t){var a=this.state.form;a.data[e]=t,this.setState({form:a})},setErrors:function(e){var t=this.state.form;t.errors=e,this.setState({form:t})},getError:function(e){var t=this.state.form.errors;for(var a in t)if(a==e)return t[e];return null},getValidationState:function(e){return null!=this.getError(e)?"error":""},isEmpty:function(e){return null==e||""==e},submit:function(e){e.preventDefault();var t=this,a=t.state.form.data;a.proId=this.props.proId,t.requestPost=$.ajax({url:Routing.generate("ajax_patch_project_voter",{voterId:this.props.voterId,proId:this.props.proId}),type:"PATCH",data:a}).done(function(e){t.props.notify("Record has been updated.","ruby"),t.props.onHide()}).fail(function(e){"401"==e.status?t.props.notify("You dont have the permission to update this record.","ruby"):t.props.notify("Form Validation Failed.","ruby"),t.setErrors(e.responseJSON)})}});window.VoterEditModal=VoterEditModal;var Modal=ReactBootstrap.Modal,FormGroup=ReactBootstrap.FormGroup,HelpBlock=ReactBootstrap.HelpBlock,ControlLabel=ReactBootstrap.ControlLabel,FormControl=ReactBootstrap.FormControl,ProjectRecruitmentSpecialMemberModal=React.createClass({displayName:"ProjectRecruitmentSpecialMemberModal",getInitialState:function(){return{form:{data:{proVoterId:null,voterId:null,cellphone:"",voterGroup:"",assignedPrecinct:"",precinctNo:"",remarks:""},errors:[]},parentNode:null}},componentDidMount:function(){this.initSelect2(),this.loadParentNode(this.props.recId)},initSelect2:function(){var e=this;$("#municipality_select2").select2({casesentitive:!1,placeholder:"Select City/Municipality",allowClear:!0,delay:1500,width:"100%",containerCssClass:":all:",ajax:{url:Routing.generate("ajax_select2_municipality"),data:function(e){return{searchText:e.term,provinceCode:53}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.municipality_no,text:e.name}})}}}}),$("#barangay_select2").select2({casesentitive:!1,placeholder:"Select Barangay",allowClear:!0,delay:1500,width:"100%",containerCssClass:":all:",ajax:{url:Routing.generate("ajax_select2_barangay"),data:function(e){return{searchText:e.term,municipalityNo:$("#municipality_select2").val(),provinceCode:53}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.brgy_no,text:e.name}})}}}}),$("#form-voter-select2").select2({casesentitive:!1,placeholder:"Enter Name...",allowClear:!0,delay:3e3,width:"100%",containerCssClass:":all:",dropdownCssClass:"custom-option",ajax:{url:Routing.generate("ajax_select2_project_voters_strict"),data:function(t){return{searchText:t.term,proId:e.props.proId,municipalityNo:$("#municipality_select2").val(),brgyNo:$("#barangay_select2").val()}},processResults:function(e,t){return{results:e.map(function(e){var t=e.voter_name+" - "+e.precinct_no+" ( "+e.municipality_name+", "+e.barangay_name+" )";return{id:e.voter_id,text:t}})}}}}),$("#voter-group-select2").select2({casesentitive:!1,placeholder:"Enter Group",width:"100%",allowClear:!0,tags:!0,containerCssClass:":all:",createTag:function(e){return{id:e.term,text:e.term,newOption:!0}},ajax:{url:Routing.generate("ajax_select2_voter_group"),data:function(e){return{searchText:e.term}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.voter_group,text:e.voter_group}})}}}}),$("#form-voter-select2").on("change",function(){e.loadVoter(e.props.proId,$(this).val())}),$("#voter-group-select2").on("change",function(){e.setFieldValue("voterGroup",$(this).val())})},loadParentNode:function(e){var t=this;t.requestRecruiter=$.ajax({url:Routing.generate("ajax_get_project_recruitment_special_kcl",{recId:e}),type:"GET"}).done(function(e){t.setState({parentNode:e}),t.reInitSelect2(e)})},reInitSelect2:function(e){$("#municipality_select2").empty().append($("<option/>").val(e.municipality_no).text(e.municipality_name)).trigger("change")},loadVoter:function(e,t){var a=this;a.requestVoter=$.ajax({url:Routing.generate("ajax_get_project_voter",{proId:e,voterId:t}),type:"GET"}).done(function(e){var t=a.state.form;t.data.proVoterId=e.proVoterId,t.data.voterId=e.voterId,t.data.cellphone=a.isEmpty(e.cellphoneNo)?a.state.parentNode.cellphone:e.cellphoneNo,t.data.voterGroup=a.isEmpty(e.voterGroup)?"KCL3":e.voterGroup,t.data.assignedPrecinct=a.isEmpty(e.assignedPrecinct)?"":e.assignedPrecinct,t.data.precinctNo=a.isEmpty(e.precinctNo)?"":e.precinctNo,t.data.remarks=e.remarks,$("#voter-group-select2").empty().append($("<option/>").val(t.data.voterGroup).text(t.data.voterGroup)).trigger("change"),a.setState({form:t})});var r=a.state.form;r.data.proVoterId=null,r.data.voterId=null,r.data.cellphone="",r.data.voterGroup="",r.data.remarks="",a.setState({form:r})},reset:function(){var e=this.state.form;e.data.proVoterId="",e.data.cellphone="",e.data.remarks="",e.errors=[],$("#form-voter-select2").empty().trigger("change"),this.setState({form:e})},setFormProp:function(e){var t=this.state.form;t.data[e.target.name]=e.target.value,this.setState({form:t})},setFieldValue:function(e,t){var a=this.state.form;a.data[e]=t,this.setState({form:a})},setErrors:function(e){var t=this.state.form;t.errors=e,this.setState({form:t})},getError:function(e){var t=this.state.form.errors;for(var a in t)if(a==e)return t[e];return null},getValidationState:function(e){return null!=this.getError(e)?"error":""},isEmpty:function(e){return null==e||""==e},submit:function(e){e.preventDefault();var t=this,a=t.state.form.data;a.recId=t.props.recId,a.proId=t.props.proId,t.requestAddAttendee=$.ajax({url:Routing.generate("ajax_post_project_recruitment_special_household_member"),type:"POST",data:a}).done(function(e){t.reset(),t.props.onSuccess(),t.props.notify("Member has been added.","teal")}).fail(function(e){"401"==e.status?t.props.notify("You dont have the permission to update this record.","ruby"):t.props.notify("Form Validation Failed.","ruby"),t.setErrors(e.responseJSON)})},render:function(){var e=this;e.state.form.data;return React.createElement(Modal,{keyboard:!1,enforceFocus:!1,dialogClassName:"modal-custom-40",backdrop:"static",show:this.props.show,onHide:this.props.onHide},React.createElement(Modal.Header,{className:"modal-header bg-blue-dark font-white",closeButton:!0},React.createElement(Modal.Title,null,"Household Member Form")),React.createElement(Modal.Body,{bsClass:"modal-body overflow-auto"},React.createElement("form",{id:"voter-node-form",onSubmit:this.submit},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-12"},React.createElement("div",{className:"col-md-6",style:{paddingLeft:"0"}},React.createElement(FormGroup,{controlId:"formMunicipalityNo"},React.createElement(ControlLabel,null," Municipality : "),React.createElement("select",{id:"municipality_select2",className:"form-control form-filter input-sm",name:"municipalityNo"}))),React.createElement("div",{className:"col-md-6",style:{paddingRight:"0"}},React.createElement(FormGroup,{controlId:"formBrgyNo"},React.createElement(ControlLabel,null," Barangay : "),React.createElement("select",{id:"barangay_select2",className:"form-control form-filter input-sm",name:"brgyNo"}))),React.createElement(FormGroup,{controlId:"formProVoterId",validationState:this.getValidationState("proVoterId")},React.createElement(ControlLabel,null," Voter Name : "),React.createElement("select",{id:"form-voter-select2",className:"form-control input-sm"}),React.createElement(HelpBlock,null,this.getError("proVoterId"))),React.createElement("div",{className:"col-md-6",style:{paddingLeft:"0"}},React.createElement(FormGroup,{controlId:"formCellphone",validationState:this.getValidationState("cellphone")},React.createElement(ControlLabel,null," Cellphone No : "),React.createElement("input",{type:"text",placeholder:"Example : 09283182013",value:this.state.form.data.cellphone,className:"input-sm form-control",onChange:this.setFormProp,name:"cellphone"}),React.createElement(HelpBlock,null,this.getError("cellphone")))),React.createElement("div",{className:"col-md-6",style:{paddingRight:"0"}},React.createElement(FormGroup,{controlId:"formVoterGroup",validationState:this.getValidationState("voterGroup")},React.createElement(ControlLabel,null,"Position : "),React.createElement("select",{id:"voter-group-select2",className:"form-control input-sm"},React.createElement("option",{value:""}," ")),React.createElement(HelpBlock,null,this.getError("voterGroup")))),React.createElement(FormGroup,{controlId:"formRemarks",validationState:this.getValidationState("remarks")},React.createElement(ControlLabel,null," Remarks : "),React.createElement("textarea",{rows:"5",value:this.state.form.data.remarks,className:"input-sm form-control",onChange:this.setFormProp,name:"remarks"}),React.createElement(HelpBlock,null,this.getError("remarks"))))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-12 text-right"},React.createElement("button",{className:"btn btn-primary btn-sm",disabled:this.isEmpty(this.state.form.data.proVoterId),type:"submit"}," Submit "),React.createElement("button",{className:"btn btn-default btn-sm",type:"button",onClick:this.props.onHide}," Close "))))))}});window.ProjectRecruitmentSpecialMemberModal=ProjectRecruitmentSpecialMemberModal;var ProjectRecruitmentHouseholdMemberDatatable=React.createClass({displayName:"ProjectRecruitmentHouseholdMemberDatatable",getInitialState:function(){return{target:null,typingTimer:null,doneTypingInterval:1500,showEditModal:!1,showMemberModal:!1}},componentDidMount:function(){this.initDatatable(this.props.recId)},initDatatable:function(e){var t=this,a=(new Datatable,$("#project_recruitment_household_member_datatable")),r=new Datatable,o=Routing.generate("ajax_datatable_recruitment_special_household_member_datatable",!0);r.init({src:a,loadingMessage:"Loading...",dataTable:{bState:!0,autoWidth:!0,deferRender:!0,ajax:{url:o,type:"GET",data:function(a){a.provinceCode="53",a.proId=t.props.proId,a.parentNode=e,a.voterName=$('#project_recruitment_household_member_datatable input[name="voterName"]').val(),a.voterGroup=$('#project_recruitment_household_member_datatable input[name="voterGroup"]').val(),a.barangayName=$('#project_recruitment_household_member_datatable input[name="barangayName"]').val(),a.precinctNo=$('#project_recruitment_household_member_datatable input[name="precinctNo"]').val(),a.assignedPrecinct=$('#project_recruitment_household_member_datatable input[name="assignedPrecinct"]').val()}},columnDefs:[{orderable:!1,targets:[0,2,3,4,5,6,7,8,9,10,11,12,13,14]},{className:"align-center",targets:[0,3]}],order:[[1,"desc"]],columns:[{data:null,className:"text-center",width:20,render:function(e,t,a,r){return r.settings._iDisplayStart+r.row+1}},{data:"voter_name",className:"text-center",width:150,render:function(e,a,r){return'<img src="'+(window.imgUrl+t.props.proId)+"_"+r.pro_id_code+"?"+(new Date).getTime()+'" style="width:80px;height:auto;"/><strong style="margin-top:10px;"><br/>'+e+"</strong>"}},{data:"voter_group",className:"text-center",width:30},{data:"is_1",className:"text-center",width:30,render:function(e,t,a){return'<label class="mt-checkbox status-checkbox"><input type="checkbox" name="is1" '+(1==parseInt(e)?' checked="checked" ':"")+' value="'+a.rec_id+'"></input><span></span></label>'}},{data:"is_2",className:"text-center",width:30,render:function(e,t,a){return'<label class="mt-checkbox status-checkbox"><input type="checkbox" name="is2" '+(1==parseInt(e)?' checked="checked" ':"")+' value="'+a.rec_id+'"></input><span></span></label>'}},{data:"is_3",className:"text-center",width:30,render:function(e,t,a){return'<label class="mt-checkbox status-checkbox"><input type="checkbox" name="is3" '+(1==parseInt(e)?' checked="checked" ':"")+' value="'+a.rec_id+'"></input><span></span></label>'}},{data:"is_4",className:"text-center",width:30,render:function(e,t,a){return'<label class="mt-checkbox status-checkbox"><input type="checkbox" name="is4" '+(1==parseInt(e)?' checked="checked" ':"")+' value="'+a.rec_id+'"></input><span></span></label>'}},{data:"is_5",className:"text-center",width:30,render:function(e,t,a){return'<label class="mt-checkbox status-checkbox"><input type="checkbox" name="is5" '+(1==parseInt(e)?' checked="checked" ':"")+' value="'+a.rec_id+'"></input><span></span></label>'}},{data:"is_6",className:"text-center",width:30,render:function(e,t,a){return'<label class="mt-checkbox status-checkbox"><input type="checkbox" name="is6" '+(1==parseInt(e)?' checked="checked" ':"")+' value="'+a.rec_id+'"></input><span></span></label>'}},{data:"is_7",className:"text-center",width:30,render:function(e,t,a){return'<label class="mt-checkbox status-checkbox"><input type="checkbox" name="is7" '+(1==parseInt(e)?' checked="checked" ':"")+' value="'+a.rec_id+'"></input><span></span></label>'}},{data:"barangay_name",className:"text-center",width:150},{data:"precinct_no",className:"text-center",width:"10px",width:60},{data:"assigned_precinct",className:"text-center",width:"10px",width:60},{data:"cellphone",className:"text-center",width:100},{width:80,render:function(e,t,a){return"<a href='javascript:void(0);' class='btn btn-xs font-white bg-primary edit-button' data-toggle='tooltip' data-title='Edit'><i class='fa fa-edit' ></i></a><a href='javascript:void(0);' class='btn btn-xs font-white bg-red-sunglo delete-button' data-toggle='tooltip' data-title='Delete'><i class='fa fa-trash' ></i></a>"}}]}}),a.on("click",".status-checkbox",function(e){var a=e.target.value,r=e.target.checked,o=e.target.name,n=r?1:0;null!=a&&null!=r&&t.patchStatus(a,o,n)}),a.on("click",".member-button",function(){var e=r.getDataTable().row($(this).parents("tr")).data();t.setState({showMemberModal:!0,target:e.rec_id})}),a.on("click",".delete-button",function(){var e=r.getDataTable().row($(this).parents("tr")).data();t.delete(e.rec_id)}),a.on("click",".edit-button",function(){var e=r.getDataTable().row($(this).parents("tr")).data();t.edit(e.voter_id)}),t.grid=r},patchStatus:function(e,t,a){var r=this,o={};o[t]=a,r.requestToggleRequirement=$.ajax({url:Routing.generate("ajax_patch_recruitment_special_status",{recId:e}),type:"PATCH",data:o}).done(function(e){console.log("requirement patched")})},edit:function(e){this.setState({showEditModal:!0,target:e})},closeEditModal:function(){this.reload(),this.setState({showEditModal:!1,target:null})},delete:function(e){var t=this;confirm("Are you sure you want to remove this member ?")&&(t.requestDelete=$.ajax({url:Routing.generate("ajax_delete_project_recruitment_special_household",{recId:e}),type:"DELETE"}).done(function(e){t.reload()}))},handleFilterChange:function(){var e=this;clearTimeout(this.state.typingTimer),this.state.typingTimer=setTimeout(function(){e.reload()},this.state.doneTypingInterval)},reload:function(){this.grid.getDataTable().ajax.reload()},reloadFiltered:function(e){var t=this;$('#project_recruitment_household_member_datatable input[name="assignedPrecinct"]').val(e),setTimeout(function(){t.grid.getDataTable().ajax.reload()})},isEmpty:function(e){return null==e||""==e||"undefined"==e||e<=0},closeMemberModal:function(){this.setState({showMemberModal:!1,target:null})},handleFilterChange:function(){var e=this;clearTimeout(this.state.typingTimer),this.state.typingTimer=setTimeout(function(){e.reload()},this.state.doneTypingInterval)},render:function(){return React.createElement("div",null,this.state.showMemberModal&&React.createElement(ProjectRecruitmentSpecialKclHouseholdModal,{proId:this.props.proId,electId:this.props.electId,provinceCode:this.props.provinceCode,recId:this.state.target,show:this.state.showMemberModal,notify:this.props.notify,reload:this.reload,onHide:this.closeMemberModal}),this.state.showEditModal&&React.createElement(VoterEditModal,{show:this.state.showEditModal,onHide:this.closeEditModal,notify:this.props.notify,voterId:this.state.target,proId:this.props.proId}),React.createElement("div",{className:"table-container",style:{marginTop:"20px"}},React.createElement("table",{id:"project_recruitment_household_member_datatable",className:"table table-striped table-bordered",width:"100%"},React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",null,"No"),React.createElement("th",null,"Name"),React.createElement("th",null,"POS"),React.createElement("th",null,"1"),React.createElement("th",null,"2"),React.createElement("th",null,"3"),React.createElement("th",null,"4"),React.createElement("th",null,"5"),React.createElement("th",null,"6"),React.createElement("th",null,"7"),React.createElement("th",null,"Barangay"),React.createElement("th",null,"Precinct"),React.createElement("th",null,"Assigned"),React.createElement("th",null,"CP"),React.createElement("th",null)),React.createElement("tr",null,React.createElement("td",null),React.createElement("td",{style:{padding:"10px 5px"}},React.createElement("input",{type:"text",className:"form-control form-filter input-sm",name:"voterName",onChange:this.handleFilterChange})),React.createElement("td",null,React.createElement("input",{type:"text",className:"form-control form-filter input-sm",name:"voterGroup",onChange:this.handleFilterChange})),React.createElement("td",null),React.createElement("td",null),React.createElement("td",null),React.createElement("td",null),React.createElement("td",null),React.createElement("td",null),React.createElement("td",null),React.createElement("td",null,React.createElement("input",{type:"text",className:"form-control form-filter input-sm",name:"barangayName",onChange:this.handleFilterChange})),React.createElement("td",null,React.createElement("input",{type:"text",className:"form-control form-filter input-sm",name:"precinctNo",onChange:this.handleFilterChange})),React.createElement("td",null,React.createElement("input",{type:"text",className:"form-control form-filter input-sm",name:"assignedPrecinct",onChange:this.handleFilterChange})),React.createElement("td",null),React.createElement("td",null))),React.createElement("tbody",null))))}});window.ProjectRecruitmentHouseholdMemberDatatable=ProjectRecruitmentHouseholdMemberDatatable;var Modal=ReactBootstrap.Modal,FormGroup=ReactBootstrap.FormGroup,HelpBlock=ReactBootstrap.HelpBlock,ControlLabel=ReactBootstrap.ControlLabel,FormControl=ReactBootstrap.FormControl,ProjectRecruitmentSpecialKclHouseholdModal=React.createClass({displayName:"ProjectRecruitmentSpecialKclHouseholdModal",getInitialState:function(){return{member:null,showAddMemberModal:!1,header:{voter_name:"",barangay_name:"",municipality_name:"",voter_group:""}}},render:function(){return React.createElement(Modal,{style:{marginTop:"90px"},keyboard:!1,dialogClassName:"modal-custom-85",enforceFocus:!1,backdrop:"static",show:this.props.show,onHide:this.props.onHide},React.createElement(Modal.Header,{className:"modal-header bg-blue-dark font-white",closeButton:!0},React.createElement(Modal.Title,null,"Household Recruitment Modal")),React.createElement(Modal.Body,{bsClass:"modal-body overflow-auto"},this.state.showAddMemberModal&&React.createElement(ProjectRecruitmentSpecialMemberModal,{proId:this.props.proId,recId:this.props.recId,show:this.state.showAddMemberModal,notify:this.props.notify,onSuccess:this.reloadDatatable,onHide:this.closeAddMemberModal}),React.createElement("div",{style:{marginBottom:"25px"}},React.createElement("strong",null,"Recruiter Name : ")," ",this.state.header.voter_name," ",React.createElement("br",null),React.createElement("strong",null,"Position  : ")," ",this.state.header.voter_group," ",React.createElement("br",null),React.createElement("strong",null,"Municipality : ")," ",this.state.header.municipality_name," ",React.createElement("br",null),React.createElement("strong",null,"Barangay : "),"  ",this.state.header.barangay_name," ",React.createElement("br",null)),React.createElement("div",{className:"col-md-7",style:{paddingLeft:"0px",marginBottom:"10px"}},React.createElement("button",{onClick:this.openAddMemberModal,type:"button",className:"btn btn-sm btn-primary"},"New Household Member")),React.createElement(ProjectRecruitmentHouseholdMemberDatatable,{ref:"MemberDatatable",proId:this.props.proId,notify:this.props.notify,recId:this.props.recId})))},componentDidMount:function(){this.loadKCL(this.props.recId)},loadKCL:function(e){var t=this;t.requestRecruiter=$.ajax({url:Routing.generate("ajax_get_project_recruitment_special_kcl",{recId:e}),type:"GET"}).done(function(e){t.setState({header:e})})},setFormProp:function(e){this.setState({proIdCode:e.target.value},this.search)},reloadDatatable:function(){this.refs.MemberDatatable.reload()},openAddMemberModal:function(){this.setState({showAddMemberModal:!0})},closeAddMemberModal:function(){this.setState({showAddMemberModal:!1})}});window.ProjectRecruitmentSpecialKclHouseholdModal=ProjectRecruitmentSpecialKclHouseholdModal;var ProjectRecruitmentHouseholdDatatable=React.createClass({displayName:"ProjectRecruitmentHouseholdDatatable",getInitialState:function(){return{target:null,typingTimer:null,doneTypingInterval:1500,showEditModal:!1,showMemberModal:!1}},componentDidMount:function(){this.initDatatable(this.props.recId)},initDatatable:function(e){var t=this,a=(new Datatable,$("#project_recruitment_household_datatable")),r=new Datatable,o=Routing.generate("ajax_datatable_recruitment_special_household_datatable",!0);r.init({src:a,loadingMessage:"Loading...",dataTable:{bState:!0,autoWidth:!0,deferRender:!0,ajax:{url:o,type:"GET",data:function(a){a.provinceCode="53",a.proId=t.props.proId,a.parentNode=e,a.voterName=$('#project_recruitment_household_datatable input[name="voterName"]').val(),a.voterGroup=$('#project_recruitment_household_datatable input[name="voterGroup"]').val(),a.barangayName=$('#project_recruitment_household_datatable input[name="barangayName"]').val(),a.precinctNo=$('#project_recruitment_household_datatable input[name="precinctNo"]').val(),a.assignedPrecinct=$('#project_recruitment_household_datatable input[name="assignedPrecinct"]').val()}},columnDefs:[{orderable:!1,targets:[0,2,3,4,5,6,7,8,9,10,11,12,13,14]},{className:"align-center",targets:[0,3]}],order:[[1,"desc"]],columns:[{data:null,className:"text-center",width:20,render:function(e,t,a,r){return r.settings._iDisplayStart+r.row+1}},{data:"voter_name",className:"text-center",width:150,render:function(e,a,r){return'<img src="'+(window.imgUrl+t.props.proId)+"_"+r.pro_id_code+"?"+(new Date).getTime()+'" style="width:80px;height:auto;"/><strong style="margin-top:10px;"><br/>'+e+"</strong>"}},{data:"voter_group",className:"text-center",width:30},{data:"is_1",className:"text-center",width:30,render:function(e,t,a){return'<label class="mt-checkbox status-checkbox"><input type="checkbox" name="is1" '+(1==parseInt(e)?' checked="checked" ':"")+' value="'+a.rec_id+'"></input><span></span></label>'}},{data:"is_2",className:"text-center",width:30,render:function(e,t,a){return'<label class="mt-checkbox status-checkbox"><input type="checkbox" name="is2" '+(1==parseInt(e)?' checked="checked" ':"")+' value="'+a.rec_id+'"></input><span></span></label>'}},{data:"is_3",className:"text-center",width:30,render:function(e,t,a){return'<label class="mt-checkbox status-checkbox"><input type="checkbox" name="is3" '+(1==parseInt(e)?' checked="checked" ':"")+' value="'+a.rec_id+'"></input><span></span></label>'}},{data:"is_4",className:"text-center",width:30,render:function(e,t,a){return'<label class="mt-checkbox status-checkbox"><input type="checkbox" name="is4" '+(1==parseInt(e)?' checked="checked" ':"")+' value="'+a.rec_id+'"></input><span></span></label>'}},{data:"is_5",className:"text-center",width:30,render:function(e,t,a){return'<label class="mt-checkbox status-checkbox"><input type="checkbox" name="is5" '+(1==parseInt(e)?' checked="checked" ':"")+' value="'+a.rec_id+'"></input><span></span></label>'}},{data:"is_6",className:"text-center",width:30,render:function(e,t,a){return'<label class="mt-checkbox status-checkbox"><input type="checkbox" name="is6" '+(1==parseInt(e)?' checked="checked" ':"")+' value="'+a.rec_id+'"></input><span></span></label>'}},{data:"is_7",className:"text-center",width:30,render:function(e,t,a){
return'<label class="mt-checkbox status-checkbox"><input type="checkbox" name="is7" '+(1==parseInt(e)?' checked="checked" ':"")+' value="'+a.rec_id+'"></input><span></span></label>'}},{data:"barangay_name",className:"text-center",width:150},{data:"precinct_no",className:"text-center",width:"10px",width:60},{data:"assigned_precinct",className:"text-center",width:"10px",width:60},{data:"cellphone",className:"text-center",width:100},{width:80,render:function(e,t,a){return"<a href='javascript:void(0);' class='btn btn-xs font-white bg-primary edit-button' data-toggle='tooltip' data-title='Edit'><i class='fa fa-edit' ></i></a><a href='javascript:void(0);' class='btn btn-xs font-white bg-green member-button' data-toggle='tooltip' data-title='Edit'><i class='fa fa-calendar'></i></a><a href='javascript:void(0);' class='btn btn-xs font-white bg-red-sunglo delete-button' data-toggle='tooltip' data-title='Delete'><i class='fa fa-trash' ></i></a>"}}]}}),a.on("click",".status-checkbox",function(e){var a=e.target.value,r=e.target.checked,o=e.target.name,n=r?1:0;null!=a&&null!=r&&t.patchStatus(a,o,n)}),a.on("click",".member-button",function(){var e=r.getDataTable().row($(this).parents("tr")).data();t.setState({showMemberModal:!0,target:e.rec_id})}),a.on("click",".delete-button",function(){var e=r.getDataTable().row($(this).parents("tr")).data();t.delete(e.rec_id)}),a.on("click",".edit-button",function(){var e=r.getDataTable().row($(this).parents("tr")).data();t.edit(e.voter_id)}),t.grid=r},patchStatus:function(e,t,a){var r=this,o={};o[t]=a,r.requestToggleRequirement=$.ajax({url:Routing.generate("ajax_patch_recruitment_special_status",{recId:e}),type:"PATCH",data:o}).done(function(e){console.log("requirement patched")})},edit:function(e){this.setState({showEditModal:!0,target:e})},closeEditModal:function(){this.reload(),this.setState({showEditModal:!1,target:null})},delete:function(e){var t=this;confirm("Are you sure you want to remove this member ?")&&(t.requestDelete=$.ajax({url:Routing.generate("ajax_delete_project_recruitment_special_household",{recId:e}),type:"DELETE"}).done(function(e){t.reload()}))},handleFilterChange:function(){var e=this;clearTimeout(this.state.typingTimer),this.state.typingTimer=setTimeout(function(){e.reload()},this.state.doneTypingInterval)},reload:function(){this.grid.getDataTable().ajax.reload()},reloadFiltered:function(e){var t=this;$('#project_recruitment_household_datatable input[name="assignedPrecinct"]').val(e),setTimeout(function(){t.grid.getDataTable().ajax.reload()})},isEmpty:function(e){return null==e||""==e||"undefined"==e||e<=0},closeMemberModal:function(){this.setState({showMemberModal:!1,target:null})},handleFilterChange:function(){var e=this;clearTimeout(this.state.typingTimer),this.state.typingTimer=setTimeout(function(){e.reload()},this.state.doneTypingInterval)},render:function(){return React.createElement("div",null,this.state.showMemberModal&&React.createElement(ProjectRecruitmentSpecialKclHouseholdModal,{proId:this.props.proId,electId:this.props.electId,provinceCode:this.props.provinceCode,recId:this.state.target,show:this.state.showMemberModal,notify:this.props.notify,reload:this.reload,onHide:this.closeMemberModal}),this.state.showEditModal&&React.createElement(VoterEditModal,{show:this.state.showEditModal,onHide:this.closeEditModal,notify:this.props.notify,voterId:this.state.target,proId:this.props.proId}),React.createElement("div",{className:"table-container",style:{marginTop:"20px"}},React.createElement("table",{id:"project_recruitment_household_datatable",className:"table table-striped table-bordered",width:"100%"},React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",null,"No"),React.createElement("th",null,"Name"),React.createElement("th",null,"POS"),React.createElement("th",null,"1"),React.createElement("th",null,"2"),React.createElement("th",null,"3"),React.createElement("th",null,"4"),React.createElement("th",null,"5"),React.createElement("th",null,"6"),React.createElement("th",null,"7"),React.createElement("th",null,"Barangay"),React.createElement("th",null,"Precinct"),React.createElement("th",null,"Assigned"),React.createElement("th",null,"CP"),React.createElement("th",null)),React.createElement("tr",null,React.createElement("td",null),React.createElement("td",{style:{padding:"10px 5px"}},React.createElement("input",{type:"text",className:"form-control form-filter input-sm",name:"voterName",onChange:this.handleFilterChange})),React.createElement("td",null,React.createElement("input",{type:"text",className:"form-control form-filter input-sm",name:"voterGroup",onChange:this.handleFilterChange})),React.createElement("td",null),React.createElement("td",null),React.createElement("td",null),React.createElement("td",null),React.createElement("td",null),React.createElement("td",null),React.createElement("td",null),React.createElement("td",null,React.createElement("input",{type:"text",className:"form-control form-filter input-sm",name:"barangayName",onChange:this.handleFilterChange})),React.createElement("td",null,React.createElement("input",{type:"text",className:"form-control form-filter input-sm",name:"precinctNo",onChange:this.handleFilterChange})),React.createElement("td",null,React.createElement("input",{type:"text",className:"form-control form-filter input-sm",name:"assignedPrecinct",onChange:this.handleFilterChange})),React.createElement("td",null),React.createElement("td",null))),React.createElement("tbody",null))))}});window.ProjectRecruitmentHouseholdDatatable=ProjectRecruitmentHouseholdDatatable;var Modal=ReactBootstrap.Modal,FormGroup=ReactBootstrap.FormGroup,HelpBlock=ReactBootstrap.HelpBlock,ControlLabel=ReactBootstrap.ControlLabel,FormControl=ReactBootstrap.FormControl,ProjectRecruitmentSpecialHouseholdModal=React.createClass({displayName:"ProjectRecruitmentSpecialHouseholdModal",getInitialState:function(){return{form:{data:{proVoterId:null,voterId:null,cellphone:"",voterGroup:"",assignedPrecinct:"",precinctNo:"",remarks:""},errors:[]}}},componentDidMount:function(){this.initSelect2(),this.loadParentNode(this.props.recId)},initSelect2:function(){var e=this;$("#municipality_select2").select2({casesentitive:!1,placeholder:"Select City/Municipality",allowClear:!0,delay:1500,width:"100%",containerCssClass:":all:",ajax:{url:Routing.generate("ajax_select2_municipality"),data:function(e){return{searchText:e.term,provinceCode:53}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.municipality_no,text:e.name}})}}}}),$("#barangay_select2").select2({casesentitive:!1,placeholder:"Select Barangay",allowClear:!0,delay:1500,width:"100%",containerCssClass:":all:",ajax:{url:Routing.generate("ajax_select2_barangay"),data:function(e){return{searchText:e.term,municipalityNo:$("#municipality_select2").val(),provinceCode:53}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.brgy_no,text:e.name}})}}}}),$("#form-voter-select2").select2({casesentitive:!1,placeholder:"Enter Name...",allowClear:!0,delay:3e3,width:"100%",containerCssClass:":all:",dropdownCssClass:"custom-option",ajax:{url:Routing.generate("ajax_select2_project_voters_strict"),data:function(t){return{searchText:t.term,proId:e.props.proId,municipalityNo:$("#municipality_select2").val(),brgyNo:$("#barangay_select2").val()}},processResults:function(e,t){return{results:e.map(function(e){var t=e.voter_name+" - "+e.precinct_no+" ( "+e.municipality_name+", "+e.barangay_name+" )";return{id:e.voter_id,text:t}})}}}}),$("#voter-group-select2").select2({casesentitive:!1,placeholder:"Enter Group",width:"100%",allowClear:!0,tags:!0,containerCssClass:":all:",createTag:function(e){return{id:e.term,text:e.term,newOption:!0}},ajax:{url:Routing.generate("ajax_select2_voter_group"),data:function(e){return{searchText:e.term}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.voter_group,text:e.voter_group}})}}}}),$("#form-voter-select2").on("change",function(){e.loadVoter(e.props.proId,$(this).val())}),$("#voter-group-select2").on("change",function(){e.setFieldValue("voterGroup",$(this).val())})},loadParentNode:function(e){var t=this;t.requestRecruiter=$.ajax({url:Routing.generate("ajax_get_project_recruitment_special_kcl",{recId:e}),type:"GET"}).done(function(e){t.setState({parentNode:e}),t.reInitSelect2(e)})},reInitSelect2:function(e){$("#municipality_select2").empty().append($("<option/>").val(e.municipality_no).text(e.municipality_name)).trigger("change")},loadVoter:function(e,t){var a=this;a.requestVoter=$.ajax({url:Routing.generate("ajax_get_project_voter",{proId:e,voterId:t}),type:"GET"}).done(function(e){var t=a.state.form;t.data.proVoterId=e.proVoterId,t.data.voterId=e.voterId,t.data.cellphone=a.isEmpty(e.cellphoneNo)?"":e.cellphoneNo,t.data.voterGroup=a.isEmpty(e.voterGroup)?"KCL0":e.voterGroup,t.data.assignedPrecinct=a.isEmpty(e.assignedPrecinct)?"":e.assignedPrecinct,t.data.precinctNo=a.isEmpty(e.precinctNo)?"":e.precinctNo,t.data.remarks=e.remarks,$("#voter-group-select2").empty().append($("<option/>").val(t.data.voterGroup).text(t.data.voterGroup)).trigger("change"),a.setState({form:t})});var r=a.state.form;r.data.proVoterId=null,r.data.voterId=null,r.data.cellphone="",r.data.voterGroup="",r.data.remarks="",a.setState({form:r})},reset:function(){var e=this.state.form;e.data.proVoterId="",e.data.cellphone="",e.data.remarks="",e.errors=[],$("#form-voter-select2").empty().trigger("change"),this.setState({form:e})},setFormProp:function(e){var t=this.state.form;t.data[e.target.name]=e.target.value,this.setState({form:t})},setFieldValue:function(e,t){var a=this.state.form;a.data[e]=t,this.setState({form:a})},setErrors:function(e){var t=this.state.form;t.errors=e,this.setState({form:t})},getError:function(e){var t=this.state.form.errors;for(var a in t)if(a==e)return t[e];return null},getValidationState:function(e){return null!=this.getError(e)?"error":""},isEmpty:function(e){return null==e||""==e},submit:function(e){e.preventDefault();var t=this,a=t.state.form.data;a.recId=t.props.recId,a.proId=t.props.proId,t.requestAddAttendee=$.ajax({url:Routing.generate("ajax_post_project_recruitment_special_household_leader"),type:"POST",data:a}).done(function(e){t.reset(),t.props.onSuccess(),t.props.notify("Member has been added.","teal")}).fail(function(e){"401"==e.status?t.props.notify("You dont have the permission to update this record.","ruby"):t.props.notify("Form Validation Failed.","ruby"),t.setErrors(e.responseJSON)})},render:function(){var e=this;e.state.form.data;return React.createElement(Modal,{keyboard:!1,enforceFocus:!1,dialogClassName:"modal-custom-40",backdrop:"static",show:this.props.show,onHide:this.props.onHide},React.createElement(Modal.Header,{className:"modal-header bg-blue-dark font-white",closeButton:!0},React.createElement(Modal.Title,null,"Household Leader Form")),React.createElement(Modal.Body,{bsClass:"modal-body overflow-auto"},React.createElement("form",{id:"voter-node-form",onSubmit:this.submit},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-12"},React.createElement("div",{className:"col-md-6",style:{paddingLeft:"0"}},React.createElement(FormGroup,{controlId:"formMunicipalityNo"},React.createElement(ControlLabel,null," Municipality : "),React.createElement("select",{id:"municipality_select2",className:"form-control form-filter input-sm",name:"municipalityNo"}))),React.createElement("div",{className:"col-md-6",style:{paddingRight:"0"}},React.createElement(FormGroup,{controlId:"formBrgyNo"},React.createElement(ControlLabel,null," Barangay : "),React.createElement("select",{id:"barangay_select2",className:"form-control form-filter input-sm",name:"brgyNo"}))),React.createElement(FormGroup,{controlId:"formProVoterId",validationState:this.getValidationState("proVoterId")},React.createElement(ControlLabel,null," Voter Name : "),React.createElement("select",{id:"form-voter-select2",className:"form-control input-sm"}),React.createElement(HelpBlock,null,this.getError("proVoterId"))),React.createElement("div",{className:"col-md-6",style:{paddingLeft:"0"}},React.createElement(FormGroup,{controlId:"formCellphone",validationState:this.getValidationState("cellphone")},React.createElement(ControlLabel,null," Cellphone No : "),React.createElement("input",{type:"text",placeholder:"Example : 09283182013",value:this.state.form.data.cellphone,className:"input-sm form-control",onChange:this.setFormProp,name:"cellphone"}),React.createElement(HelpBlock,null,this.getError("cellphone")))),React.createElement("div",{className:"col-md-6",style:{paddingRight:"0"}},React.createElement(FormGroup,{controlId:"formVoterGroup",validationState:this.getValidationState("voterGroup")},React.createElement(ControlLabel,null,"Position : "),React.createElement("select",{id:"voter-group-select2",className:"form-control input-sm"},React.createElement("option",{value:""}," ")),React.createElement(HelpBlock,null,this.getError("voterGroup")))),React.createElement(FormGroup,{controlId:"formRemarks",validationState:this.getValidationState("remarks")},React.createElement(ControlLabel,null," Remarks : "),React.createElement("textarea",{rows:"5",value:this.state.form.data.remarks,className:"input-sm form-control",onChange:this.setFormProp,name:"remarks"}),React.createElement(HelpBlock,null,this.getError("remarks"))))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-12 text-right"},React.createElement("button",{className:"btn btn-primary btn-sm",disabled:this.isEmpty(this.state.form.data.proVoterId),type:"submit"}," Submit "),React.createElement("button",{className:"btn btn-default btn-sm",type:"button",onClick:this.props.onHide}," Close "))))))}});window.ProjectRecruitmentSpecialHouseholdModal=ProjectRecruitmentSpecialHouseholdModal;var Modal=ReactBootstrap.Modal,FormGroup=ReactBootstrap.FormGroup,HelpBlock=ReactBootstrap.HelpBlock,ControlLabel=ReactBootstrap.ControlLabel,FormControl=ReactBootstrap.FormControl,ProjectRecruitmentSpecialKclModal=React.createClass({displayName:"ProjectRecruitmentSpecialKclModal",getInitialState:function(){return{member:null,showAddMemberModal:!1,header:{voter_name:"",barangay_name:"",municipality_name:"",voter_group:""}}},render:function(){return React.createElement(Modal,{style:{marginTop:"10px"},keyboard:!1,dialogClassName:"modal-custom-95",enforceFocus:!1,backdrop:"static",show:this.props.show,onHide:this.props.onHide},React.createElement(Modal.Header,{className:"modal-header bg-blue-dark font-white",closeButton:!0},React.createElement(Modal.Title,null,"KCL Recruitment Modal")),React.createElement(Modal.Body,{bsClass:"modal-body overflow-auto"},this.state.showAddMemberModal&&React.createElement(ProjectRecruitmentSpecialHouseholdModal,{proId:this.props.proId,recId:this.props.recId,show:this.state.showAddMemberModal,notify:this.props.notify,onSuccess:this.reloadDatatable,onHide:this.closeAddMemberModal}),React.createElement("div",{style:{marginBottom:"25px"}},React.createElement("strong",null,"Recruiter Name : ")," ",this.state.header.voter_name," ",React.createElement("br",null),React.createElement("strong",null,"Position  : ")," ",this.state.header.voter_group," ",React.createElement("br",null),React.createElement("strong",null,"Municipality : ")," ",this.state.header.municipality_name," ",React.createElement("br",null),React.createElement("strong",null,"Barangay : "),"  ",this.state.header.barangay_name," ",React.createElement("br",null)),React.createElement("div",{className:"col-md-7",style:{paddingLeft:"0px",marginBottom:"10px"}},React.createElement("button",{onClick:this.openAddMemberModal,type:"button",className:"btn btn-sm btn-primary"},"New Household Leader")),React.createElement(ProjectRecruitmentHouseholdDatatable,{ref:"DetailDatatable",proId:this.props.proId,notify:this.props.notify,recId:this.props.recId})))},componentDidMount:function(){this.loadKCL(this.props.recId)},loadKCL:function(e){var t=this;t.requestRecruiter=$.ajax({url:Routing.generate("ajax_get_project_recruitment_special_kcl",{recId:e}),type:"GET"}).done(function(e){t.setState({header:e})})},setFormProp:function(e){this.setState({proIdCode:e.target.value},this.search)},reloadDatatable:function(){this.refs.DetailDatatable.reload()},openAddMemberModal:function(){this.setState({showAddMemberModal:!0})},closeAddMemberModal:function(){this.setState({showAddMemberModal:!1})}});window.ProjectRecruitmentSpecialKclModal=ProjectRecruitmentSpecialKclModal;var Modal=ReactBootstrap.Modal,FormGroup=ReactBootstrap.FormGroup,HelpBlock=ReactBootstrap.HelpBlock,ControlLabel=ReactBootstrap.ControlLabel,FormControl=ReactBootstrap.FormControl,ProjectRecruitmentSpecialCreateModal=React.createClass({displayName:"ProjectRecruitmentSpecialCreateModal",getInitialState:function(){return{form:{data:{voterId:null,proVoterId:null},errors:[]}}},render:function(){return React.createElement(Modal,{style:{marginTop:"10px"},keyboard:!1,enforceFocus:!1,backdrop:"static",show:this.props.show,onHide:this.props.onHide},React.createElement(Modal.Header,{className:"modal-header bg-blue-dark font-white",closeButton:!0},React.createElement(Modal.Title,null,"KCL Form")),React.createElement(Modal.Body,{bsClass:"modal-body overflow-auto"},React.createElement("form",{id:"voter-recruit-create-form",onSubmit:this.submit},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-12"},React.createElement(FormGroup,{controlId:"formProVoterId",validationState:this.getValidationState("proVoterId")},React.createElement(ControlLabel,null," Voter Name : "),React.createElement("select",{id:"voter-recruit-select2",className:"form-control input-sm"}),React.createElement(HelpBlock,null,this.getError("proVoterId"))),React.createElement("div",{className:"col-md-6",style:{paddingLeft:"0"}},React.createElement(FormGroup,{controlId:"formCellphoneNo",validationState:this.getValidationState("cellphoneNo")},React.createElement(ControlLabel,null," Cellphone No : "),React.createElement("input",{type:"text",placeholder:"Example : 09283182013",value:this.state.form.data.cellphoneNo,className:"input-sm form-control",onChange:this.setFormProp,name:"cellphoneNo"}),React.createElement(HelpBlock,null,this.getError("cellphoneNo")))),React.createElement("div",{className:"col-md-6",style:{paddingRight:"0"}},React.createElement(FormGroup,{controlId:"formVoterGroup",validationState:this.getValidationState("voterGroup")},React.createElement(ControlLabel,null,"Position : "),React.createElement("select",{id:"voter-group-select2",className:"form-control input-sm"},React.createElement("option",{value:""}," ")),React.createElement(HelpBlock,null,this.getError("voterGroup")))),React.createElement(FormGroup,{controlId:"formRemarks",validationState:this.getValidationState("remarks")},React.createElement(ControlLabel,null," Remarks : "),React.createElement("textarea",{rows:"5",value:this.state.form.data.remarks,className:"input-sm form-control",onChange:this.setFormProp,name:"remarks"}),React.createElement(HelpBlock,null,this.getError("remarks"))))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-12 text-right"},React.createElement("button",{className:"btn btn-primary btn-sm",disabled:this.isEmpty(this.state.form.data.voterId),type:"submit"}," Submit "),React.createElement("button",{className:"btn btn-default btn-sm",type:"button",onClick:this.props.onHide}," Close "))))))},componentDidMount:function(){this.initSelect2()},initSelect2:function(){var e=this;$("#voter-recruit-select2").select2({casesentitive:!1,placeholder:"Enter Name...",allowClear:!0,delay:1500,width:"100%",containerCssClass:":all:",dropdownCssClass:"custom-option",ajax:{url:Routing.generate("ajax_select2_project_voters"),data:function(t){return{searchText:t.term,electId:e.props.electId,proId:e.props.proId,provinceCode:e.props.provinceCode,municipalityNo:e.props.municipalityNo,brgyNo:e.props.brgyNo}},processResults:function(e,t){return{results:e.map(function(e){var t=e.voter_name+" - "+e.precinct_no+" ( "+e.municipality_name+", "+e.barangay_name+" )";return{id:e.voter_id,text:t}})}}}}),$("#voter-group-select2").select2({casesentitive:!1,placeholder:"Enter Group",width:"100%",allowClear:!0,tags:!0,containerCssClass:":all:",createTag:function(e){return{id:e.term,text:e.term,newOption:!0}},ajax:{url:Routing.generate("ajax_select2_voter_group"),data:function(e){return{searchText:e.term}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.voter_group,text:e.voter_group}})}}}}),$("#voter-recruit-select2").on("change",function(){e.loadVoter(e.props.proId,$(this).val())}),$("#voter-group-select2").on("change",function(){e.setFormPropValue("voterGroup",$(this).val())})},loadVoter:function(e,t){var a=this;a.requestVoter=$.ajax({url:Routing.generate("ajax_get_project_voter",{proId:e,voterId:t}),type:"GET"}).done(function(e){var t=a.state.form;t.data.nodeLabel=e.voterName,t.data.nodeOrder=10,t.data.municipalityNo=e.municipalityNo,t.data.brgyNo=e.brgyNo,t.data.voterId=e.voterId,t.data.proVoterId=e.proVoterId,t.data.cellphoneNo=a.isEmpty(e.cellphoneNo)?"":e.cellphoneNo,t.data.voterGroup=a.isEmpty(e.voterGroup)?"KCL":e.voterGroup,t.data.remarks=a.isEmpty(e.remarks)?"":e.remarks,$("#voter-group-select2").empty().append($("<option/>").val(t.data.voterGroup).text(t.data.voterGroup)).trigger("change"),a.setState({form:t})})},setFormPropValue:function(e,t){var a=this.state.form;a.data[e]=t,this.setState({form:a})},setFormProp:function(e){var t=this.state.form;t.data[e.target.name]=e.target.value,this.setState({form:t})},setErrors:function(e){var t=this.state.form;t.errors=e,this.setState({form:t})},getError:function(e){var t=this.state.form.errors;for(var a in t)if(a==e)return t[e];return null},getValidationState:function(e){return null!=this.getError(e)?"error":""},isEmpty:function(e){return null==e||""==e},reset:function(){var e=this.state.form;e.errors=[],this.setState({form:e})},submit:function(e){e.preventDefault();var t=this,a=t.state.form.data;a.proId=t.props.proId,t.requestPost=$.ajax({url:Routing.generate("ajax_post_project_recruitment_special_kcl"),data:a,type:"POST"}).done(function(e){t.reset(),t.props.reload(),t.props.onHide()}).fail(function(e){t.setErrors(e.responseJSON)})}});window.ProjectRecruitmentSpecialCreateModal=ProjectRecruitmentSpecialCreateModal;var ProjectRecruitmentSpecialDatatable=React.createClass({displayName:"ProjectRecruitmentSpecialDatatable",getInitialState:function(){return{showCreateModal:!1,showEditModal:!1,showRecruitsModal:!1,target:null,typingTimer:null,doneTypingInterval:1500,user:null,filters:{electId:null,provinceCode:null,proId:null}}},componentDidMount:function(){this.loadUser(window.userId),this.initSelect2()},loadUser:function(e){var t=this;t.requestUser=$.ajax({url:Routing.generate("ajax_get_user",{id:e}),type:"GET"}).done(function(e){t.setState({user:e},t.reinitSelect2)})},initSelect2:function(){var e=this;$("#handler_component #election_select2").select2({casesentitive:!1,placeholder:"Select Election...",allowClear:!0,delay:1500,width:"100%",containerCssClass:":all:",ajax:{url:Routing.generate("ajax_select2_elections"),data:function(e){return{searchText:e.term}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.elect_id,text:e.elect_name}})}}}}),$("#handler_component #project_select2").select2({casesentitive:!1,placeholder:"Select Project...",allowClear:!0,delay:1500,width:"100%",containerCssClass:":all:",ajax:{url:Routing.generate("ajax_select2_projects"),data:function(e){return{searchText:e.term}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.pro_id,text:e.pro_name}})}}}}),$("#handler_component #province_select2").select2({casesentitive:!1,placeholder:"Enter Province...",allowClear:!0,delay:1500,width:"100%",containerCssClass:":all:",ajax:{url:Routing.generate("ajax_select2_province_strict"),data:function(e){return{searchText:e.term}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.province_code,text:e.name}})}}}}),$("#handler_component #election_select2").on("change",function(){var t=e.state.filters;t.electId=$(this).val(),e.setState({filters:t},e.reload)}),$("#handler_component #project_select2").on("change",function(){var t=e.state.filters;t.proId=$(this).val(),e.setState({filters:t},e.reload)}),$("#voter_table #province_select2").on("change",function(){var t=e.state.filters;t.provinceCode=$(this).val(),e.setState({filters:t},e.reload)})},reinitSelect2:function(){var e=this;if(!e.isEmpty(e.state.user.project)){var t=e.state.user.project.provinceCode;e.requestProvince=$.ajax({url:Routing.generate("ajax_get_province",{provinceCode:t}),type:"GET"}).done(function(e){$("#handler_component #province_select2").empty().append($("<option/>").val(e.province_code).text(e.name)).trigger("change")}),e.requestProject=$.ajax({url:Routing.generate("ajax_get_project",{proId:e.state.user.project.proId}),type:"GET"}).done(function(t){$("#handler_component #project_select2").empty().append($("<option/>").val(t.proId).text(t.proName)).trigger("change"),e.initDatatable()})}e.requestActiveElection=$.ajax({url:Routing.generate("ajax_get_active_election"),type:"GET"}).done(function(e){$("#handler_component #election_select2").empty().append($("<option/>").val(e.electId).text(e.electName)).trigger("change")}),e.state.user.isAdmin||($("#handler_component #election_select2").attr("disabled","disabled"),$("#handler_component #province_select2").attr("disabled","disabled"),$("#handler_component #project_select2").attr("disabled","disabled"))},initDatatable:function(){var e=this,t=(new Datatable,$("#project_recruitment_table")),a=new Datatable,r=Routing.generate("ajax_get_datatable_project_recruitment_special_kcl",{},!0);a.init({src:t,loadingMessage:"Loading...",dataTable:{bState:!0,autoWidth:!0,deferRender:!0,ajax:{url:r,type:"GET",data:function(e){e.electId=$("#handler_component #election_select2").val(),e.provinceCode=$("#handler_component #province_select2").val(),e.proId=$("#handler_component #project_select2").val(),e.voterName=$('#project_recruitment_table input[name="voter_name"]').val()}},columnDefs:[{orderable:!1,targets:[0,2,3,4,5]},{className:"align-center",targets:[0,3]}],order:[[0,"desc"]],columns:[{data:null,className:"text-center",width:30,render:function(e,t,a,r){return r.settings._iDisplayStart+r.row+1}},{data:"voter_name"},{data:"voter_group",className:"text-center",width:100},{data:"barangay_name",width:150},{data:"total_members",className:"text-center",width:100},{render:function(e,t,a){return"<a href='javascript:void(0);' class='btn btn-xs font-white bg-green recruits-button' data-toggle='tooltip' data-title='Edit'><i class='fa fa-calendar'></i></a><a href='javascript:void(0);' class='btn btn-xs font-white bg-red-sunglo delete-button' data-toggle='tooltip' data-title='Delete'><i class='fa fa-trash' ></i></a>"}}]}}),t.on("click",".recruits-button",function(){var t=a.getDataTable().row($(this).parents("tr")).data();e.setState({showRecruitsModal:!0,target:t.rec_id})}),t.on("click",".delete-button",function(){var t=a.getDataTable().row($(this).parents("tr")).data();e.delete(t.rec_id)}),e.grid=a},closeCreateModal:function(){this.setState({showCreateModal:!1,target:null})},closeRecruitsModal:function(){this.setState({showRecruitsModal:!1,target:null})},openCreateModal:function(){this.setState({showCreateModal:!0})},delete:function(e){var t=this;confirm("Are you sure you want to delete this record ?")&&(t.requestDelete=$.ajax({url:Routing.generate("ajax_delete_project_recruitment_special_kcl",{recId:e}),type:"DELETE"}).done(function(e){t.reload()}))},handleFilterChange:function(){var e=this;clearTimeout(this.state.typingTimer),this.state.typingTimer=setTimeout(function(){e.reload()},this.state.doneTypingInterval)},reload:function(){null!=this.grid&&this.grid.getDataTable().ajax.reload()},isEmpty:function(e){return null==e||""==e||"undefined"==e||e<=0},render:function(){return React.createElement("div",null,this.state.showCreateModal&&React.createElement(ProjectRecruitmentSpecialCreateModal,{proId:this.state.filters.proId,electId:this.state.filters.electId,provinceCode:this.state.filters.provinceCode,show:this.state.showCreateModal,notify:this.props.notify,reload:this.reload,onHide:this.closeCreateModal}),this.state.showRecruitsModal&&React.createElement(ProjectRecruitmentSpecialKclModal,{proId:this.state.filters.proId,electId:this.state.filters.electId,provinceCode:this.state.filters.provinceCode,recId:this.state.target,show:this.state.showRecruitsModal,notify:this.props.notify,reload:this.reload,onHide:this.closeRecruitsModal}),React.createElement("div",{className:"row",id:"handler_component"},React.createElement("div",{className:"col-md-5"},React.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.openCreateModal},"New KCL")),React.createElement("div",{className:"col-md-7"},React.createElement("form",{onSubmit:this.onApplyCode},React.createElement("div",{className:"col-md-3 col-md-offset-1"},React.createElement("select",{id:"election_select2",className:"form-control form-filter input-sm"})),React.createElement("div",{className:"col-md-4"},React.createElement("select",{id:"province_select2",className:"form-control form-filter input-sm"})),React.createElement("div",{className:"col-md-4"},React.createElement("select",{id:"project_select2",className:"form-control form-filter input-sm"}))))),React.createElement("div",{className:"table-container",style:{marginTop:"20px"}},React.createElement("table",{id:"project_recruitment_table",className:"table table-striped table-bordered",width:"100%"},React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",null,"No"),React.createElement("th",null,"Recruiter Name"),React.createElement("th",{className:"text-center"},"Position"),React.createElement("th",{className:"text-center"},"Barangay"),React.createElement("th",{className:"text-center"},"Total Household"),React.createElement("th",{width:"60px",className:"text-center"})),React.createElement("tr",null,React.createElement("td",null),React.createElement("td",{style:{padding:"10px 5px"}},React.createElement("input",{type:"text",className:"form-control form-filter input-sm",name:"voter_name",onChange:this.handleFilterChange})),React.createElement("td",null),React.createElement("td",null),React.createElement("td",null),React.createElement("td",null))),React.createElement("tbody",null))))}});window.ProjectRecruitmentSpecialDatatable=ProjectRecruitmentSpecialDatatable;var ProjectRecruitmentSpecialComponent=React.createClass({displayName:"ProjectRecruitmentSpecialComponent",getInitialState:function(){return{totalRecruit:0,totalRecruiter:0}},notify:function(e,t){$.notific8("zindex",11500),$.notific8(e,{heading:"System Message",color:t,life:5e3,verticalEdge:"right",horizontalEdge:"top"})},componentDidMount:function(){var e=this;e.requestEncodingStatus=$.ajax({url:Routing.generate("ajax_get_project_recruitment_special_status"),type:"GET"}).done(function(t){e.setState({totalRecruit:parseFloat(t.totalRecruit),totalRecruiter:parseFloat(t.totalRecruiter)})})},render:function(){return React.createElement("div",{className:"portlet light portlet-fit bordered"},React.createElement("div",{className:"portlet-body"},React.createElement("div",{className:"row",style:{marginBottom:"20px"}},React.createElement("div",{className:"col-md-6"},"Project Recruitement"),React.createElement("div",{className:"col-md-6 text-right"},React.createElement("span",{style:{marginLeft:"10px"}},React.createElement("span",{className:"bold font-red-sunglo"},"Today's Total Encoded Recruits :  ")," ",React.createElement("strong",null,this.numberWithCommas(this.state.totalRecruit))))),React.createElement(ProjectRecruitmentSpecialDatatable,{notify:this.notify})))},numberWithCommas:function(e){var t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")
}});setTimeout(function(){ReactDOM.render(React.createElement(ProjectRecruitmentSpecialComponent,null),document.getElementById("page-container"))},500);