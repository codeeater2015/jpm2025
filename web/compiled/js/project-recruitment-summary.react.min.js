var ProjectRecruitmentBarangaySummaryTable=React.createClass({displayName:"ProjectRecruitmentBarangaySummaryTable",getInitialState:function(){return{data:[],summary:{totalPrecincts:0,totalRegistered:0,totalRecruits:0,totalIs1:0,totalIs2:0,totalIs3:0,totalIs4:0,totalIs5:0,totalIs6:0,totalIs7:0,totalIs8:0,totalHasCellphone:0,totalWithIdRecruits:0,percentage:0},barangay:{name:""},targetProvince:null,targetMunicipality:null,targetBarangay:null,targetPrecinct:null,targetVoterGroup:null,showItemDetail:!1,loading:!1,refreshInterval:3e5,refreshCounter:0,refreshId:null,counterId:null,updating:!1}},componentDidMount:function(){var e=this;e.loadData(),e.initShortcuts();var t=setInterval(function(){e.loadData()},e.state.refreshInterval);e.setState({refreshId:t})},initShortcuts:function(){var e=this;$("body").keydown(function(t){121==(t.keyCode||t.which)&&(t.preventDefault(),e.loadData())})},componentWillUnmount:function(){clearInterval(this.state.refreshId)},loadData:function(){this.loadBarangayData(this.props.electId,this.props.proId,this.props.provinceCode,this.props.municipalityNo,this.props.brgyNo),this.loadBarangay(this.props.provinceCode,this.props.municipalityNo,this.props.brgyNo),this.initCounter()},recalculate:function(){var e=this,t={electId:e.props.electId,proId:e.props.proId,provinceCode:e.props.provinceCode,municipalityNo:e.props.municipalityNo,brgyNo:e.props.brgyNo};e.setState({updating:!0}),e.setState({updating:!0}),e.requestUpdateSummary=$.ajax({url:Routing.generate("ajax_update_recruitment_summary",t),type:"GET"}).done(function(){e.loadData()}).always(function(){e.setState({updating:!1})})},initCounter:function(){var e=this,t=e.state.counterId;null!=t&&clearInterval(t);var t=setInterval(function(){var t=e.state.refreshCounter;t++,e.setState({refreshCounter:t})},1e3);e.setState({counterId:t,refreshCounter:0})},loadBarangayData:function(e,t,a,r,l){var n=this;n.requestProvinceData=$.ajax({url:Routing.generate("ajax_get_barangay_recruitment_summary",{electId:e,proId:t,provinceCode:a,municipalityNo:r,brgyNo:l}),type:"GET"}).done(function(e){n.setState({data:e}),n.setSummary(e)})},loadBarangay:function(e,t,a){var r=this;r.requestMunicipality=$.ajax({url:Routing.generate("ajax_get_barangay",{provinceCode:e,municipalityNo:t,brgyNo:a}),type:"GET"}).done(function(e){r.setState({barangay:e})})},setSummary:function(e){var t=0,a=0,r=0,l=0,n=0,s=0,c=0,o=0,i=0,m=0,u=0,d=0;e.map(function(e){t++,a+=parseInt(e.total_voters),r+=parseInt(e.total_recruits),n+=parseInt(e.total_is_1),s+=parseInt(e.total_is_2),c+=parseInt(e.total_is_3),o+=parseInt(e.total_is_4),i+=parseInt(e.total_is_5),m+=parseInt(e.total_is_6),u+=parseInt(e.total_is_7),d+=parseInt(e.total_has_cellphone)}),r>0&&(l=(r/a*100).toFixed(2));var p={totalPrecincts:t,totalRegistered:a,totalRecruits:r,percentage:l,totalIs1:n,totalIs2:s,totalIs3:c,totalIs4:o,totalIs5:i,totalIs6:m,totalIs7:u,totalIs8:0,totalHasCellphone:d};this.setState({summary:p})},numberWithCommas:function(e){if(this.isEmpty(e)||isNaN(e))return 0;var t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")},render:function(){var e=this,t=0,a=0,r=0,l=0,n=0,s=0;return e.state.data.map(function(e){a+=parseInt(e.total_voters),r+=parseInt(e.total_recruits),n+=parseInt(e.total_has_cellphone)}),l=(r/a*100).toFixed(2),s=(n/r*100).toFixed(2),React.createElement("div",null,e.state.showItemDetail&&!e.isEmpty(e.state.targetBarangay)&&React.createElement(OrganizationSummaryItemDetail,{electId:e.props.electId,proId:e.props.proId,provinceCode:e.props.provinceCode,municipalityNo:e.props.municipalityNo,brgyNo:e.state.targetBarangay,precinctNo:e.state.targetPrecinct,voterGroup:e.state.targetVoterGroup,show:e.state.showItemDetail,onHide:e.closeDetailModal}),React.createElement("div",{style:{marginBottom:"5px"}},React.createElement("strong",null,"City/Municipality : ")),React.createElement("div",null,React.createElement("div",{className:"col-md-3",style:{padding:0}},React.createElement("div",{className:"bold"},"Total Barangay : ",React.createElement("span",{className:"font-red-sunglo"},this.numberWithCommas(this.state.summary.totalBarangay))),React.createElement("div",{className:"bold"},"Total Precincts : ",React.createElement("span",{className:"font-red-sunglo"},this.numberWithCommas(this.state.summary.totalPrecincts))),React.createElement("div",{className:"bold"},"Registered Voter : ",React.createElement("span",{className:"font-red-sunglo"},this.numberWithCommas(this.state.summary.totalRegistered)))),React.createElement("div",{className:"col-md-2",style:{padding:0}},React.createElement("div",{className:"bold"},"Total 1 : ",React.createElement("span",{className:"font-red-sunglo"},this.numberWithCommas(this.state.summary.totalIs1))),React.createElement("div",{className:"bold"},"Total 2 : ",React.createElement("span",{className:"font-red-sunglo"},this.numberWithCommas(this.state.summary.totalIs2))),React.createElement("div",{className:"bold"},"Total 3 : ",React.createElement("span",{className:"font-red-sunglo"},this.numberWithCommas(this.state.summary.totalIs3))),React.createElement("div",{className:"bold"},"Total 4 : ",React.createElement("span",{className:"font-red-sunglo"},this.numberWithCommas(this.state.summary.totalIs4))),React.createElement("br",null)),React.createElement("div",{className:"col-md-2",style:{padding:0}},React.createElement("div",{className:"bold"},"Total 5 : ",React.createElement("span",{className:"font-red-sunglo"},this.numberWithCommas(this.state.summary.totalIs5))),React.createElement("div",{className:"bold"},"Total 6 : ",React.createElement("span",{className:"font-red-sunglo"},this.numberWithCommas(this.state.summary.totalIs6))),React.createElement("div",{className:"bold"},"Total 7 : ",React.createElement("span",{className:"font-red-sunglo"},this.numberWithCommas(this.state.summary.totalIs7))),React.createElement("div",{className:"bold"},"Total 8 : ",React.createElement("span",{className:"font-red-sunglo"},this.numberWithCommas(this.state.summary.totalIs8))),React.createElement("br",null)),React.createElement("div",{className:"col-md-5"},React.createElement("div",{className:"bold"},"Total : ",React.createElement("span",{className:"font-red-sunglo"}," ",this.numberWithCommas(this.state.summary.totalRecruits)," ")," ",React.createElement("small",null,React.createElement("em",null,"( ",this.numberWithCommas(l)," %  of total voters )"))," "),React.createElement("div",{className:"bold"},"With Cellphone : ",React.createElement("span",{className:"font-red-sunglo"}," ",this.numberWithCommas(n)," ")," ",React.createElement("small",null,React.createElement("em",null,"( ",this.numberWithCommas(s)," %  of total members )"))))),React.createElement("div",null,React.createElement("div",{className:"col-md-6 col-md-offset-6 text-right",style:{marginTop:"10px",marginBottom:"5px",padding:"0"}},React.createElement("small",null,"Next refresh : ",React.createElement("span",{className:"bold font-green-jungle"},this.state.refreshInterval/1e3-this.state.refreshCounter,"s")," "),React.createElement("button",{className:"btn btn-primary btn-xs",onClick:this.loadData},React.createElement("i",{className:"fa fa-refresh"})," Refresh (F10)"),React.createElement("button",{style:{marginLeft:"10px"},className:"btn btn-danger btn-xs",disabled:this.state.updating,onClick:this.recalculate},this.state.updating?"Please wait this may take a while..":"Recalculate"))),React.createElement("div",{className:"clearfix"}),React.createElement("div",{className:"table-container"},React.createElement("table",{id:"voter_summary_table",className:"table table-striped table-bordered",width:"100%"},React.createElement("thead",{className:"bg-blue-dark font-white"},React.createElement("tr",null,React.createElement("th",{className:"text-center",rowSpan:"2"},"#"),React.createElement("th",{className:"text-center",rowSpan:"2"},"Prec"),React.createElement("th",{className:"text-center",rowSpan:"2"},"Reg"),React.createElement("th",{className:"text-center",colSpan:"11"},"Organization")),React.createElement("tr",null,React.createElement("th",{className:"text-center"},"1"),React.createElement("th",{className:"text-center"},"2"),React.createElement("th",{className:"text-center"},"3"),React.createElement("th",{className:"text-center"},"4"),React.createElement("th",{className:"text-center"},"5"),React.createElement("th",{className:"text-center"},"6"),React.createElement("th",{className:"text-center"},"7"),React.createElement("th",{className:"text-center"},"8"),React.createElement("th",{className:"text-center"},"Total"),React.createElement("th",{className:"text-center"},"CP"),React.createElement("th",{className:"text-center"},"%"))),React.createElement("tbody",null,this.state.data.map(function(a,r){if(e.display(a))return t+=1,React.createElement("tr",null,React.createElement("td",{className:"text-center"},t),React.createElement("td",{className:"text-center"},a.precinct_no),React.createElement("td",{className:"text-center"},0==a.total_voters?"- - -":e.numberWithCommas(a.total_voters)),React.createElement("td",{className:"text-center font-grey-gallery"},0==a.total_is_1?"- - -":e.numberWithCommas(a.total_is_1)),React.createElement("td",{className:"text-center font-grey-gallery"},0==a.total_is_2?"- - -":e.numberWithCommas(a.total_is_2)),React.createElement("td",{className:"text-center font-grey-gallery"},0==a.total_is_3?"- - -":e.numberWithCommas(a.total_is_3)),React.createElement("td",{className:"text-center font-grey-gallery"},0==a.total_is_4?"- - -":e.numberWithCommas(a.total_is_4)),React.createElement("td",{className:"text-center font-grey-gallery"},0==a.total_is_5?"- - -":e.numberWithCommas(a.total_is_5)),React.createElement("td",{className:"text-center font-grey-gallery"},0==a.total_is_6?"- - -":e.numberWithCommas(a.total_is_6)),React.createElement("td",{className:"text-center font-grey-gallery"},0==a.total_is_7?"- - -":e.numberWithCommas(a.total_is_7)),React.createElement("td",{className:"text-center font-grey-gallery"}),React.createElement("td",{className:"text-center"},0==a.total_recruits?"- - -":e.numberWithCommas(a.total_recruits)),React.createElement("td",{className:"text-center"},0==a.total_has_cellphone?"- - -":e.numberWithCommas(a.total_has_cellphone)),React.createElement("td",{className:"text-center"},0==a.total_has_cellphone?"- - -":(a.total_has_cellphone/a.total_recruits*100).toFixed(2)+"%"))}),0==this.state.data.length&&!this.state.loading&&React.createElement("tr",null,React.createElement("td",{colSpan:"14",className:"text-center"},"No records was found...")),this.state.loading&&React.createElement("tr",null,React.createElement("td",{colSpan:"14",className:"text-center"},"Data is being processed. Please wait for a while..."))))))},display:function(e){return!0},showDetail:function(e,t){var a=this;a.setState({targetProvince:a.props.provinceCode,targetMunicipality:a.props.municipalityNo,targetBarangay:a.props.brgyNo,targetPrecinct:e.precinct_no,targetVoterGroup:t,showItemDetail:!0})},closeDetailModal:function(){this.setState({showItemDetail:!1,targetProvince:null,targetMunicipality:null,targetBarangay:null,targetPrecinct:null,targetVoterGroup:null})},isEmpty:function(e){return null==e||""==e||"undefined"==e}});window.ProjectRecruitmentBarangaySummaryTable=ProjectRecruitmentBarangaySummaryTable;var ProjectRecruitmentMunicipalitySummaryTable=React.createClass({displayName:"ProjectRecruitmentMunicipalitySummaryTable",getInitialState:function(){return{data:[],municipality:{name:""},summary:{totalBarangay:0,totalPrecincts:0,totalRegistered:0,totalRecruits:0,totalCH:0,totalKCL:0,totalKCL0:0,totalKCL1:0,totalKCL2:0,totalVoted:0,totalDAO:0,totalOthers:0,totalHasCellphone:0,percentage:0,deep:1},targetBarangay:null,targetVoterGroup:null,showItemDetail:!1,loading:!1,refreshInterval:3e5,refreshCounter:0,refreshId:null,counterId:null,mode:"all",updating:!1,updateCount:0}},componentDidMount:function(){var e=this;e.loadData(),e.initShortcuts();var t=setInterval(function(){e.loadData()},e.state.refreshInterval);e.setState({refreshId:t})},initShortcuts:function(){var e=this;$("body").keydown(function(t){121==(t.keyCode||t.which)&&(t.preventDefault(),e.loadData())})},componentWillUnmount:function(){clearInterval(this.state.refreshId),clearInterval(this.state.counterId)},initCounter:function(){var e=this,t=e.state.counterId;null!=t&&clearInterval(t);var t=setInterval(function(){var t=e.state.refreshCounter;t++,e.setState({refreshCounter:t})},1e3);e.setState({counterId:t,refreshCounter:0})},loadData:function(){this.loadMunicipality(this.props.provinceCode,this.props.municipalityNo),this.loadMunicipalityData(this.props.electId,this.props.proId,this.props.provinceCode,this.props.municipalityNo),this.initCounter()},recalculate:function(){var e=this;if("all"==e.state.mode){console.log("recalculate all");var t={electId:e.props.electId,proId:e.props.proId,provinceCode:e.props.provinceCode,municipalityNo:e.props.municipalityNo};e.setState({updating:!0}),e.requestUpdateSummary=$.ajax({url:Routing.generate("ajax_update_recruitment_summary_by_municipality",t),type:"GET"}).done(function(){e.loadData()}).always(function(){e.setState({updating:!1}),alert("Re-computation has been completed...")})}else if("my_favorites"==e.state.mode){e.setState({updateCount:0});var a=0;e.state.data.map(function(t){if(1==t.is_favorite){var r={electId:e.props.electId,proId:e.props.proId,provinceCode:e.props.provinceCode,municipalityNo:e.props.municipalityNo,brgyNo:t.brgy_no};e.requestUpdateSummary=$.ajax({url:Routing.generate("ajax_update_project_voter_summary",r),type:"GET"}).done(function(){e.loadData()}).always(function(){var t=e.state.updateCount-1;console.log("update count"),console.log(t),e.setState({updateCount:t})}),a++}}),console.log("total update"),console.log(a),e.setState({updateCount:a})}},loadMunicipalityData:function(e,t,a,r){var l=this;l.requestMunicipalityData=$.ajax({url:Routing.generate("ajax_get_municipality_recruitment_summary",{electId:e,proId:t,provinceCode:a,municipalityNo:r}),type:"GET"}).done(function(e){l.setState({data:e}),l.setSummary(e)})},setSummary:function(e){var t=0,a=0,r=0,l=0,n=0,s=0,c=0,o=0,i=0,m=0,u=0,d=0;e.map(function(e){t++,a+=parseInt(e.total_precincts),r+=parseInt(e.total_voters),l+=parseInt(e.total_recruits),n+=parseInt(e.total_is_1),s+=parseInt(e.total_is_2),c+=parseInt(e.total_is_3),o+=parseInt(e.total_is_4),i+=parseInt(e.total_is_5),m+=parseInt(e.total_is_6),u+=parseInt(e.total_is_7)}),l>0&&(d=(l/r*100).toFixed(2));var p={totalBarangay:t,totalPrecincts:a,totalRegistered:r,totalRecruits:l,totalIs1:n,totalIs2:s,totalIs3:c,totalIs4:o,totalIs5:i,totalIs6:m,totalIs7:u,percentage:d};this.setState({summary:p})},loadMunicipality:function(e,t){var a=this;a.requestMunicipality=$.ajax({url:Routing.generate("ajax_get_municipality",{provinceCode:e,municipalityNo:t}),type:"GET"}).done(function(e){a.setState({municipality:e})})},numberWithCommas:function(e){var t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")},render:function(){var e=this,t=0,a=0,r=0,l=0,n=0,s=0,c=0,o=0,i=0,m=0,u=0,d=0,p=0,h=0,y=0,g=0,R=0;return e.state.data.map(function(t){e.display(t)&&(o++,i+=parseInt(t.total_precincts),m+=parseInt(t.total_voters),u+=parseInt(t.total_is_1),d+=parseInt(t.total_is_2),p+=parseInt(t.total_is_3),h+=parseInt(t.total_is_4),y+=parseInt(t.total_is_5),g+=parseInt(t.total_is_6),R+=parseInt(t.total_is_7),a+=parseInt(t.total_voters),r+=parseInt(t.total_recruits),l+=parseInt(t.total_with_id_recruits),s+=parseInt(t.total_has_cellphone))}),n=(r/a*100).toFixed(2),(l/r*100).toFixed(2),c=(s/r*100).toFixed(2),React.createElement("div",null,e.state.showItemDetail&&!e.isEmpty(e.state.targetBarangay)&&React.createElement(OrganizationSummaryItemDetail,{electId:e.props.electId,proId:e.props.proId,provinceCode:e.props.provinceCode,municipalityNo:e.props.municipalityNo,brgyNo:e.state.targetBarangay,voterGroup:e.state.targetVoterGroup,show:e.state.showItemDetail,onHide:e.closeDetailModal}),React.createElement("div",{style:{marginBottom:"5px"}},React.createElement("strong",null,"City/Municipality : ",this.state.municipality.name)),React.createElement("div",null,React.createElement("div",{className:"col-md-3",style:{padding:0}},React.createElement("div",{className:"bold"},"Total Barangay : ",React.createElement("span",{className:"font-red-sunglo"},this.numberWithCommas(o))),React.createElement("div",{className:"bold"},"Total Precincts : ",React.createElement("span",{className:"font-red-sunglo"},this.numberWithCommas(i))),React.createElement("div",{className:"bold"},"Registered Voter : ",React.createElement("span",{className:"font-red-sunglo"},this.numberWithCommas(m)))),React.createElement("div",{className:"col-md-2",style:{padding:0}},React.createElement("div",{className:"bold"},"Total 1 : ",React.createElement("span",{className:"font-red-sunglo"},this.numberWithCommas(u))),React.createElement("div",{className:"bold"},"Total 2 : ",React.createElement("span",{className:"font-red-sunglo"},this.numberWithCommas(d))),React.createElement("div",{className:"bold"},"Total 3 : ",React.createElement("span",{className:"font-red-sunglo"},this.numberWithCommas(p))),React.createElement("div",{className:"bold"},"Total 4 : ",React.createElement("span",{className:"font-red-sunglo"},this.numberWithCommas(h))),React.createElement("br",null)),React.createElement("div",{className:"col-md-2",style:{padding:0}},React.createElement("div",{className:"bold"},"Total 5 : ",React.createElement("span",{className:"font-red-sunglo"},this.numberWithCommas(y))),React.createElement("div",{className:"bold"},"Total 6 : ",React.createElement("span",{className:"font-red-sunglo"},this.numberWithCommas(g))),React.createElement("div",{className:"bold"},"Total 7 : ",React.createElement("span",{className:"font-red-sunglo"},this.numberWithCommas(R))),React.createElement("br",null)),React.createElement("div",{className:"col-md-4"},React.createElement("div",{className:"bold"},"Total : ",React.createElement("span",{className:"font-red-sunglo"}," ",this.numberWithCommas(r)," ")," ",React.createElement("small",null,React.createElement("em",null,"( ",this.numberWithCommas(n)," % )"))," "),React.createElement("div",{className:"bold"},"With Cellphone : ",React.createElement("span",{className:"font-red-sunglo"}," ",this.numberWithCommas(s)," ")," ",React.createElement("small",null,React.createElement("em",null,"( ",this.numberWithCommas(c)," % )"))))),React.createElement("div",{className:"clearfix"}),React.createElement("div",{className:"col-md-6",style:{padding:"0"}},React.createElement("select",{value:this.state.mode,onChange:e.setMode,style:{marginTop:"8px"}},React.createElement("option",{value:"all"}," All"),React.createElement("option",{value:"has_entry"},"Has Entry"),React.createElement("option",{value:"no_entry"},"No Entry"),React.createElement("option",{value:"my_favorites"},"Favorites"))),React.createElement("div",{className:"col-md-6 text-right",style:{marginTop:"10px",marginBottom:"5px",padding:"0"}},React.createElement("small",null,"Next refresh : ",React.createElement("span",{className:"bold font-green-jungle"},this.state.refreshInterval/1e3-this.state.refreshCounter,"s")," "),React.createElement("button",{className:"btn btn-primary btn-xs",onClick:this.loadData},React.createElement("i",{className:"fa fa-refresh"})," Refresh (F10)"),React.createElement("button",{style:{marginLeft:"10px"},className:"btn btn-danger btn-xs",disabled:"all"==this.state.mode?this.state.updating:this.state.updateCount>0,onClick:this.recalculate},!this.state.updating||this.state.updateCount<=0?"Recalculate":"Please wait this may take a while..")),React.createElement("div",{className:"table-container"},React.createElement("table",{id:"voter_summary_table",className:"table table-striped table-bordered",width:"100%"},React.createElement("thead",{className:"bg-blue-dark font-white"},React.createElement("tr",null,React.createElement("th",{className:"text-center",rowSpan:"2"},"#"),React.createElement("th",{className:"text-center",rowSpan:"2"},"Brgy"),React.createElement("th",{className:"text-center",rowSpan:"2"},"Prec"),React.createElement("th",{className:"text-center",rowSpan:"2"},"Reg"),React.createElement("th",{className:"text-center",colSpan:"11"},"Organization")),React.createElement("tr",null,React.createElement("th",{className:"text-center"},"1"),React.createElement("th",{className:"text-center"},"2"),React.createElement("th",{className:"text-center"},"3"),React.createElement("th",{className:"text-center"},"4"),React.createElement("th",{className:"text-center"},"5"),React.createElement("th",{className:"text-center"},"6"),React.createElement("th",{className:"text-center"},"7"),React.createElement("th",{className:"text-center"},"8"),React.createElement("th",{className:"text-center"},"Total"),React.createElement("th",{className:"text-center"},"CP"),React.createElement("th",{className:"text-center"},"%"))),React.createElement("tbody",null,this.state.data.map(function(a,r){if(e.display(a))return t+=1,React.createElement("tr",null,React.createElement("td",{className:"text-center"},t),React.createElement("td",{className:"text-left"},React.createElement("label",{className:"mt-checkbox status-checkbox"},React.createElement("input",{onClick:e.toggleFavorite.bind(e,a),type:"checkbox",checked:parseInt(a.is_favorite)?1:0,name:"is7"}),React.createElement("span",null)),a.name),React.createElement("td",{className:"text-center"},0==a.total_precincts?"- - -":e.numberWithCommas(a.total_precincts)),React.createElement("td",{className:"text-center"},0==a.total_voters?"- - -":e.numberWithCommas(a.total_voters)),React.createElement("td",{className:"text-center font-grey-gallery"},0==a.total_is_1?"- - -":e.numberWithCommas(a.total_is_1)),React.createElement("td",{className:"text-center font-grey-gallery"},0==a.total_is_2?"- - -":e.numberWithCommas(a.total_is_2)),React.createElement("td",{className:"text-center font-grey-gallery"},0==a.total_is_3?"- - -":e.numberWithCommas(a.total_is_3)),React.createElement("td",{className:"text-center font-grey-gallery"},0==a.total_is_4?"- - -":e.numberWithCommas(a.total_is_4)),React.createElement("td",{className:"text-center font-grey-gallery"},0==a.total_is_5?"- - -":e.numberWithCommas(a.total_is_5)),React.createElement("td",{className:"text-center font-grey-gallery"},0==a.total_is_6?"- - -":e.numberWithCommas(a.total_is_6)),React.createElement("td",{className:"text-center font-grey-gallery"},0==a.total_is_7?"- - -":e.numberWithCommas(a.total_is_7)),React.createElement("td",{className:"text-center"}),React.createElement("td",{className:"text-center"},0==a.total_recruits?"- - -":e.numberWithCommas(a.total_recruits)),React.createElement("td",{className:"text-center"},0==a.total_has_cellphone?"- - -":e.numberWithCommas(a.total_has_cellphone)),React.createElement("td",{className:"text-center"},0==a.total_has_cellphone?"- - -":(a.total_has_cellphone/a.total_recruits*100).toFixed(2)+"%"))}),0==this.state.data.length&&!this.state.loading&&React.createElement("tr",null,React.createElement("td",{colSpan:"14",className:"text-center"},"No records was found...")),this.state.loading&&React.createElement("tr",null,React.createElement("td",{colSpan:"14",className:"text-center"},"Data is being processed. Please wait for a while..."))))))},setMode:function(e){this.setState({mode:e.target.value})},showDetail:function(e,t){this.setState({targetVoterGroup:t,targetBarangay:e.brgy_no,showItemDetail:!0})},closeDetailModal:function(){this.setState({showItemDetail:!1,targetMunicipality:null,targetVoterGroup:null})},isEmpty:function(e){return null==e||""==e||"undefined"==e},toggleFavorite:function(e){console.log("favorite has been toggled"),console.log(e);var t=this;t.requestToggleFavorite=$.ajax({url:Routing.generate("ajax_patch_barangay_status"),type:"PATCH",data:{isFavorite:1!=e.is_favorite?1:0,municipalityCode:e.municipality_code,brgyNo:e.brgy_no}}).done(function(e){console.log("barangay has been toggled"),t.loadMunicipalityData(t.props.electId,t.props.proId,t.props.provinceCode,t.props.municipalityNo)}).fail(function(e){console.log("something went wrong")})},display:function(e){var t=this.state.mode;return"all"==t||("no_entry"==t?0==e.total_recruits:"has_entry"==t?e.total_recruits>0:"my_favorites"==t&&1==parseInt(e.is_favorite))},isActive:function(e){if(this.isEmpty(e))return!1;var t=new Date,a=new Date(e),r=t-a,l=Math.floor(r/864e5),n=Math.floor(r%864e5/36e5),s=Math.round(r%864e5%36e5/6e4);return t.getTime()<a.getTime()||0==l&&0==n&&s<=10}});window.ProjectRecruitmentMunicipalitySummaryTable=ProjectRecruitmentMunicipalitySummaryTable;var ProjectRecruitmentProvinceSummaryTable=React.createClass({displayName:"ProjectRecruitmentProvinceSummaryTable",getInitialState:function(){return{data:[],summary:{totalMunicipality:0,totalBarangay:0,totalPrecincts:0,totalRegistered:0,totalRecruits:0,totalIs1:0,totalIs2:0,totalIs3:0,totalIs4:0,totalIs5:0,totalIs6:0,totalIs7:0,totalHasCellphone:0,percentage:0},province:{name:""},targetMunicipality:null,targetVoterGroup:null,showItemDetail:!1,loading:!1,refreshInterval:3e5,refreshCounter:0,refreshId:null,counterId:null,mode:"all"}},componentDidMount:function(){var e=this;e.loadData(),e.initShortcuts();var t=setInterval(function(){e.loadData()},e.state.refreshInterval);e.setState({refreshId:t})},componentWillUnmount:function(){clearInterval(this.state.refreshId),clearInterval(this.state.counterId)},initShortcuts:function(){var e=this;$("body").keydown(function(t){121==(t.keyCode||t.which)&&(t.preventDefault(),e.loadData())})},initCounter:function(){var e=this,t=e.state.counterId;null!=t&&clearInterval(t);var t=setInterval(function(){var t=e.state.refreshCounter;t++,e.setState({refreshCounter:t})},1e3);e.setState({counterId:t,refreshCounter:0})},loadData:function(){this.loadProvince(this.props.provinceCode),this.loadProvinceData(this.props.electId,this.props.proId,this.props.provinceCode),this.initCounter()},loadProvince:function(e){var t=this;t.requestProvince=$.ajax({url:Routing.generate("ajax_get_province",{provinceCode:e}),type:"GET"}).done(function(e){t.setState({province:e})})},loadProvinceData:function(e,t,a){var r=this;r.requestProvinceData=$.ajax({url:Routing.generate("ajax_get_province_recruitment_summary",{electId:e,proId:t,provinceCode:a}),type:"GET"}).done(function(e){r.setState({data:e}),r.setSummary(e)}).always(function(){r.setState({loading:!1})}),r.setState({loading:!0})},setSummary:function(e){var t=0,a=0,r=0,l=0,n=0,s=0,c=0,o=0,i=0,m=0,u=0,d=0;e.map(function(e){t+=parseInt(e.total_barangays),a+=parseInt(e.total_precincts),r+=parseInt(e.total_voters),u+=parseInt(e.total_recruits),l+=parseInt(e.total_is_1),n+=parseInt(e.total_is_2),s+=parseInt(e.total_is_3),c+=parseInt(e.total_is_4),o+=parseInt(e.total_is_5),i+=parseInt(e.total_is_6),m+=parseInt(e.total_is_7)}),u>0&&(d=(u/r*100).toFixed(2));var p={totalBarangay:t,totalPrecincts:a,totalRegistered:r,totalRecruits:u,totalIs1:l,totalIs2:n,totalIs3:s,totalIs4:c,totalIs5:i,totalIs6:i,totalIs7:m,percentage:d};this.setState({summary:p})},numberWithCommas:function(e){var t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")},render:function(){var e=this,t=0,a=0,r=0,l=0,n=0,s=0;return e.state.data.map(function(t){e.display(t)&&(a+=parseInt(t.total_voters),r+=parseInt(t.total_recruits),n+=parseInt(t.total_has_cellphone))}),l=(r/a*100).toFixed(2),s=(n/r*100).toFixed(2),React.createElement("div",null,React.createElement("div",{style:{marginBottom:"5px"}},React.createElement("strong",null,"Province : ",this.state.province.name)),React.createElement("div",{className:"col-md-3",style:{padding:0}},React.createElement("div",{className:"bold"},"Total Barangay : ",React.createElement("span",{className:"font-red-sunglo"},this.numberWithCommas(this.state.summary.totalBarangay))),React.createElement("div",{className:"bold"},"Total Precincts : ",React.createElement("span",{className:"font-red-sunglo"},this.numberWithCommas(this.state.summary.totalPrecincts))),React.createElement("div",{className:"bold"},"Registered Voter : ",React.createElement("span",{className:"font-red-sunglo"},this.numberWithCommas(this.state.summary.totalRegistered)))),React.createElement("div",{className:"col-md-2",style:{padding:0}},React.createElement("div",{className:"bold"},"Total 1 : ",React.createElement("span",{className:"font-red-sunglo"},this.numberWithCommas(this.state.summary.totalIs1))),React.createElement("div",{className:"bold"},"Total 2 : ",React.createElement("span",{className:"font-red-sunglo"},this.numberWithCommas(this.state.summary.totalIs2))),React.createElement("div",{className:"bold"},"Total 3 : ",React.createElement("span",{className:"font-red-sunglo"},this.numberWithCommas(this.state.summary.totalIs3))),React.createElement("div",{className:"bold"},"Total 4 : ",React.createElement("span",{className:"font-red-sunglo"},this.numberWithCommas(this.state.summary.totalIs4))),React.createElement("br",null)),React.createElement("div",{className:"col-md-2",style:{padding:0}},React.createElement("div",{className:"bold"},"Total 5 : ",React.createElement("span",{className:"font-red-sunglo"},this.numberWithCommas(this.state.summary.totalIs5))),React.createElement("div",{className:"bold"},"Total 6 : ",React.createElement("span",{className:"font-red-sunglo"},this.numberWithCommas(this.state.summary.totalIs6))),React.createElement("div",{className:"bold"},"Total 7  : ",React.createElement("span",{className:"font-red-sunglo"},this.numberWithCommas(this.state.summary.totalIs7))),React.createElement("br",null)),React.createElement("div",{className:"col-md-4"},React.createElement("div",{className:"bold"},"Total : ",React.createElement("span",{className:"font-red-sunglo"}," ",this.numberWithCommas(this.state.summary.totalRecruits)," ")," ",React.createElement("small",null,React.createElement("em",null,"( ",this.numberWithCommas(l)," % )"))," "),React.createElement("div",{className:"bold"},"With Cellphone : ",React.createElement("span",{className:"font-red-sunglo"}," ",this.numberWithCommas(n)," ")," ",React.createElement("small",null,React.createElement("em",null,"( ",this.numberWithCommas(s)," % )")))),React.createElement("div",{className:"clearfix"}),React.createElement("div",{className:"col-md-6",style:{padding:"0"}},React.createElement("select",{value:this.state.mode,onChange:e.setMode,style:{marginTop:"8px"}},React.createElement("option",{value:"all"}," All"),React.createElement("option",{value:"has_entry"},"Has Entry"),React.createElement("option",{value:"no_entry"},"No Entry"))),React.createElement("div",{className:"col-md-6 text-right",style:{marginTop:"10px",marginBottom:"5px",padding:"0"}},React.createElement("small",null,"Next refresh : ",React.createElement("span",{className:"bold font-green-jungle"},this.state.refreshInterval/1e3-this.state.refreshCounter,"s")," "),React.createElement("button",{className:"btn btn-primary btn-xs",onClick:this.loadData},React.createElement("i",{className:"fa fa-refresh"})," Refresh (F10)")),React.createElement("div",{className:"table-container"},React.createElement("table",{id:"voter_summary_table",className:"table table-striped table-bordered",width:"100%"},React.createElement("thead",{className:"bg-blue-dark font-white"},React.createElement("tr",null,React.createElement("th",{className:"text-center",rowSpan:"2"},"#"),React.createElement("th",{className:"text-center",rowSpan:"2"},"Mun"),React.createElement("th",{className:"text-center",rowSpan:"2"},"Brgy"),React.createElement("th",{className:"text-center",rowSpan:"2"},"Prec"),React.createElement("th",{className:"text-center",rowSpan:"2"},"Reg"),React.createElement("th",{className:"text-center",colSpan:"10"},"Organization")),React.createElement("tr",null,React.createElement("th",{className:"text-center"},"1"),React.createElement("th",{className:"text-center"},"2"),React.createElement("th",{className:"text-center"},"3"),React.createElement("th",{className:"text-center"
},"4"),React.createElement("th",{className:"text-center"},"5"),React.createElement("th",{className:"text-center"},"6"),React.createElement("th",{className:"text-center"},"7"),React.createElement("th",{className:"text-center"},"Total"),React.createElement("th",{className:"text-center"},"CP"),React.createElement("th",{className:"text-center"},"%"))),React.createElement("tbody",null,this.state.data.map(function(a,r){if(e.display(a))return t+=1,React.createElement("tr",null,React.createElement("td",{className:"text-center"},t),React.createElement("td",{className:"text-center"},a.name,!e.isEmpty(a.updated_at)&&React.createElement("span",{className:"font-green-jungle bold",style:{fontSize:"10px",marginLeft:"5px"}},moment(new Date(a.updated_at)).fromNow())),React.createElement("td",{className:"text-center"},0==a.total_barangays?"- - -":e.numberWithCommas(a.total_barangays)),React.createElement("td",{className:"text-center"},0==a.total_precincts?"- - -":e.numberWithCommas(a.total_precincts)),React.createElement("td",{className:"text-center"},0==a.total_voters?"- - -":e.numberWithCommas(a.total_voters)),React.createElement("td",{className:"text-center font-grey-gallery"},0==a.total_is_1?"- - -":e.numberWithCommas(a.total_is_1)),React.createElement("td",{className:"text-center font-grey-gallery"},0==a.total_is_2?"- - -":e.numberWithCommas(a.total_is_2)),React.createElement("td",{className:"text-center font-grey-gallery"},0==a.total_is_3?"- - -":e.numberWithCommas(a.total_is_3)),React.createElement("td",{className:"text-center font-grey-gallery"},0==a.total_is_4?"- - -":e.numberWithCommas(a.total_is_4)),React.createElement("td",{className:"text-center font-grey-gallery"},0==a.total_is_5?"- - -":e.numberWithCommas(a.total_is_5)),React.createElement("td",{className:"text-center font-grey-gallery"},0==a.total_is_6?"- - -":e.numberWithCommas(a.total_is_6)),React.createElement("td",{className:"text-center font-grey-gallery"},0==a.total_is_7?"- - -":e.numberWithCommas(a.total_is_7)),React.createElement("td",{className:"text-center"},0==a.total_recruits?"- - -":e.numberWithCommas(a.total_recruits)),React.createElement("td",{className:"text-center"},0==a.total_has_cellphone?"- - -":e.numberWithCommas(a.total_has_cellphone)),React.createElement("td",{className:"text-center"},0==a.total_has_cellphone?"- - -":(a.total_has_cellphone/a.total_recruits*100).toFixed(2)+"%"))}),0==this.state.data.length&&!this.state.loading&&React.createElement("tr",null,React.createElement("td",{className:"text-center",colSpan:"13"},"No records was found...")),this.state.loading&&React.createElement("tr",null,React.createElement("td",{className:"text-center",colSpan:"13"},"Data is being processed. Please wait for a while..."))))))},setMode:function(e){this.setState({mode:e.target.value})},showDetail:function(e,t){this.setState({targetVoterGroup:t,targetMunicipality:e.municipality_no,showItemDetail:!0})},closeDetailModal:function(){this.setState({showItemDetail:!1,targetMunicipality:null,targetVoterGroup:null})},isEmpty:function(e){return null==e||""==e||"undefined"==e},display:function(e){var t=this.state.mode;return"all"==t||("active"==t?this.isActive(e.updated_at):"no_entry"==t?0==e.total_recruits:"has_entry"==t&&e.total_recruits>0)},isActive:function(e){if(this.isEmpty(e))return!1;var t=new Date,a=new Date(e),r=t-a,l=Math.floor(r/864e5),n=Math.floor(r%864e5/36e5),s=Math.round(r%864e5%36e5/6e4);return t.getTime()<a.getTime()||0==l&&0==n&&s<=10}});window.ProjectRecruitmentProvinceSummaryTable=ProjectRecruitmentProvinceSummaryTable;var ProjectRecruitmentSummary=React.createClass({displayName:"ProjectRecruitmentSummary",getInitialState:function(){return{provinceCode:null,municipalityNo:null,brgyNo:null,electId:null,proId:null,displayBarangayTable:!1,displayMunicipalityTable:!1,displayProvinceTable:!1}},notify:function(e,t){$.notific8("zindex",11500),$.notific8(e,{heading:"System Message",color:t,life:5e3,verticalEdge:"right",horizontalEdge:"top"})},render:function(){return React.createElement("div",{id:"voter_record_summary",className:"portlet light portlet-fit bordered"},React.createElement("div",{className:"portlet-body"},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-3"},React.createElement("form",null,React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label"},"Election"),React.createElement("select",{id:"election_select2",className:"form-control form-filter input-sm",name:"electId"})),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label"},"Province"),React.createElement("select",{id:"province_select2",className:"form-control form-filter input-sm",name:"provinceCode"})),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label"},"Project"),React.createElement("select",{id:"project_select2",className:"form-control form-filter input-sm",name:"proId"})),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label"},"City/Municipality"),React.createElement("select",{id:"municipality_select2",className:"form-control form-filter input-sm",name:"municipalityNo"})),React.createElement("div",{className:"form-group"},React.createElement("label",{className:"control-label"},"Barangay"),React.createElement("select",{id:"barangay_select2",className:"form-control form-filter input-sm",name:"brgyNo"})),React.createElement("div",null,React.createElement("button",{type:"button",style:{width:"100%"},className:"btn btn-primary",onClick:this.displayTable},"Apply")))),React.createElement("div",{className:"col-md-9",style:{padding:"0px"}},this.state.displayProvinceTable&&React.createElement(ProjectRecruitmentProvinceSummaryTable,{electId:this.state.electId,proId:this.state.proId,provinceCode:this.state.provinceCode,notify:this.notify}),this.state.displayMunicipalityTable&&React.createElement(ProjectRecruitmentMunicipalitySummaryTable,{electId:this.state.electId,proId:this.state.proId,provinceCode:this.state.provinceCode,municipalityNo:this.state.municipalityNo,notify:this.notify}),this.state.displayBarangayTable&&React.createElement(ProjectRecruitmentBarangaySummaryTable,{electId:this.state.electId,proId:this.state.proId,provinceCode:this.state.provinceCode,municipalityNo:this.state.municipalityNo,brgyNo:this.state.brgyNo,notify:this.notify})))))},componentDidMount:function(){this.initSelect2(),this.loadUser(window.userId)},loadUser:function(e){var t=this;t.requestUser=$.ajax({url:Routing.generate("ajax_get_user",{id:e}),type:"GET"}).done(function(e){t.setState({user:e},t.reinitSelect2)})},initSelect2:function(){var e=this;$("#voter_record_summary #election_select2").select2({casesentitive:!1,placeholder:"Select Election",allowClear:!0,delay:1500,width:"100%",containerCssClass:":all:",ajax:{url:Routing.generate("ajax_select2_elections"),data:function(e){return{searchText:e.term}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.elect_id,text:e.elect_name}})}}}}),$("#voter_record_summary #province_select2").select2({casesentitive:!1,placeholder:"Select Province",allowClear:!0,delay:1500,width:"100%",containerCssClass:":all:",ajax:{url:Routing.generate("ajax_select2_province_strict"),data:function(e){return{searchText:e.term}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.province_code,text:e.name}})}}}}),$("#voter_record_summary #project_select2").select2({casesentitive:!1,placeholder:"Select Project",allowClear:!0,delay:1500,width:"100%",containerCssClass:":all:",ajax:{url:Routing.generate("ajax_select2_projects"),data:function(e){return{searchText:e.term}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.pro_id,text:e.pro_name}})}}}}),$("#voter_record_summary #municipality_select2").select2({casesentitive:!1,placeholder:"Select City/Municipality",allowClear:!0,delay:1500,width:"100%",containerCssClass:":all:",ajax:{url:Routing.generate("ajax_select2_municipality_strict"),data:function(t){return{searchText:t.term,provinceCode:e.state.provinceCode}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.municipality_no,text:e.name}})}}}}),$("#voter_record_summary #barangay_select2").select2({casesentitive:!1,placeholder:"Select Barangay",allowClear:!0,delay:1500,width:"100%",containerCssClass:":all:",ajax:{url:Routing.generate("ajax_select2_barangay_strict"),data:function(t){return{searchText:t.term,municipalityNo:$("#voter_record_summary #municipality_select2").val(),provinceCode:e.state.provinceCode}},processResults:function(e,t){return{results:e.map(function(e){return{id:e.brgy_no,text:e.name}})}}}}),$("#voter_record_summary #election_select2").on("change",function(){e.setState({electId:$(this).val()})}),$("#voter_record_summary #project_select2").on("change",function(){e.setState({proId:$(this).val()})}),$("#voter_record_summary #province_select2").on("change",function(){$("#voter_record_summary #municipality_select2").empty().trigger("change"),$("#voter_record_summary #barangay_select2").empty().trigger("change"),e.setState({provinceCode:$(this).val()})}),$("#voter_record_summary #municipality_select2").on("change",function(){$("#voter_record_summary #barangay_select2").empty().trigger("change"),e.setState({municipalityNo:$(this).val()})}),$("#voter_record_summary #barangay_select2").on("change",function(){e.setState({brgyNo:$(this).val()})})},reinitSelect2:function(){var e=this;if(!e.isEmpty(e.state.user)){var t=e.state.user.project.provinceCode;e.requestProvince=$.ajax({url:Routing.generate("ajax_get_province",{provinceCode:t}),type:"GET"}).done(function(e){$("#voter_record_summary #province_select2").empty().append($("<option/>").val(e.province_code).text(e.name)).trigger("change")}),e.requestProject=$.ajax({url:Routing.generate("ajax_get_project",{proId:e.state.user.project.proId}),type:"GET"}).done(function(e){$("#voter_record_summary #project_select2").empty().append($("<option/>").val(e.proId).text(e.proName)).trigger("change")})}e.requestActiveElection=$.ajax({url:Routing.generate("ajax_get_active_election"),type:"GET"}).done(function(e){$("#voter_record_summary #election_select2").empty().append($("<option/>").val(e.electId).text(e.electName)).trigger("change")}),e.state.user.isAdmin||$("#voter_record_summary #province_select2").attr("disabled","disabled")},displayTable:function(){var e=this,t=this.state.provinceCode,a=this.state.municipalityNo,r=this.state.brgyNo,l=!1,n=!1,s=!1;this.isEmpty(a)&&this.isEmpty(r)&&!this.isEmpty(t)?(l=!0,n=!1,s=!1):!this.isEmpty(a)&&this.isEmpty(r)?(l=!1,n=!0,s=!1):this.isEmpty(a)||this.isEmpty(r)||(l=!1,n=!1,s=!0),console.log(this.state),this.setState({displayProvinceTable:!1,displayMunicipalityTable:!1,displayBarangayTable:!1}),setTimeout(function(){e.setState({displayProvinceTable:l,displayMunicipalityTable:n,displayBarangayTable:s})},1e3)},isEmpty:function(e){return null==e||""==e||"undefined"==e},retrieve:function(){console.log("retrieving  data")}});setTimeout(function(){ReactDOM.render(React.createElement(ProjectRecruitmentSummary,null),document.getElementById("container"))},500);